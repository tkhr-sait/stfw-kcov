var data = {lines:[
{"lineNum":"    1","line":"#!/bin/bash"},
{"lineNum":"    2","line":"#set -eux"},
{"lineNum":"    3","line":"#==================================================================================================="},
{"lineNum":"    4","line":"#"},
{"lineNum":"    5","line":"# Integration-Test - Distribution package"},
{"lineNum":"    6","line":"#"},
{"lineNum":"    7","line":"#==================================================================================================="},
{"lineNum":"    8","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"    9","line":"# env"},
{"lineNum":"   10","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   11","line":"dir_script=\"$(dirname $0)\"","class":"lineCov","hits":"1","order":"1",},
{"lineNum":"   12","line":"cd \"$(cd ${dir_script}; cd ../..; pwd)\" || exit 1","class":"lineCov","hits":"1","order":"2",},
{"lineNum":"   13","line":""},
{"lineNum":"   14","line":"readonly DIR_BASE=\"$(pwd)\"","class":"lineCov","hits":"1","order":"3",},
{"lineNum":"   15","line":". \"${DIR_BASE}/build/env.properties\"","class":"lineCov","hits":"1","order":"4",},
{"lineNum":"   16","line":""},
{"lineNum":"   17","line":""},
{"lineNum":"   18","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   19","line":"# check"},
{"lineNum":"   20","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   21","line":"if [[ $# -ne 1 ]]; then","class":"lineCov","hits":"1","order":"5",},
{"lineNum":"   22","line":"  echo \"$0 PATH_ARCHIVE\" >&2","class":"lineNoCov","hits":"0",},
{"lineNum":"   23","line":"  exit 1","class":"lineNoCov","hits":"0",},
{"lineNum":"   24","line":"fi"},
{"lineNum":"   25","line":""},
{"lineNum":"   26","line":"path_archive=\"$1\"","class":"lineCov","hits":"1","order":"6",},
{"lineNum":"   27","line":"if [[ ! -f \"${path_archive}\" ]]; then","class":"lineCov","hits":"1","order":"7",},
{"lineNum":"   28","line":"  echo \"${path_archive} is not exist\" >&2","class":"lineNoCov","hits":"0",},
{"lineNum":"   29","line":"  exit 1","class":"lineNoCov","hits":"0",},
{"lineNum":"   30","line":"fi"},
{"lineNum":"   31","line":""},
{"lineNum":"   32","line":""},
{"lineNum":"   33","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   34","line":"# prepare"},
{"lineNum":"   35","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   36","line":"echo \"$(basename $0)\"","class":"lineCov","hits":"1","order":"8",},
{"lineNum":"   37","line":""},
{"lineNum":"   38","line":"echo \"  prepare\"","class":"lineCov","hits":"1","order":"9",},
{"lineNum":"   39","line":"DIR_TEST_WORK=\"${DIR_DIST}/test\"","class":"lineCov","hits":"1","order":"10",},
{"lineNum":"   40","line":"if [[ -d \"${DIR_TEST_WORK}\" ]]; then rm -fr \"${DIR_TEST_WORK}\"; fi","class":"lineCov","hits":"1","order":"11",},
{"lineNum":"   41","line":"mkdir -p \"${DIR_TEST_WORK}\"","class":"lineCov","hits":"1","order":"12",},
{"lineNum":"   42","line":""},
{"lineNum":"   43","line":"DIR_TEST_HOME=\"${DIR_TEST_WORK}/stfw\"","class":"lineCov","hits":"1","order":"13",},
{"lineNum":"   44","line":"DIR_TEST_PROJ=\"${DIR_TEST_WORK}/proj\"","class":"lineCov","hits":"1","order":"14",},
{"lineNum":"   45","line":""},
{"lineNum":"   46","line":"# 配布アーカイブ展開"},
{"lineNum":"   47","line":"echo \"    extract package\"","class":"lineCov","hits":"1","order":"15",},
{"lineNum":"   48","line":"if [[ -d \"${DIR_TEST_HOME}\" ]]; then rm -fr \"${DIR_TEST_HOME}\"; fi","class":"lineCov","hits":"1","order":"16",},
{"lineNum":"   49","line":"mkdir -p \"${DIR_TEST_HOME}\"","class":"lineCov","hits":"1","order":"17",},
{"lineNum":"   50","line":"cd \"${DIR_TEST_HOME}\"","class":"lineCov","hits":"1","order":"18",},
{"lineNum":"   51","line":"tar xzf \"${path_archive}\"","class":"lineCov","hits":"1","order":"19",},
{"lineNum":"   52","line":"mv ./stfw-*/* .","class":"lineCov","hits":"1","order":"20",},
{"lineNum":"   53","line":"rm -fr ./stfw-*","class":"lineCov","hits":"1","order":"21",},
{"lineNum":"   54","line":""},
{"lineNum":"   55","line":"# install"},
{"lineNum":"   56","line":"echo \"    install\"","class":"lineCov","hits":"1","order":"22",},
{"lineNum":"   57","line":"\"${DIR_TEST_HOME}/bin/install\"","class":"lineCov","hits":"1","order":"23",},
{"lineNum":"   58","line":""},
{"lineNum":"   59","line":"# PATH追加"},
{"lineNum":"   60","line":"echo \"    add path\"","class":"lineCov","hits":"1","order":"24",},
{"lineNum":"   61","line":"export PATH=\"${DIR_TEST_HOME}/bin:${PATH}\"","class":"lineCov","hits":"1","order":"25",},
{"lineNum":"   62","line":""},
{"lineNum":"   63","line":""},
{"lineNum":"   64","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   65","line":"# STEP: project init"},
{"lineNum":"   66","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   67","line":"STEP=\"project init\"","class":"lineCov","hits":"1","order":"26",},
{"lineNum":"   68","line":"echo \"  ${STEP}\"","class":"lineCov","hits":"1","order":"27",},
{"lineNum":"   69","line":""},
{"lineNum":"   70","line":"if [[ -d \"${DIR_TEST_PROJ}\" ]]; then rm -fr \"${DIR_TEST_PROJ}\"; fi","class":"lineCov","hits":"1","order":"28",},
{"lineNum":"   71","line":"mkdir -p \"${DIR_TEST_PROJ}\"","class":"lineCov","hits":"1","order":"29",},
{"lineNum":"   72","line":"cd \"${DIR_TEST_PROJ}\"","class":"lineCov","hits":"1","order":"30",},
{"lineNum":"   73","line":"stfw init","class":"lineCov","hits":"1","order":"31",},
{"lineNum":"   74","line":"retcode=$?","class":"lineCov","hits":"1","order":"32",},
{"lineNum":"   75","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"33",},
{"lineNum":"   76","line":""},
{"lineNum":"   77","line":"stfw gen-encrypt-key","class":"lineCov","hits":"1","order":"34",},
{"lineNum":"   78","line":"retcode=$?","class":"lineCov","hits":"1","order":"35",},
{"lineNum":"   79","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"36",},
{"lineNum":"   80","line":""},
{"lineNum":"   81","line":"stfw gen-encrypt-key --force","class":"lineCov","hits":"1","order":"37",},
{"lineNum":"   82","line":"retcode=$?","class":"lineCov","hits":"1","order":"38",},
{"lineNum":"   83","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"39",},
{"lineNum":"   84","line":""},
{"lineNum":"   85","line":""},
{"lineNum":"   86","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   87","line":"# STEP: encrypt passwd"},
{"lineNum":"   88","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   89","line":"STEP=\"encrypt passwd\"","class":"lineCov","hits":"1","order":"40",},
{"lineNum":"   90","line":"echo \"  ${STEP}\"","class":"lineCov","hits":"1","order":"41",},
{"lineNum":"   91","line":""},
{"lineNum":"   92","line":"stfw passwd \"127.0.0.1\" \"some_user\" \"password1\"","class":"lineCov","hits":"1","order":"42",},
{"lineNum":"   93","line":"retcode=$?","class":"lineCov","hits":"1","order":"43",},
{"lineNum":"   94","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"44",},
{"lineNum":"   95","line":""},
{"lineNum":"   96","line":"stfw passwd --force \"127.0.0.1\" \"some_user\" \"password2\"","class":"lineCov","hits":"1","order":"45",},
{"lineNum":"   97","line":"retcode=$?","class":"lineCov","hits":"1","order":"46",},
{"lineNum":"   98","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"47",},
{"lineNum":"   99","line":""},
{"lineNum":"  100","line":"stfw passwd --show \"127.0.0.1\" \"some_user\"","class":"lineCov","hits":"1","order":"48",},
{"lineNum":"  101","line":"retcode=$?","class":"lineCov","hits":"1","order":"49",},
{"lineNum":"  102","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"50",},
{"lineNum":"  103","line":""},
{"lineNum":"  104","line":""},
{"lineNum":"  105","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  106","line":"# STEP: inventry"},
{"lineNum":"  107","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  108","line":"STEP=\"inventry\"","class":"lineCov","hits":"1","order":"51",},
{"lineNum":"  109","line":"echo \"  ${STEP}\"","class":"lineCov","hits":"1","order":"52",},
{"lineNum":"  110","line":""},
{"lineNum":"  111","line":"stfw inventry --list","class":"lineCov","hits":"1","order":"53",},
{"lineNum":"  112","line":"retcode=$?","class":"lineCov","hits":"1","order":"54",},
{"lineNum":"  113","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"55",},
{"lineNum":"  114","line":""},
{"lineNum":"  115","line":"hosts=$(stfw inventry --list ap)","class":"lineCov","hits":"1","order":"56",},
{"lineNum":"  116","line":"if [[ \"${hosts}\" != \"127.0.0.1\" ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"57",},
{"lineNum":"  117","line":""},
{"lineNum":"  118","line":"hosts=$(stfw inventry --list NOTEXIST)","class":"lineCov","hits":"1","order":"58",},
{"lineNum":"  119","line":"if [[ \"${hosts}\" != \"\" ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"59",},
{"lineNum":"  120","line":""},
{"lineNum":"  121","line":"is_exist=$(stfw inventry --is-exist ap)","class":"lineCov","hits":"1","order":"60",},
{"lineNum":"  122","line":"if [[ \"${is_exist}\" != \"true\" ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"61",},
{"lineNum":"  123","line":""},
{"lineNum":"  124","line":"is_exist=$(stfw inventry --is-exist NOTEXIST)","class":"lineCov","hits":"1","order":"62",},
{"lineNum":"  125","line":"if [[ \"${is_exist}\" != \"false\" ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"63",},
{"lineNum":"  126","line":""},
{"lineNum":"  127","line":""},
{"lineNum":"  128","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  129","line":"# STEP: create scenario"},
{"lineNum":"  130","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  131","line":"STEP=\"create scenario\"","class":"lineCov","hits":"1","order":"64",},
{"lineNum":"  132","line":"echo \"  ${STEP}\"","class":"lineCov","hits":"1","order":"65",},
{"lineNum":"  133","line":""},
{"lineNum":"  134","line":"# scenario init"},
{"lineNum":"  135","line":"cd \"${DIR_TEST_PROJ}/scenario\"","class":"lineCov","hits":"1","order":"66",},
{"lineNum":"  136","line":"stfw scenario -i test","class":"lineCov","hits":"1","order":"67",},
{"lineNum":"  137","line":"retcode=$?","class":"lineCov","hits":"1","order":"68",},
{"lineNum":"  138","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"69",},
{"lineNum":"  139","line":""},
{"lineNum":"  140","line":"# bizdate init (day1)"},
{"lineNum":"  141","line":"cd \"${DIR_TEST_PROJ}/scenario/test\"","class":"lineCov","hits":"1","order":"70",},
{"lineNum":"  142","line":"stfw bizdate -i 10 99990101","class":"lineCov","hits":"1","order":"71",},
{"lineNum":"  143","line":"retcode=$?","class":"lineCov","hits":"1","order":"72",},
{"lineNum":"  144","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"73",},
{"lineNum":"  145","line":""},
{"lineNum":"  146","line":"# process-scripts init"},
{"lineNum":"  147","line":"cd \"${DIR_TEST_PROJ}/scenario/test/_10_99990101\"","class":"lineCov","hits":"1","order":"74",},
{"lineNum":"  148","line":"stfw process -i 10 pre scripts","class":"lineCov","hits":"1","order":"75",},
{"lineNum":"  149","line":"retcode=$?","class":"lineCov","hits":"1","order":"76",},
{"lineNum":"  150","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"77",},
{"lineNum":"  151","line":""},
{"lineNum":"  152","line":"# bizdate init (day2)"},
{"lineNum":"  153","line":"cd \"${DIR_TEST_PROJ}/scenario/test\"","class":"lineCov","hits":"1","order":"78",},
{"lineNum":"  154","line":"stfw bizdate -i 20 99990102","class":"lineCov","hits":"1","order":"79",},
{"lineNum":"  155","line":"retcode=$?","class":"lineCov","hits":"1","order":"80",},
{"lineNum":"  156","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"81",},
{"lineNum":"  157","line":""},
{"lineNum":"  158","line":"# process-scripts init"},
{"lineNum":"  159","line":"cd \"${DIR_TEST_PROJ}/scenario/test/_20_99990102\"","class":"lineCov","hits":"1","order":"82",},
{"lineNum":"  160","line":"stfw process -i 10 pre scripts","class":"lineCov","hits":"1","order":"83",},
{"lineNum":"  161","line":"retcode=$?","class":"lineCov","hits":"1","order":"84",},
{"lineNum":"  162","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"85",},
{"lineNum":"  163","line":""},
{"lineNum":"  164","line":"# scenario gen-dig"},
{"lineNum":"  165","line":"cd \"${DIR_TEST_PROJ}/scenario/test\"","class":"lineCov","hits":"1","order":"86",},
{"lineNum":"  166","line":"stfw scenario -G","class":"lineCov","hits":"1","order":"87",},
{"lineNum":"  167","line":"retcode=$?","class":"lineCov","hits":"1","order":"88",},
{"lineNum":"  168","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"89",},
{"lineNum":"  169","line":""},
{"lineNum":"  170","line":""},
{"lineNum":"  171","line":"#------------------------------------------------------------------------------"},
{"lineNum":"  172","line":"# ciの場合、webhook設定をON"},
{"lineNum":"  173","line":"#------------------------------------------------------------------------------"},
{"lineNum":"  174","line":"if [[ \"${TRAVIS}\" = \"true\" ]]; then","class":"lineCov","hits":"1","order":"90",},
{"lineNum":"  175","line":"  path_proj_config=\"${DIR_TEST_PROJ}/stfw.yml\"","class":"lineNoCov","hits":"0",},
{"lineNum":"  176","line":"  cp \"${path_proj_config}\" \"${path_proj_config}.tmp\"","class":"lineNoCov","hits":"0",},
{"lineNum":"  177","line":""},
{"lineNum":"  178","line":"  cat \"${path_proj_config}.tmp\"                                                                    |","class":"lineNoCov","hits":"0",},
{"lineNum":"  179","line":"  sed -e \'s|^#      - https://webhook.site|      - https://webhook.site|\'                          |","class":"lineNoCov","hits":"0",},
{"lineNum":"  180","line":"  tee >\"${path_proj_config}\"","class":"lineNoCov","hits":"0",},
{"lineNum":"  181","line":""},
{"lineNum":"  182","line":"  rm -f \"${path_proj_config}.tmp\"","class":"lineNoCov","hits":"0",},
{"lineNum":"  183","line":"fi"},
{"lineNum":"  184","line":""},
{"lineNum":"  185","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  186","line":"# STEP: run scenario"},
{"lineNum":"  187","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  188","line":"STEP=\"run scenario\"","class":"lineCov","hits":"1","order":"91",},
{"lineNum":"  189","line":"echo \"  ${STEP}\"","class":"lineCov","hits":"1","order":"92",},
{"lineNum":"  190","line":""},
{"lineNum":"  191","line":"# server start"},
{"lineNum":"  192","line":"stfw server start","class":"lineCov","hits":"1","order":"93",},
{"lineNum":"  193","line":"retcode=$?","class":"lineCov","hits":"1","order":"94",},
{"lineNum":"  194","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"95",},
{"lineNum":"  195","line":""},
{"lineNum":"  196","line":"stfw server status","class":"lineCov","hits":"1","order":"96",},
{"lineNum":"  197","line":"retcode=$?","class":"lineCov","hits":"1","order":"97",},
{"lineNum":"  198","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"98",},
{"lineNum":"  199","line":""},
{"lineNum":"  200","line":"# run scenario"},
{"lineNum":"  201","line":"stfw run -f test","class":"lineCov","hits":"1","order":"99",},
{"lineNum":"  202","line":"retcode=$?","class":"lineCov","hits":"1","order":"100",},
{"lineNum":"  203","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"101",},
{"lineNum":"  204","line":""},
{"lineNum":"  205","line":"# server stop"},
{"lineNum":"  206","line":"stfw server stop","class":"lineCov","hits":"1","order":"102",},
{"lineNum":"  207","line":"retcode=$?","class":"lineCov","hits":"1","order":"103",},
{"lineNum":"  208","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"104",},
{"lineNum":"  209","line":""},
{"lineNum":"  210","line":"stfw server status","class":"lineCov","hits":"1","order":"105",},
{"lineNum":"  211","line":"retcode=$?","class":"lineCov","hits":"1","order":"106",},
{"lineNum":"  212","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"107",},
{"lineNum":"  213","line":""},
{"lineNum":"  214","line":""},
{"lineNum":"  215","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  216","line":"# teardown"},
{"lineNum":"  217","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  218","line":"if [[ -d \"${DIR_TEST_WORK}\" ]]; then rm -fr \"${DIR_TEST_WORK}\"; fi","class":"lineCov","hits":"1","order":"108",},
{"lineNum":"  219","line":""},
{"lineNum":"  220","line":"echo \"$(basename $0) success.\"","class":"lineCov","hits":"1","order":"109",},
{"lineNum":"  221","line":"exit 0","class":"lineCov","hits":"1","order":"110",},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "integration_test.sh", "date" : "2018-02-01 19:13:29", "instrumented" : 120, "covered" : 110,};
var merged_data = [];

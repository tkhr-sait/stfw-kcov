var data = {lines:[
{"lineNum":"    1","line":"#!/bin/bash"},
{"lineNum":"    2","line":"#set -eux"},
{"lineNum":"    3","line":"#==================================================================================================="},
{"lineNum":"    4","line":"#"},
{"lineNum":"    5","line":"# Integration-Test - Distribution package"},
{"lineNum":"    6","line":"#"},
{"lineNum":"    7","line":"#==================================================================================================="},
{"lineNum":"    8","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"    9","line":"# env"},
{"lineNum":"   10","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   11","line":"dir_script=\"$(dirname $0)\"","class":"lineCov","hits":"1","order":"1",},
{"lineNum":"   12","line":"cd \"$(cd ${dir_script}; cd ../..; pwd)\" || exit 1","class":"lineCov","hits":"1","order":"2",},
{"lineNum":"   13","line":""},
{"lineNum":"   14","line":"readonly DIR_BASE=\"$(pwd)\"","class":"lineCov","hits":"1","order":"3",},
{"lineNum":"   15","line":". \"${DIR_BASE}/build/env.properties\"","class":"lineCov","hits":"1","order":"4",},
{"lineNum":"   16","line":""},
{"lineNum":"   17","line":"#shunit2"},
{"lineNum":"   18","line":"\"${DIR_BASE}/build/product/equality_test.sh\"","class":"lineCov","hits":"1","order":"20",},
{"lineNum":"   19","line":""},
{"lineNum":"   20","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   21","line":"# check"},
{"lineNum":"   22","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   23","line":"if [[ $# -ne 1 ]]; then","class":"lineCov","hits":"1","order":"21",},
{"lineNum":"   24","line":"  echo \"$0 PATH_ARCHIVE\" >&2","class":"lineNoCov","hits":"0",},
{"lineNum":"   25","line":"  exit 1","class":"lineNoCov","hits":"0",},
{"lineNum":"   26","line":"fi"},
{"lineNum":"   27","line":""},
{"lineNum":"   28","line":"path_archive=\"$1\"","class":"lineCov","hits":"1","order":"22",},
{"lineNum":"   29","line":"if [[ ! -f \"${path_archive}\" ]]; then","class":"lineCov","hits":"1","order":"23",},
{"lineNum":"   30","line":"  echo \"${path_archive} is not exist\" >&2","class":"lineNoCov","hits":"0",},
{"lineNum":"   31","line":"  exit 1","class":"lineNoCov","hits":"0",},
{"lineNum":"   32","line":"fi"},
{"lineNum":"   33","line":""},
{"lineNum":"   34","line":""},
{"lineNum":"   35","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   36","line":"# prepare"},
{"lineNum":"   37","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   38","line":"echo \"$(basename $0)\"","class":"lineCov","hits":"1","order":"24",},
{"lineNum":"   39","line":""},
{"lineNum":"   40","line":"echo \"  prepare\"","class":"lineCov","hits":"1","order":"25",},
{"lineNum":"   41","line":"DIR_TEST_WORK=\"${DIR_DIST}/test\"","class":"lineCov","hits":"1","order":"26",},
{"lineNum":"   42","line":"if [[ -d \"${DIR_TEST_WORK}\" ]]; then rm -fr \"${DIR_TEST_WORK}\"; fi","class":"lineCov","hits":"1","order":"27",},
{"lineNum":"   43","line":"mkdir -p \"${DIR_TEST_WORK}\"","class":"lineCov","hits":"1","order":"28",},
{"lineNum":"   44","line":""},
{"lineNum":"   45","line":"DIR_TEST_HOME=\"${DIR_TEST_WORK}/stfw\"","class":"lineCov","hits":"1","order":"29",},
{"lineNum":"   46","line":"DIR_TEST_PROJ=\"${DIR_TEST_WORK}/proj\"","class":"lineCov","hits":"1","order":"30",},
{"lineNum":"   47","line":""},
{"lineNum":"   48","line":"# 配布アーカイブ展開"},
{"lineNum":"   49","line":"echo \"    extract package\"","class":"lineCov","hits":"1","order":"31",},
{"lineNum":"   50","line":"if [[ -d \"${DIR_TEST_HOME}\" ]]; then rm -fr \"${DIR_TEST_HOME}\"; fi","class":"lineCov","hits":"1","order":"32",},
{"lineNum":"   51","line":"mkdir -p \"${DIR_TEST_HOME}\"","class":"lineCov","hits":"1","order":"33",},
{"lineNum":"   52","line":"cd \"${DIR_TEST_HOME}\"","class":"lineCov","hits":"1","order":"34",},
{"lineNum":"   53","line":"tar xzf \"${path_archive}\"","class":"lineCov","hits":"1","order":"35",},
{"lineNum":"   54","line":"mv ./stfw-*/* .","class":"lineCov","hits":"1","order":"36",},
{"lineNum":"   55","line":"rm -fr ./stfw-*","class":"lineCov","hits":"1","order":"37",},
{"lineNum":"   56","line":""},
{"lineNum":"   57","line":"# install"},
{"lineNum":"   58","line":"echo \"    install\"","class":"lineCov","hits":"1","order":"38",},
{"lineNum":"   59","line":"\"${DIR_TEST_HOME}/bin/install\"","class":"lineCov","hits":"1","order":"39",},
{"lineNum":"   60","line":""},
{"lineNum":"   61","line":"# PATH追加"},
{"lineNum":"   62","line":"echo \"    add path\"","class":"lineCov","hits":"1","order":"577",},
{"lineNum":"   63","line":"export PATH=\"${DIR_TEST_HOME}/bin:${PATH}\"","class":"lineCov","hits":"1","order":"578",},
{"lineNum":"   64","line":""},
{"lineNum":"   65","line":""},
{"lineNum":"   66","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   67","line":"# STEP: project init"},
{"lineNum":"   68","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   69","line":"STEP=\"project init\"","class":"lineCov","hits":"1","order":"579",},
{"lineNum":"   70","line":"echo \"  ${STEP}\"","class":"lineCov","hits":"1","order":"580",},
{"lineNum":"   71","line":""},
{"lineNum":"   72","line":"if [[ -d \"${DIR_TEST_PROJ}\" ]]; then rm -fr \"${DIR_TEST_PROJ}\"; fi","class":"lineCov","hits":"1","order":"581",},
{"lineNum":"   73","line":"mkdir -p \"${DIR_TEST_PROJ}\"","class":"lineCov","hits":"1","order":"582",},
{"lineNum":"   74","line":"cd \"${DIR_TEST_PROJ}\"","class":"lineCov","hits":"1","order":"583",},
{"lineNum":"   75","line":"stfw init","class":"lineCov","hits":"1","order":"584",},
{"lineNum":"   76","line":"retcode=$?","class":"lineCov","hits":"1","order":"785",},
{"lineNum":"   77","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"786",},
{"lineNum":"   78","line":""},
{"lineNum":"   79","line":"stfw gen-encrypt-key","class":"lineCov","hits":"1","order":"787",},
{"lineNum":"   80","line":"retcode=$?","class":"lineCov","hits":"1","order":"814",},
{"lineNum":"   81","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"815",},
{"lineNum":"   82","line":""},
{"lineNum":"   83","line":"stfw gen-encrypt-key --force","class":"lineCov","hits":"1","order":"816",},
{"lineNum":"   84","line":"retcode=$?","class":"lineCov","hits":"1","order":"823",},
{"lineNum":"   85","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"824",},
{"lineNum":"   86","line":""},
{"lineNum":"   87","line":""},
{"lineNum":"   88","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   89","line":"# STEP: encrypt passwd"},
{"lineNum":"   90","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   91","line":"STEP=\"encrypt passwd\"","class":"lineCov","hits":"1","order":"825",},
{"lineNum":"   92","line":"echo \"  ${STEP}\"","class":"lineCov","hits":"1","order":"826",},
{"lineNum":"   93","line":""},
{"lineNum":"   94","line":"stfw passwd \"127.0.0.1\" \"some_user\" \"password1\"","class":"lineCov","hits":"1","order":"827",},
{"lineNum":"   95","line":"retcode=$?","class":"lineCov","hits":"1","order":"886",},
{"lineNum":"   96","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"887",},
{"lineNum":"   97","line":""},
{"lineNum":"   98","line":"stfw passwd --force \"127.0.0.1\" \"some_user\" \"password2\"","class":"lineCov","hits":"1","order":"888",},
{"lineNum":"   99","line":"retcode=$?","class":"lineCov","hits":"1","order":"895",},
{"lineNum":"  100","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"896",},
{"lineNum":"  101","line":""},
{"lineNum":"  102","line":"stfw passwd --show \"127.0.0.1\" \"some_user\"","class":"lineCov","hits":"1","order":"897",},
{"lineNum":"  103","line":"retcode=$?","class":"lineCov","hits":"1","order":"904",},
{"lineNum":"  104","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"905",},
{"lineNum":"  105","line":""},
{"lineNum":"  106","line":""},
{"lineNum":"  107","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  108","line":"# STEP: inventry"},
{"lineNum":"  109","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  110","line":"STEP=\"inventry\"","class":"lineCov","hits":"1","order":"906",},
{"lineNum":"  111","line":"echo \"  ${STEP}\"","class":"lineCov","hits":"1","order":"907",},
{"lineNum":"  112","line":""},
{"lineNum":"  113","line":"stfw inventry --list","class":"lineCov","hits":"1","order":"908",},
{"lineNum":"  114","line":"retcode=$?","class":"lineCov","hits":"1","order":"984",},
{"lineNum":"  115","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"985",},
{"lineNum":"  116","line":""},
{"lineNum":"  117","line":"hosts=$(stfw inventry --list ap)","class":"lineCov","hits":"1","order":"986",},
{"lineNum":"  118","line":"if [[ \"${hosts}\" != \"127.0.0.1\" ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"993",},
{"lineNum":"  119","line":""},
{"lineNum":"  120","line":"hosts=$(stfw inventry --list NOTEXIST)","class":"lineCov","hits":"1","order":"994",},
{"lineNum":"  121","line":"if [[ \"${hosts}\" != \"\" ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"1001",},
{"lineNum":"  122","line":""},
{"lineNum":"  123","line":"is_exist=$(stfw inventry --is-exist ap)","class":"lineCov","hits":"1","order":"1002",},
{"lineNum":"  124","line":"if [[ \"${is_exist}\" != \"true\" ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"1009",},
{"lineNum":"  125","line":""},
{"lineNum":"  126","line":"is_exist=$(stfw inventry --is-exist NOTEXIST)","class":"lineCov","hits":"1","order":"1010",},
{"lineNum":"  127","line":"if [[ \"${is_exist}\" != \"false\" ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"1017",},
{"lineNum":"  128","line":""},
{"lineNum":"  129","line":""},
{"lineNum":"  130","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  131","line":"# STEP: create scenario"},
{"lineNum":"  132","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  133","line":"STEP=\"create scenario\"","class":"lineCov","hits":"1","order":"1018",},
{"lineNum":"  134","line":"echo \"  ${STEP}\"","class":"lineCov","hits":"1","order":"1019",},
{"lineNum":"  135","line":""},
{"lineNum":"  136","line":"# scenario init"},
{"lineNum":"  137","line":"cd \"${DIR_TEST_PROJ}/scenario\"","class":"lineCov","hits":"1","order":"1020",},
{"lineNum":"  138","line":"stfw scenario -i test","class":"lineCov","hits":"1","order":"1021",},
{"lineNum":"  139","line":"retcode=$?","class":"lineCov","hits":"1","order":"1086",},
{"lineNum":"  140","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"1087",},
{"lineNum":"  141","line":""},
{"lineNum":"  142","line":"# bizdate init (day1)"},
{"lineNum":"  143","line":"cd \"${DIR_TEST_PROJ}/scenario/test\"","class":"lineCov","hits":"1","order":"1088",},
{"lineNum":"  144","line":"stfw bizdate -i 10 99990101","class":"lineCov","hits":"1","order":"1089",},
{"lineNum":"  145","line":"retcode=$?","class":"lineCov","hits":"1","order":"1144",},
{"lineNum":"  146","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"1145",},
{"lineNum":"  147","line":""},
{"lineNum":"  148","line":"# process-scripts init"},
{"lineNum":"  149","line":"cd \"${DIR_TEST_PROJ}/scenario/test/_10_99990101\"","class":"lineCov","hits":"1","order":"1146",},
{"lineNum":"  150","line":"stfw process -i 10 pre scripts","class":"lineCov","hits":"1","order":"1147",},
{"lineNum":"  151","line":"retcode=$?","class":"lineCov","hits":"1","order":"1215",},
{"lineNum":"  152","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"1216",},
{"lineNum":"  153","line":""},
{"lineNum":"  154","line":"# bizdate init (day2)"},
{"lineNum":"  155","line":"cd \"${DIR_TEST_PROJ}/scenario/test\"","class":"lineCov","hits":"1","order":"1217",},
{"lineNum":"  156","line":"stfw bizdate -i 20 99990102","class":"lineCov","hits":"1","order":"1218",},
{"lineNum":"  157","line":"retcode=$?","class":"lineCov","hits":"1","order":"1225",},
{"lineNum":"  158","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"1226",},
{"lineNum":"  159","line":""},
{"lineNum":"  160","line":"# process-scripts init"},
{"lineNum":"  161","line":"cd \"${DIR_TEST_PROJ}/scenario/test/_20_99990102\"","class":"lineCov","hits":"1","order":"1227",},
{"lineNum":"  162","line":"stfw process -i 10 pre scripts","class":"lineCov","hits":"1","order":"1228",},
{"lineNum":"  163","line":"retcode=$?","class":"lineCov","hits":"1","order":"1236",},
{"lineNum":"  164","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"1237",},
{"lineNum":"  165","line":""},
{"lineNum":"  166","line":"# scenario gen-dig"},
{"lineNum":"  167","line":"cd \"${DIR_TEST_PROJ}/scenario/test\"","class":"lineCov","hits":"1","order":"1238",},
{"lineNum":"  168","line":"stfw scenario -G","class":"lineCov","hits":"1","order":"1239",},
{"lineNum":"  169","line":"retcode=$?","class":"lineCov","hits":"1","order":"1246",},
{"lineNum":"  170","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"1247",},
{"lineNum":"  171","line":""},
{"lineNum":"  172","line":""},
{"lineNum":"  173","line":"#------------------------------------------------------------------------------"},
{"lineNum":"  174","line":"# ciの場合、webhook設定をON"},
{"lineNum":"  175","line":"#------------------------------------------------------------------------------"},
{"lineNum":"  176","line":"if [[ \"${TRAVIS}\" = \"true\" ]]; then","class":"lineCov","hits":"1","order":"1248",},
{"lineNum":"  177","line":"  path_proj_config=\"${DIR_TEST_PROJ}/stfw.yml\"","class":"lineNoCov","hits":"0",},
{"lineNum":"  178","line":"  cp \"${path_proj_config}\" \"${path_proj_config}.tmp\"","class":"lineNoCov","hits":"0",},
{"lineNum":"  179","line":""},
{"lineNum":"  180","line":"  cat \"${path_proj_config}.tmp\"                                                                    |","class":"lineNoCov","hits":"0",},
{"lineNum":"  181","line":"  sed -e \'s|^#      - https://webhook.site|      - https://webhook.site|\'                          |","class":"lineNoCov","hits":"0",},
{"lineNum":"  182","line":"  tee >\"${path_proj_config}\"","class":"lineNoCov","hits":"0",},
{"lineNum":"  183","line":""},
{"lineNum":"  184","line":"  rm -f \"${path_proj_config}.tmp\"","class":"lineNoCov","hits":"0",},
{"lineNum":"  185","line":"fi"},
{"lineNum":"  186","line":""},
{"lineNum":"  187","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  188","line":"# STEP: run scenario"},
{"lineNum":"  189","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  190","line":"STEP=\"run scenario\"","class":"lineCov","hits":"1","order":"1249",},
{"lineNum":"  191","line":"echo \"  ${STEP}\"","class":"lineCov","hits":"1","order":"1250",},
{"lineNum":"  192","line":""},
{"lineNum":"  193","line":"# server start"},
{"lineNum":"  194","line":"stfw server start","class":"lineCov","hits":"1","order":"1251",},
{"lineNum":"  195","line":"retcode=$?","class":"lineCov","hits":"1","order":"1412",},
{"lineNum":"  196","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"1413",},
{"lineNum":"  197","line":""},
{"lineNum":"  198","line":"# TODO get digdag pid"},
{"lineNum":"  199","line":"# javaプロセスに対するkcovは無理だった"},
{"lineNum":"  200","line":"#PID=$(ps -fe | grep dig | grep -v grep | head -n 1 | awk \'{print $2}\')"},
{"lineNum":"  201","line":"#kcov --pid ${PID} /source/dist/out2"},
{"lineNum":"  202","line":""},
{"lineNum":"  203","line":"stfw server status","class":"lineCov","hits":"1","order":"1414",},
{"lineNum":"  204","line":"retcode=$?","class":"lineCov","hits":"1","order":"1421",},
{"lineNum":"  205","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"1422",},
{"lineNum":"  206","line":""},
{"lineNum":"  207","line":"# run scenario"},
{"lineNum":"  208","line":"stfw run -f test","class":"lineCov","hits":"1","order":"1423",},
{"lineNum":"  209","line":"retcode=$?","class":"lineCov","hits":"1","order":"1586",},
{"lineNum":"  210","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"1587",},
{"lineNum":"  211","line":""},
{"lineNum":"  212","line":"# server stop"},
{"lineNum":"  213","line":"stfw server stop","class":"lineCov","hits":"1","order":"1588",},
{"lineNum":"  214","line":"retcode=$?","class":"lineCov","hits":"1","order":"1589",},
{"lineNum":"  215","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"1590",},
{"lineNum":"  216","line":""},
{"lineNum":"  217","line":"stfw server status","class":"lineCov","hits":"1","order":"1591",},
{"lineNum":"  218","line":"retcode=$?","class":"lineCov","hits":"1","order":"1598",},
{"lineNum":"  219","line":"if [[ ${retcode} -ne 0 ]]; then echo \"    error occurred in ${STEP} step.\" >&2; exit 1; fi","class":"lineCov","hits":"1","order":"1599",},
{"lineNum":"  220","line":""},
{"lineNum":"  221","line":""},
{"lineNum":"  222","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  223","line":"# teardown"},
{"lineNum":"  224","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  225","line":"if [[ -d \"${DIR_TEST_WORK}\" ]]; then rm -fr \"${DIR_TEST_WORK}\"; fi","class":"lineCov","hits":"1","order":"1600",},
{"lineNum":"  226","line":""},
{"lineNum":"  227","line":"echo \"$(basename $0) success.\"","class":"lineCov","hits":"1","order":"1601",},
{"lineNum":"  228","line":"exit 0","class":"lineCov","hits":"1","order":"1602",},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "integration_test.sh", "date" : "2018-02-03 07:25:00", "instrumented" : 121, "covered" : 111,};
var merged_data = [];

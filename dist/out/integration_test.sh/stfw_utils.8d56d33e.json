var data = {lines:[
{"lineNum":"    1","line":"#!/bin/bash"},
{"lineNum":"    2","line":"#set -eux"},
{"lineNum":"    3","line":"#==================================================================================================="},
{"lineNum":"    4","line":"# stfw共通ユーティリティ"},
{"lineNum":"    5","line":"#"},
{"lineNum":"    6","line":"# 前提"},
{"lineNum":"    7","line":"#   ・システム設定を事前に読み込んでいること"},
{"lineNum":"    8","line":"#"},
{"lineNum":"    9","line":"# 定義リスト"},
{"lineNum":"   10","line":"#   stfw.apply_log_level"},
{"lineNum":"   11","line":"#   stfw.parse_log_level"},
{"lineNum":"   12","line":"#   stfw.get_plugin_path"},
{"lineNum":"   13","line":"#   stfw.get_passwd_path"},
{"lineNum":"   14","line":"#   stfw.show_passwd"},
{"lineNum":"   15","line":"#   stfw.list_files"},
{"lineNum":"   16","line":"#   stfw.bulk_exec_scripts"},
{"lineNum":"   17","line":"#   stfw.is_in_scenario-root-dir"},
{"lineNum":"   18","line":"#   stfw.is_in_scenario-dir"},
{"lineNum":"   19","line":"#   stfw.is_in_scenario-bizdate-dir"},
{"lineNum":"   20","line":"#   stfw.is_in_scenario-process-dir"},
{"lineNum":"   21","line":"#   stfw.process.list"},
{"lineNum":"   22","line":"#   stfw.process.get_path"},
{"lineNum":"   23","line":"#   stfw.process.is_installed"},
{"lineNum":"   24","line":"#   stfw.process.install"},
{"lineNum":"   25","line":"#   stfw.get_digdag_version"},
{"lineNum":"   26","line":"#   stfw.must_run_on_server"},
{"lineNum":"   27","line":"#   stfw.is_run_on_server"},
{"lineNum":"   28","line":"#   stfw.project_home"},
{"lineNum":"   29","line":"#   stfw.set_raw_params"},
{"lineNum":"   30","line":"#   stfw.get_raw_params"},
{"lineNum":"   31","line":"#   stfw.webhook.async_execute"},
{"lineNum":"   32","line":"#"},
{"lineNum":"   33","line":"#==================================================================================================="},
{"lineNum":"   34","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   35","line":"# ログレベル反映"},
{"lineNum":"   36","line":"#"},
{"lineNum":"   37","line":"# 概要"},
{"lineNum":"   38","line":"#   ログレベル名(error | warn | info | debug | tarace) に合わせて"},
{"lineNum":"   39","line":"#   logging_utilsの定数を環境変数に設定します。"},
{"lineNum":"   40","line":"#"},
{"lineNum":"   41","line":"# 引数"},
{"lineNum":"   42","line":"#   1: ログレベル名"},
{"lineNum":"   43","line":"#"},
{"lineNum":"   44","line":"# 出力"},
{"lineNum":"   45","line":"#   環境変数"},
{"lineNum":"   46","line":"#     LOGLEVEL"},
{"lineNum":"   47","line":"#   標準出力"},
{"lineNum":"   48","line":"#     なし"},
{"lineNum":"   49","line":"#   ファイル"},
{"lineNum":"   50","line":"#     なし"},
{"lineNum":"   51","line":"#"},
{"lineNum":"   52","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   53","line":"function stfw.apply_log_level() {"},
{"lineNum":"   54","line":"  case $1 in","class":"lineCov","hits":"29","order":"489","possible_hits":"0",},
{"lineNum":"   55","line":"    error)"},
{"lineNum":"   56","line":"      export LOGLEVEL=\"${LOGLEVEL_ERROR}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   57","line":"      ;;"},
{"lineNum":"   58","line":"    warn)"},
{"lineNum":"   59","line":"      export LOGLEVEL=\"${LOGLEVEL_WARN}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   60","line":"      ;;"},
{"lineNum":"   61","line":"    info)"},
{"lineNum":"   62","line":"      export LOGLEVEL=\"${LOGLEVEL_INFO}\"","class":"lineCov","hits":"44","order":"490","possible_hits":"0",},
{"lineNum":"   63","line":"      ;;"},
{"lineNum":"   64","line":"    debug)"},
{"lineNum":"   65","line":"      export LOGLEVEL=\"${LOGLEVEL_DEBUG}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   66","line":"      ;;"},
{"lineNum":"   67","line":"    trace)"},
{"lineNum":"   68","line":"      export LOGLEVEL=\"${LOGLEVEL_TRACE}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   69","line":"      ;;"},
{"lineNum":"   70","line":"  esac"},
{"lineNum":"   71","line":"}"},
{"lineNum":"   72","line":""},
{"lineNum":"   73","line":""},
{"lineNum":"   74","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   75","line":"# ログレベル定数 -> ログレベル名 の変換"},
{"lineNum":"   76","line":"#"},
{"lineNum":"   77","line":"# 概要"},
{"lineNum":"   78","line":"#   logging_utilsの定数から"},
{"lineNum":"   79","line":"#   ログレベル名(error | warn | info | debug | tarace) を返します。"},
{"lineNum":"   80","line":"#"},
{"lineNum":"   81","line":"# 引数"},
{"lineNum":"   82","line":"#   1: ログレベル定数"},
{"lineNum":"   83","line":"#"},
{"lineNum":"   84","line":"# 出力"},
{"lineNum":"   85","line":"#   環境変数"},
{"lineNum":"   86","line":"#     なし"},
{"lineNum":"   87","line":"#   標準出力"},
{"lineNum":"   88","line":"#     ログレベル名"},
{"lineNum":"   89","line":"#   ファイル"},
{"lineNum":"   90","line":"#     なし"},
{"lineNum":"   91","line":"#"},
{"lineNum":"   92","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   93","line":"function stfw.parse_log_level() {"},
{"lineNum":"   94","line":"  case $1 in","class":"lineCov","hits":"1","order":"1234","possible_hits":"0",},
{"lineNum":"   95","line":"    \"${LOGLEVEL_ERROR}\")"},
{"lineNum":"   96","line":"      echo \"error\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   97","line":"      ;;"},
{"lineNum":"   98","line":"    \"${LOGLEVEL_WARN}\")"},
{"lineNum":"   99","line":"      echo \"warn\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  100","line":"      ;;"},
{"lineNum":"  101","line":"    \"${LOGLEVEL_INFO}\")"},
{"lineNum":"  102","line":"      echo \"info\"","class":"lineCov","hits":"1","order":"1235","possible_hits":"0",},
{"lineNum":"  103","line":"      ;;"},
{"lineNum":"  104","line":"    \"${LOGLEVEL_DEBUG}\")"},
{"lineNum":"  105","line":"      echo \"debug\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  106","line":"      ;;"},
{"lineNum":"  107","line":"    \"${LOGLEVEL_TRACE}\")"},
{"lineNum":"  108","line":"      echo \"trace\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  109","line":"      ;;"},
{"lineNum":"  110","line":"  esac"},
{"lineNum":"  111","line":"}"},
{"lineNum":"  112","line":""},
{"lineNum":"  113","line":""},
{"lineNum":"  114","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  115","line":"# pluginディレクトリ取得"},
{"lineNum":"  116","line":"#"},
{"lineNum":"  117","line":"# 概要"},
{"lineNum":"  118","line":"#   プロジェクトpluginが存在する場合、そのパス"},
{"lineNum":"  119","line":"#   組み込みpluginが存在する場合、そのパス"},
{"lineNum":"  120","line":"#   pluginが存在しない場合、空文字 を返します。"},
{"lineNum":"  121","line":"#"},
{"lineNum":"  122","line":"# 引数"},
{"lineNum":"  123","line":"#   1: plugin名"},
{"lineNum":"  124","line":"#"},
{"lineNum":"  125","line":"# 出力"},
{"lineNum":"  126","line":"#   環境変数"},
{"lineNum":"  127","line":"#     なし"},
{"lineNum":"  128","line":"#   標準出力"},
{"lineNum":"  129","line":"#     pluginディレクトリ"},
{"lineNum":"  130","line":"#   ファイル"},
{"lineNum":"  131","line":"#     なし"},
{"lineNum":"  132","line":"#"},
{"lineNum":"  133","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  134","line":"function stfw.get_plugin_path() {"},
{"lineNum":"  135","line":"  local _plugin_name=\"$1\"","class":"lineCov","hits":"3","order":"378","possible_hits":"0",},
{"lineNum":"  136","line":""},
{"lineNum":"  137","line":"  log.func_start_trace \"$@\"","class":"lineCov","hits":"3","order":"379","possible_hits":"0",},
{"lineNum":"  138","line":"  local _retcode=${EXITCODE_SUCCESS}","class":"lineCov","hits":"3","order":"380","possible_hits":"0",},
{"lineNum":"  139","line":"  local _result=\"\"","class":"lineCov","hits":"3","order":"381","possible_hits":"0",},
{"lineNum":"  140","line":""},
{"lineNum":"  141","line":"  # プロジェクトplugin"},
{"lineNum":"  142","line":"  if [[ -d \"${STFW_PROJ_DIR_PLUGIN}/${_plugin_name}\" ]]; then","class":"lineCov","hits":"3","order":"382","possible_hits":"0",},
{"lineNum":"  143","line":"    _result=\"${STFW_PROJ_DIR_PLUGIN}/${_plugin_name}\"","class":"lineCov","hits":"1","order":"383","possible_hits":"0",},
{"lineNum":"  144","line":"  fi"},
{"lineNum":"  145","line":"  if [[ \"$(stfw.is_run_on_server)\" = \"true\" ]]; then","class":"lineCov","hits":"6","order":"384","possible_hits":"0",},
{"lineNum":"  146","line":"    # digdagでワークフロー実行中の場合、workspaceディレクトリになるので、実ディレクトリを明示"},
{"lineNum":"  147","line":"    local _real_proj_plugin_dir=\"${STFW_PROJ_DIR//\\/\\.stfw.*$/}/plugins/${_plugin_name}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  148","line":"    if [[ -d \"${_real_proj_plugin_dir}\" ]]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  149","line":"      _result=\"${_real_proj_plugin_dir}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  150","line":"    fi"},
{"lineNum":"  151","line":"  fi"},
{"lineNum":"  152","line":""},
{"lineNum":"  153","line":"  # 組み込みplugin"},
{"lineNum":"  154","line":"  if [[ -d \"${DIR_PLUGIN}/${_plugin_name}\" ]]; then","class":"lineCov","hits":"3","order":"390","possible_hits":"0",},
{"lineNum":"  155","line":"    _result=\"${DIR_PLUGIN}/${_plugin_name}\"","class":"lineCov","hits":"3","order":"391","possible_hits":"0",},
{"lineNum":"  156","line":"  fi"},
{"lineNum":"  157","line":""},
{"lineNum":"  158","line":"  if [[ \"${_result}x\" = \"x\" ]]; then","class":"lineCov","hits":"3","order":"392","possible_hits":"0",},
{"lineNum":"  159","line":"    log.warn \"${_plugin_name} is not exist.\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  160","line":"    _retcode=${EXITCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  161","line":"  else"},
{"lineNum":"  162","line":"    log.trace \"result: ${_result}\"","class":"lineCov","hits":"3","order":"393","possible_hits":"0",},
{"lineNum":"  163","line":"    echo \"${_result}\"","class":"lineCov","hits":"3","order":"394","possible_hits":"0",},
{"lineNum":"  164","line":"  fi"},
{"lineNum":"  165","line":""},
{"lineNum":"  166","line":"  log.func_end_trace ${_retcode}","class":"lineCov","hits":"3","order":"395","possible_hits":"0",},
{"lineNum":"  167","line":"  return ${_retcode}","class":"lineCov","hits":"3","order":"396","possible_hits":"0",},
{"lineNum":"  168","line":"}"},
{"lineNum":"  169","line":""},
{"lineNum":"  170","line":""},
{"lineNum":"  171","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  172","line":"# passwdファイルパス取得"},
{"lineNum":"  173","line":"#"},
{"lineNum":"  174","line":"# 概要"},
{"lineNum":"  175","line":"#   指定ホスト x ユーザ のpasswdファイルパスを返します。"},
{"lineNum":"  176","line":"#"},
{"lineNum":"  177","line":"# 引数"},
{"lineNum":"  178","line":"#   1: host"},
{"lineNum":"  179","line":"#   2: user"},
{"lineNum":"  180","line":"#"},
{"lineNum":"  181","line":"# 出力"},
{"lineNum":"  182","line":"#   環境変数"},
{"lineNum":"  183","line":"#     なし"},
{"lineNum":"  184","line":"#   標準出力"},
{"lineNum":"  185","line":"#     passwdファイルパス"},
{"lineNum":"  186","line":"#   ファイル"},
{"lineNum":"  187","line":"#     なし"},
{"lineNum":"  188","line":"#"},
{"lineNum":"  189","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  190","line":"function stfw.get_passwd_path() {"},
{"lineNum":"  191","line":"  local _host=\"$1\"","class":"lineCov","hits":"6","order":"677","possible_hits":"0",},
{"lineNum":"  192","line":"  local _user=\"$2\"","class":"lineCov","hits":"6","order":"678","possible_hits":"0",},
{"lineNum":"  193","line":""},
{"lineNum":"  194","line":"  local _dir_passwd=\"${STFW_PROJ_DIR_CONFIG}/passwd\"","class":"lineCov","hits":"6","order":"679","possible_hits":"0",},
{"lineNum":"  195","line":"  echo \"${_dir_passwd}/${_host//:/_}-${_user//:/_}\"","class":"lineCov","hits":"6","order":"680","possible_hits":"0",},
{"lineNum":"  196","line":""},
{"lineNum":"  197","line":"  return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"6","order":"681","possible_hits":"0",},
{"lineNum":"  198","line":"}"},
{"lineNum":"  199","line":""},
{"lineNum":"  200","line":""},
{"lineNum":"  201","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  202","line":"# password取得"},
{"lineNum":"  203","line":"#"},
{"lineNum":"  204","line":"# 概要"},
{"lineNum":"  205","line":"#   指定ホスト x ユーザ のpasswordを返します。"},
{"lineNum":"  206","line":"#"},
{"lineNum":"  207","line":"# 引数"},
{"lineNum":"  208","line":"#   1: host"},
{"lineNum":"  209","line":"#   2: user"},
{"lineNum":"  210","line":"#"},
{"lineNum":"  211","line":"# 出力"},
{"lineNum":"  212","line":"#   環境変数"},
{"lineNum":"  213","line":"#     なし"},
{"lineNum":"  214","line":"#   標準出力"},
{"lineNum":"  215","line":"#     password"},
{"lineNum":"  216","line":"#   ファイル"},
{"lineNum":"  217","line":"#     なし"},
{"lineNum":"  218","line":"#"},
{"lineNum":"  219","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  220","line":"function stfw.show_passwd() {"},
{"lineNum":"  221","line":"  local _host=\"$1\"","class":"lineCov","hits":"2","order":"726","possible_hits":"0",},
{"lineNum":"  222","line":"  local _user=\"$2\"","class":"lineCov","hits":"2","order":"727","possible_hits":"0",},
{"lineNum":"  223","line":""},
{"lineNum":"  224","line":"  local _path_passwd=\"$(stfw.get_passwd_path ${_host} ${_user})\"","class":"lineCov","hits":"4","order":"728","possible_hits":"0",},
{"lineNum":"  225","line":"  if [[ ! -f \"${_path_passwd}\" ]]; then","class":"lineCov","hits":"2","order":"729","possible_hits":"0",},
{"lineNum":"  226","line":"    log.error \"${_path_passwd} is not exist. host: ${_host}, user: ${_user}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  227","line":"    return ${EXITCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  228","line":"  fi"},
{"lineNum":"  229","line":""},
{"lineNum":"  230","line":"  _decrypt \"${PATH_DECRYPT_KEY}\" <\"${_path_passwd}\"","class":"lineCov","hits":"2","order":"730","possible_hits":"0",},
{"lineNum":"  231","line":"  local _retcode=$?","class":"lineCov","hits":"2","order":"737","possible_hits":"0",},
{"lineNum":"  232","line":""},
{"lineNum":"  233","line":"  return ${_retcode}","class":"lineCov","hits":"2","order":"738","possible_hits":"0",},
{"lineNum":"  234","line":"}"},
{"lineNum":"  235","line":""},
{"lineNum":"  236","line":""},
{"lineNum":"  237","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  238","line":"# 指定ディレクトリ直下のファイル名リスト"},
{"lineNum":"  239","line":"#"},
{"lineNum":"  240","line":"# 概要"},
{"lineNum":"  241","line":"#   指定ディレクトリ直下の全ファイル名を、文字列の昇順でソートしたリストを返します。"},
{"lineNum":"  242","line":"#"},
{"lineNum":"  243","line":"# 引数"},
{"lineNum":"  244","line":"#   1: スクリプト配置ディレクトリ"},
{"lineNum":"  245","line":"#"},
{"lineNum":"  246","line":"# 出力"},
{"lineNum":"  247","line":"#   環境変数"},
{"lineNum":"  248","line":"#     なし"},
{"lineNum":"  249","line":"#   標準出力"},
{"lineNum":"  250","line":"#     ファイル名リスト"},
{"lineNum":"  251","line":"#   ファイル"},
{"lineNum":"  252","line":"#     なし"},
{"lineNum":"  253","line":"#"},
{"lineNum":"  254","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  255","line":"function stfw.list_files() {"},
{"lineNum":"  256","line":"  log.func_start_trace \"$@\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  257","line":""},
{"lineNum":"  258","line":"  local _dir=\"$1\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  259","line":""},
{"lineNum":"  260","line":"  find \"${_dir}\" -mindepth 1 -maxdepth 1 -follow -type f                                           |","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  261","line":"  sed -e \"s|${_dir}/||\"                                                                            |","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  262","line":"  sort","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  263","line":""},
{"lineNum":"  264","line":"  log.func_end_trace ${EXITCODE_SUCCESS}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  265","line":"  return ${EXITCODE_SUCCESS}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  266","line":"}"},
{"lineNum":"  267","line":""},
{"lineNum":"  268","line":""},
{"lineNum":"  269","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  270","line":"# スクリプトの一括実行"},
{"lineNum":"  271","line":"#"},
{"lineNum":"  272","line":"# 概要"},
{"lineNum":"  273","line":"#   指定ディレクトリ直下の全てのファイルを、スクリプトとみなして一括実行します。"},
{"lineNum":"  274","line":"#   スクリプトから0以外のリターンコードが返された場合、後続は実行せずエラー終了します。"},
{"lineNum":"  275","line":"#"},
{"lineNum":"  276","line":"# 引数"},
{"lineNum":"  277","line":"#   1: スクリプト配置ディレクトリ"},
{"lineNum":"  278","line":"#"},
{"lineNum":"  279","line":"# リターンコード"},
{"lineNum":"  280","line":"#   ${EXITCODE_SUCCESS}: 正常終了した場合"},
{"lineNum":"  281","line":"#   ${EXITCODE_ERROR}  : エラー発生時"},
{"lineNum":"  282","line":"#"},
{"lineNum":"  283","line":"# 出力"},
{"lineNum":"  284","line":"#   環境変数"},
{"lineNum":"  285","line":"#     なし"},
{"lineNum":"  286","line":"#   標準出力"},
{"lineNum":"  287","line":"#     スクリプトの標準出力&標準エラー"},
{"lineNum":"  288","line":"#   ファイル"},
{"lineNum":"  289","line":"#     なし"},
{"lineNum":"  290","line":"#"},
{"lineNum":"  291","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  292","line":"function stfw.bulk_exec_scripts() {"},
{"lineNum":"  293","line":"  log.func_start_trace \"$@\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  294","line":""},
{"lineNum":"  295","line":"  local _dir=\"$1\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  296","line":"  local _before_dir=\"$(pwd)\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  297","line":""},
{"lineNum":"  298","line":"  log.trace \"cd \\\"${_dir}\\\"\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  299","line":"  cd \"${_dir}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  300","line":""},
{"lineNum":"  301","line":"  local _before_IFS=\"$IFS\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  302","line":"  IFS=$\'\\n\'","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  303","line":"  for _cur_file in $(stfw.list_files .); do","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  304","line":"    local _exitcode=${EXITCODE_SUCCESS}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  305","line":"    local _cur_retcode=${EXITCODE_SUCCESS}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  306","line":""},
{"lineNum":"  307","line":"    local _sect_name=\"${_dir}/${_cur_file}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  308","line":"    log.sect_start_info \"${_sect_name}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  309","line":"    ./${_cur_file}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  310","line":"    _cur_retcode=$?","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  311","line":"    log.sect_end_info \"${_sect_name}\" \"${_cur_retcode}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  312","line":""},
{"lineNum":"  313","line":"    if [[ ${_cur_retcode} -ne ${EXITCODE_SUCCESS} ]]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  314","line":"      _exitcode=${EXITCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  315","line":"      break","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  316","line":"    fi"},
{"lineNum":"  317","line":""},
{"lineNum":"  318","line":"  done"},
{"lineNum":"  319","line":"  IFS=\"${_before_IFS}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  320","line":""},
{"lineNum":"  321","line":"  log.trace \"cd \\\"${_before_dir}\\\"\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  322","line":"  cd \"${_before_dir}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  323","line":""},
{"lineNum":"  324","line":"  log.func_end_trace ${_exitcode}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  325","line":"  return ${_exitcode}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  326","line":"}"},
{"lineNum":"  327","line":""},
{"lineNum":"  328","line":""},
{"lineNum":"  329","line":"function stfw.is_in_scenario-root-dir() {"},
{"lineNum":"  330","line":"  local _check_scenario_root_dirname=$(basename \"$(pwd)\")","class":"lineCov","hits":"3","order":"891","possible_hits":"0",},
{"lineNum":"  331","line":"  local _check_file=\"../${FILENAME_SYSTEM_CONFIG}\"","class":"lineCov","hits":"1","order":"892","possible_hits":"0",},
{"lineNum":"  332","line":"  if [[ \"${_check_scenario_root_dirname}\" = \"scenario\" ]] && [[ -f ${_check_file} ]]; then","class":"lineCov","hits":"2","order":"893","possible_hits":"0",},
{"lineNum":"  333","line":"    echo \"true\"","class":"lineCov","hits":"1","order":"894","possible_hits":"0",},
{"lineNum":"  334","line":"  else"},
{"lineNum":"  335","line":"    echo \"false\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  336","line":"  fi"},
{"lineNum":"  337","line":"  return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"1","order":"895","possible_hits":"0",},
{"lineNum":"  338","line":"}"},
{"lineNum":"  339","line":"function stfw.is_in_scenario-dir() {"},
{"lineNum":"  340","line":"  local _check_scenario_root_dirname=$(basename \"$(cd ..; pwd)\")","class":"lineCov","hits":"12","order":"995","possible_hits":"0",},
{"lineNum":"  341","line":"  local _check_file=\"../../${FILENAME_SYSTEM_CONFIG}\"","class":"lineCov","hits":"3","order":"996","possible_hits":"0",},
{"lineNum":"  342","line":"  if [[ \"${_check_scenario_root_dirname}\" = \"scenario\" ]] && [[ -f ${_check_file} ]]; then","class":"lineCov","hits":"6","order":"997","possible_hits":"0",},
{"lineNum":"  343","line":"    echo \"true\"","class":"lineCov","hits":"3","order":"998","possible_hits":"0",},
{"lineNum":"  344","line":"  else"},
{"lineNum":"  345","line":"    echo \"false\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  346","line":"  fi"},
{"lineNum":"  347","line":"  return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"3","order":"999","possible_hits":"0",},
{"lineNum":"  348","line":"}"},
{"lineNum":"  349","line":"function stfw.is_in_scenario-bizdate-dir() {"},
{"lineNum":"  350","line":"  local _check_scenario_root_dirname=$(basename \"$(cd ../..; pwd)\")","class":"lineCov","hits":"8","order":"1097","possible_hits":"0",},
{"lineNum":"  351","line":"  local _check_file=\"../../../${FILENAME_SYSTEM_CONFIG}\"","class":"lineCov","hits":"2","order":"1098","possible_hits":"0",},
{"lineNum":"  352","line":"  if [[ \"${_check_scenario_root_dirname}\" = \"scenario\" ]] && [[ -f ${_check_file} ]]; then","class":"lineCov","hits":"4","order":"1099","possible_hits":"0",},
{"lineNum":"  353","line":"    echo \"true\"","class":"lineCov","hits":"2","order":"1100","possible_hits":"0",},
{"lineNum":"  354","line":"  else"},
{"lineNum":"  355","line":"    echo \"false\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  356","line":"  fi"},
{"lineNum":"  357","line":"  return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"2","order":"1101","possible_hits":"0",},
{"lineNum":"  358","line":"}"},
{"lineNum":"  359","line":"function stfw.is_in_scenario-process-dir() {"},
{"lineNum":"  360","line":"  local _check_scenario_root_dirname=$(basename \"$(cd ../../..; pwd)\")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  361","line":"  local _check_file=\"../../../../${FILENAME_SYSTEM_CONFIG}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  362","line":"  if [[ \"${_check_scenario_root_dirname}\" = \"scenario\" ]] && [[ -f ${_check_file} ]]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  363","line":"    echo \"true\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  364","line":"  else"},
{"lineNum":"  365","line":"    echo \"false\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  366","line":"  fi"},
{"lineNum":"  367","line":"  return ${EXITCODE_SUCCESS}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  368","line":"}"},
{"lineNum":"  369","line":""},
{"lineNum":"  370","line":""},
{"lineNum":"  371","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  372","line":"# process一覧"},
{"lineNum":"  373","line":"#"},
{"lineNum":"  374","line":"# 概要"},
{"lineNum":"  375","line":"#   プロジェクト、STFW_HOMEに配置されたprocess名を一覧表示します。"},
{"lineNum":"  376","line":"#"},
{"lineNum":"  377","line":"# 引数"},
{"lineNum":"  378","line":"#   なし"},
{"lineNum":"  379","line":"#"},
{"lineNum":"  380","line":"# リターンコード"},
{"lineNum":"  381","line":"#   ${EXITCODE_SUCCESS}: 正常終了した場合"},
{"lineNum":"  382","line":"#   ${EXITCODE_ERROR}  : エラー発生時"},
{"lineNum":"  383","line":"#"},
{"lineNum":"  384","line":"# 出力"},
{"lineNum":"  385","line":"#   環境変数"},
{"lineNum":"  386","line":"#     なし"},
{"lineNum":"  387","line":"#   標準出力"},
{"lineNum":"  388","line":"#     process名"},
{"lineNum":"  389","line":"#   ファイル"},
{"lineNum":"  390","line":"#     なし"},
{"lineNum":"  391","line":"#"},
{"lineNum":"  392","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  393","line":"function stfw.process.list() {"},
{"lineNum":"  394","line":"  log.func_start_trace \"$@\"","class":"lineCov","hits":"2","order":"341","possible_hits":"0",},
{"lineNum":"  395","line":""},
{"lineNum":"  396","line":"  # 一時ファイル"},
{"lineNum":"  397","line":"  local _tmp_embed_list=\"/tmp/${FUNCNAME[0]}_$$_embed\"","class":"lineCov","hits":"2","order":"342","possible_hits":"0",},
{"lineNum":"  398","line":"  local _tmp_proj_list=\"/tmp/${FUNCNAME[0]}_$$_proj\"","class":"lineCov","hits":"2","order":"343","possible_hits":"0",},
{"lineNum":"  399","line":""},
{"lineNum":"  400","line":"  # 組込みpluginリスト作成"},
{"lineNum":"  401","line":"  local _target_dir=\"${DIR_PLUGIN}/process\"","class":"lineCov","hits":"2","order":"344","possible_hits":"0",},
{"lineNum":"  402","line":"  find \"${_target_dir}\" -mindepth 1 -maxdepth 1 -type d                                            | # 直下のディレクトリパスから","class":"lineCov","hits":"2","order":"345","possible_hits":"0",},
{"lineNum":"  403","line":"  sed -e \"s|${_target_dir}/||\"                                                                     | # ディレクトリ名に変換","class":"lineCov","hits":"2","order":"346","possible_hits":"0",},
{"lineNum":"  404","line":"  tee > \"${_tmp_embed_list}\"","class":"lineCov","hits":"2","order":"347","possible_hits":"0",},
{"lineNum":"  405","line":"  log.trace \"find \\\"${_target_dir}\\\" -mindepth 1 -maxdepth 1 -type d\"","class":"lineCov","hits":"2","order":"348","possible_hits":"0",},
{"lineNum":"  406","line":""},
{"lineNum":"  407","line":"  # プロジェクトpluginリスト作成"},
{"lineNum":"  408","line":"  local _target_dir=\"${STFW_PROJ_DIR_PLUGIN}/process\"","class":"lineCov","hits":"2","order":"357","possible_hits":"0",},
{"lineNum":"  409","line":"  touch \"${_tmp_proj_list}\"","class":"lineCov","hits":"2","order":"358","possible_hits":"0",},
{"lineNum":"  410","line":"  if [[ -d \"${_target_dir}\" ]]; then","class":"lineCov","hits":"2","order":"359","possible_hits":"0",},
{"lineNum":"  411","line":"    find \"${_target_dir}\" -mindepth 1 -maxdepth 1 -type d                                          | # 直下のディレクトリパスから","class":"lineCov","hits":"2","order":"360","possible_hits":"0",},
{"lineNum":"  412","line":"    sed -e \"s|${_target_dir}/||\"                                                                   | # ディレクトリ名に変換","class":"lineCov","hits":"2","order":"361","possible_hits":"0",},
{"lineNum":"  413","line":"    tee > \"${_tmp_proj_list}\"","class":"lineCov","hits":"2","order":"362","possible_hits":"0",},
{"lineNum":"  414","line":"    log.trace \"find \\\"${_target_dir}\\\" -mindepth 1 -maxdepth 1 -type d\"","class":"lineCov","hits":"2","order":"363","possible_hits":"0",},
{"lineNum":"  415","line":"  fi"},
{"lineNum":"  416","line":""},
{"lineNum":"  417","line":"  # 結果リスト表示"},
{"lineNum":"  418","line":"  cat \"${_tmp_embed_list}\" \"${_tmp_proj_list}\"                                                     | # 組込み + プロジェクト のリストから","class":"lineCov","hits":"2","order":"364","possible_hits":"0",},
{"lineNum":"  419","line":"  grep -v \"^_\"                                                                                     | # 共通処理を除外","class":"lineCov","hits":"2","order":"365","possible_hits":"0",},
{"lineNum":"  420","line":"  sort                                                                                             | # 一意に絞る","class":"lineCov","hits":"2","order":"366","possible_hits":"0",},
{"lineNum":"  421","line":"  uniq","class":"lineCov","hits":"2","order":"367","possible_hits":"0",},
{"lineNum":"  422","line":""},
{"lineNum":"  423","line":"  # 一時ファイルを削除"},
{"lineNum":"  424","line":"  rm -f \"${_tmp_embed_list}\"","class":"lineCov","hits":"2","order":"368","possible_hits":"0",},
{"lineNum":"  425","line":"  rm -f \"${_tmp_proj_list}\"","class":"lineCov","hits":"2","order":"369","possible_hits":"0",},
{"lineNum":"  426","line":""},
{"lineNum":"  427","line":"  log.func_end_trace ${EXITCODE_SUCCESS}","class":"lineCov","hits":"2","order":"370","possible_hits":"0",},
{"lineNum":"  428","line":"  return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"2","order":"371","possible_hits":"0",},
{"lineNum":"  429","line":"}"},
{"lineNum":"  430","line":""},
{"lineNum":"  431","line":""},
{"lineNum":"  432","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  433","line":"# process plugin配置ディレクトリ取得"},
{"lineNum":"  434","line":"#"},
{"lineNum":"  435","line":"# 概要"},
{"lineNum":"  436","line":"#   プロジェクト、STFW_HOMEいづれかに配置されたprocess pluginの内、利用可能なパスを表示します。"},
{"lineNum":"  437","line":"#"},
{"lineNum":"  438","line":"# 引数"},
{"lineNum":"  439","line":"#   1: process名"},
{"lineNum":"  440","line":"#"},
{"lineNum":"  441","line":"# リターンコード"},
{"lineNum":"  442","line":"#   ${EXITCODE_SUCCESS}: 正常終了した場合"},
{"lineNum":"  443","line":"#   ${EXITCODE_ERROR}  : エラー発生時"},
{"lineNum":"  444","line":"#"},
{"lineNum":"  445","line":"# 出力"},
{"lineNum":"  446","line":"#   環境変数"},
{"lineNum":"  447","line":"#     なし"},
{"lineNum":"  448","line":"#   標準出力"},
{"lineNum":"  449","line":"#     process plugin配置ディレクトリ: 存在する場合"},
{"lineNum":"  450","line":"#     空文字                        : 存在しない場合"},
{"lineNum":"  451","line":"#   ファイル"},
{"lineNum":"  452","line":"#     なし"},
{"lineNum":"  453","line":"#"},
{"lineNum":"  454","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  455","line":"function stfw.process.get_path() {"},
{"lineNum":"  456","line":"  log.func_start_trace \"$@\"","class":"lineCov","hits":"3","order":"375","possible_hits":"0",},
{"lineNum":"  457","line":""},
{"lineNum":"  458","line":"  local _retcode=${EXITCODE_SUCCESS}","class":"lineCov","hits":"3","order":"376","possible_hits":"0",},
{"lineNum":"  459","line":"  stfw.get_plugin_path \"process/$1\"","class":"lineCov","hits":"3","order":"377","possible_hits":"0",},
{"lineNum":"  460","line":"  _retcode=$?","class":"lineCov","hits":"3","order":"397","possible_hits":"0",},
{"lineNum":"  461","line":""},
{"lineNum":"  462","line":"  log.func_end_trace ${_retcode}","class":"lineCov","hits":"3","order":"398","possible_hits":"0",},
{"lineNum":"  463","line":"  return ${_retcode}","class":"lineCov","hits":"3","order":"399","possible_hits":"0",},
{"lineNum":"  464","line":"}"},
{"lineNum":"  465","line":""},
{"lineNum":"  466","line":""},
{"lineNum":"  467","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  468","line":"# process pluginインストール済み確認"},
{"lineNum":"  469","line":"#"},
{"lineNum":"  470","line":"# 概要"},
{"lineNum":"  471","line":"#   プロジェクト、STFW_HOMEいづれかに配置されたprocess pluginのis_installedスクリプトを実行します。"},
{"lineNum":"  472","line":"#"},
{"lineNum":"  473","line":"# 引数"},
{"lineNum":"  474","line":"#   1: process plugin path"},
{"lineNum":"  475","line":"#"},
{"lineNum":"  476","line":"# リターンコード"},
{"lineNum":"  477","line":"#   ${EXITCODE_SUCCESS}: インストール済みの場合"},
{"lineNum":"  478","line":"#   ${EXITCODE_ERROR}  : その他の場合"},
{"lineNum":"  479","line":"#"},
{"lineNum":"  480","line":"# 出力"},
{"lineNum":"  481","line":"#   環境変数"},
{"lineNum":"  482","line":"#     なし"},
{"lineNum":"  483","line":"#   標準出力"},
{"lineNum":"  484","line":"#     true : インストール済みの場合"},
{"lineNum":"  485","line":"#   ファイル"},
{"lineNum":"  486","line":"#     なし"},
{"lineNum":"  487","line":"#"},
{"lineNum":"  488","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  489","line":"function stfw.process.is_installed() {"},
{"lineNum":"  490","line":"  log.func_start_trace \"$@\"","class":"lineCov","hits":"1","order":"405","possible_hits":"0",},
{"lineNum":"  491","line":"  local _retcode=${EXITCODE_SUCCESS}","class":"lineCov","hits":"1","order":"406","possible_hits":"0",},
{"lineNum":"  492","line":""},
{"lineNum":"  493","line":"  local _plugin_path=\"$1\"","class":"lineCov","hits":"1","order":"407","possible_hits":"0",},
{"lineNum":"  494","line":""},
{"lineNum":"  495","line":"  if [[ ! -d \"${_plugin_path}\" ]]; then","class":"lineCov","hits":"1","order":"408","possible_hits":"0",},
{"lineNum":"  496","line":"    log.error \"process: ${_plugin_path} is not exist.\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  497","line":"    return ${EXITCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  498","line":"  fi"},
{"lineNum":"  499","line":""},
{"lineNum":"  500","line":"  \"${_plugin_path}/bin/install/is_installed\"","class":"lineCov","hits":"1","order":"409","possible_hits":"0",},
{"lineNum":"  501","line":"  _retcode=$?","class":"lineCov","hits":"1","order":"417","possible_hits":"0",},
{"lineNum":"  502","line":""},
{"lineNum":"  503","line":"  log.func_end_trace ${_retcode}","class":"lineCov","hits":"1","order":"418","possible_hits":"0",},
{"lineNum":"  504","line":"  return ${_retcode}","class":"lineCov","hits":"1","order":"419","possible_hits":"0",},
{"lineNum":"  505","line":"}"},
{"lineNum":"  506","line":""},
{"lineNum":"  507","line":""},
{"lineNum":"  508","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  509","line":"# process pluginインストール"},
{"lineNum":"  510","line":"#"},
{"lineNum":"  511","line":"# 概要"},
{"lineNum":"  512","line":"#   プロジェクト、STFW_HOMEいづれかに配置されたprocess pluginのinstallスクリプトを実行します。"},
{"lineNum":"  513","line":"#"},
{"lineNum":"  514","line":"# 引数"},
{"lineNum":"  515","line":"#   1: process plugin path"},
{"lineNum":"  516","line":"#"},
{"lineNum":"  517","line":"# リターンコード"},
{"lineNum":"  518","line":"#   ${EXITCODE_SUCCESS}: 正常終了した場合"},
{"lineNum":"  519","line":"#   ${EXITCODE_ERROR}  : エラー発生時"},
{"lineNum":"  520","line":"#"},
{"lineNum":"  521","line":"# 出力"},
{"lineNum":"  522","line":"#   環境変数"},
{"lineNum":"  523","line":"#     なし"},
{"lineNum":"  524","line":"#   標準出力"},
{"lineNum":"  525","line":"#     なし"},
{"lineNum":"  526","line":"#   ファイル"},
{"lineNum":"  527","line":"#     なし"},
{"lineNum":"  528","line":"#"},
{"lineNum":"  529","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  530","line":"function stfw.process.install() {"},
{"lineNum":"  531","line":"  log.func_start_trace \"$@\"","class":"lineCov","hits":"1","order":"401","possible_hits":"0",},
{"lineNum":"  532","line":"  local _retcode=${EXITCODE_SUCCESS}","class":"lineCov","hits":"1","order":"402","possible_hits":"0",},
{"lineNum":"  533","line":""},
{"lineNum":"  534","line":"  local _plugin_path=\"$1\"","class":"lineCov","hits":"1","order":"403","possible_hits":"0",},
{"lineNum":"  535","line":""},
{"lineNum":"  536","line":"  local _is_installed=$(stfw.process.is_installed \"${_plugin_path}\")","class":"lineCov","hits":"2","order":"404","possible_hits":"0",},
{"lineNum":"  537","line":"  if [[ \"${_is_installed}\" = \"true\" ]]; then","class":"lineCov","hits":"1","order":"420","possible_hits":"0",},
{"lineNum":"  538","line":"    log.info \"${_plugin_path} is already installed.\"","class":"lineCov","hits":"1","order":"421","possible_hits":"0",},
{"lineNum":"  539","line":"    return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"1","order":"422","possible_hits":"0",},
{"lineNum":"  540","line":"  fi"},
{"lineNum":"  541","line":""},
{"lineNum":"  542","line":"  \"${_plugin_path}/bin/install/install\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  543","line":"  _retcode=$?","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  544","line":""},
{"lineNum":"  545","line":"  log.func_end_trace ${_retcode}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  546","line":"  return ${_retcode}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  547","line":"}"},
{"lineNum":"  548","line":""},
{"lineNum":"  549","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  550","line":"# digdagバージョン取得"},
{"lineNum":"  551","line":"#"},
{"lineNum":"  552","line":"# 概要"},
{"lineNum":"  553","line":"#   digdagのバージョンを取得します。"},
{"lineNum":"  554","line":"#"},
{"lineNum":"  555","line":"# 引数"},
{"lineNum":"  556","line":"#   なし"},
{"lineNum":"  557","line":"#"},
{"lineNum":"  558","line":"# 出力"},
{"lineNum":"  559","line":"#   環境変数"},
{"lineNum":"  560","line":"#     なし"},
{"lineNum":"  561","line":"#   標準出力"},
{"lineNum":"  562","line":"#     digdagバージョン"},
{"lineNum":"  563","line":"#   ファイル"},
{"lineNum":"  564","line":"#     ${STFW_PROJ_DIR_DATA}/digdag_version"},
{"lineNum":"  565","line":"#"},
{"lineNum":"  566","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  567","line":"function stfw.get_digdag_version() {"},
{"lineNum":"  568","line":"  if [[ ! -f \"${STFW_PROJ_DIR_DATA}/digdag_version\" ]]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  569","line":"    ${PATH_DIGDAG} version 2> /dev/null | \\","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  570","line":"      grep Server | \\"},
{"lineNum":"  571","line":"      cut -d \' \' -f 3 > ${STFW_PROJ_DIR_DATA}/digdag_version"},
{"lineNum":"  572","line":"  fi"},
{"lineNum":"  573","line":"  cat ${STFW_PROJ_DIR_DATA}/digdag_version","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  574","line":"}"},
{"lineNum":"  575","line":""},
{"lineNum":"  576","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  577","line":"# シナリオ実行中チェック"},
{"lineNum":"  578","line":"#"},
{"lineNum":"  579","line":"# 概要"},
{"lineNum":"  580","line":"#   シナリオ実行中ではない場合、エラー終了します。"},
{"lineNum":"  581","line":"#"},
{"lineNum":"  582","line":"# 引数"},
{"lineNum":"  583","line":"#   なし"},
{"lineNum":"  584","line":"#"},
{"lineNum":"  585","line":"# 出力"},
{"lineNum":"  586","line":"#   環境変数"},
{"lineNum":"  587","line":"#     なし"},
{"lineNum":"  588","line":"#   標準出力"},
{"lineNum":"  589","line":"#     なし"},
{"lineNum":"  590","line":"#   ファイル"},
{"lineNum":"  591","line":"#     なし"},
{"lineNum":"  592","line":"#"},
{"lineNum":"  593","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  594","line":"function stfw.must_run_on_server() {"},
{"lineNum":"  595","line":"  if [[ \"$(stfw.is_run_on_server)\" = \"true\" ]]; then return ${EXITCODE_SUCCESS}; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  596","line":""},
{"lineNum":"  597","line":"  log.error \"must run on server.\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  598","line":"  exit ${EXITCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  599","line":"}"},
{"lineNum":"  600","line":""},
{"lineNum":"  601","line":"function stfw.is_run_on_server() {"},
{"lineNum":"  602","line":"  if [[ \"${STFW_PROJ_DIR}\" = \"$(stfw.project_home)\" ]]; then","class":"lineCov","hits":"6","order":"385","possible_hits":"0",},
{"lineNum":"  603","line":"    echo \"false\"","class":"lineCov","hits":"3","order":"388","possible_hits":"0",},
{"lineNum":"  604","line":"    return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"3","order":"389","possible_hits":"0",},
{"lineNum":"  605","line":"  fi"},
{"lineNum":"  606","line":""},
{"lineNum":"  607","line":"  echo \"true\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  608","line":"  return ${EXITCODE_SUCCESS}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  609","line":"}"},
{"lineNum":"  610","line":""},
{"lineNum":"  611","line":"function stfw.project_home() {"},
{"lineNum":"  612","line":"  # shellcheck disable=SC2001"},
{"lineNum":"  613","line":"  echo \"${STFW_PROJ_DIR}\" | sed -e \'s|/.stfw/.*||\'","class":"lineCov","hits":"6","order":"386","possible_hits":"0",},
{"lineNum":"  614","line":"  return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"3","order":"387","possible_hits":"0",},
{"lineNum":"  615","line":"}"},
{"lineNum":"  616","line":""},
{"lineNum":"  617","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  618","line":"# stfw起動パラメータ保存"},
{"lineNum":"  619","line":"#"},
{"lineNum":"  620","line":"# 概要"},
{"lineNum":"  621","line":"#   stfwコマンドの実行時パラメータを保存します。"},
{"lineNum":"  622","line":"#"},
{"lineNum":"  623","line":"# 引数"},
{"lineNum":"  624","line":"#   1: digdag project dir"},
{"lineNum":"  625","line":"#"},
{"lineNum":"  626","line":"# 出力"},
{"lineNum":"  627","line":"#   環境変数"},
{"lineNum":"  628","line":"#     なし"},
{"lineNum":"  629","line":"#   標準出力"},
{"lineNum":"  630","line":"#     なし"},
{"lineNum":"  631","line":"#   ファイル"},
{"lineNum":"  632","line":"#     {digdag_project_dir}/params"},
{"lineNum":"  633","line":"#"},
{"lineNum":"  634","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  635","line":"function stfw.set_raw_params() {"},
{"lineNum":"  636","line":"  local _path_params=\"${1:?}/params\"","class":"lineCov","hits":"1","order":"1491","possible_hits":"0",},
{"lineNum":"  637","line":"  echo \"${stfw_raw_params:?}\" >\"${_path_params}\"","class":"lineCov","hits":"1","order":"1492","possible_hits":"0",},
{"lineNum":"  638","line":"}"},
{"lineNum":"  639","line":""},
{"lineNum":"  640","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  641","line":"# stfw起動パラメータ取得"},
{"lineNum":"  642","line":"#"},
{"lineNum":"  643","line":"# 概要"},
{"lineNum":"  644","line":"#   stfwコマンドの実行時パラメータを取得します。"},
{"lineNum":"  645","line":"#"},
{"lineNum":"  646","line":"# 引数"},
{"lineNum":"  647","line":"#   なし"},
{"lineNum":"  648","line":"#"},
{"lineNum":"  649","line":"# 出力"},
{"lineNum":"  650","line":"#   環境変数"},
{"lineNum":"  651","line":"#     なし"},
{"lineNum":"  652","line":"#   標準出力"},
{"lineNum":"  653","line":"#     stfwコマンドのパラメータ"},
{"lineNum":"  654","line":"#   ファイル"},
{"lineNum":"  655","line":"#     ${STFW_PROJ_DIR_DATA}/params"},
{"lineNum":"  656","line":"#"},
{"lineNum":"  657","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  658","line":"function stfw.get_raw_params() {"},
{"lineNum":"  659","line":"  stfw.must_run_on_server","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  660","line":""},
{"lineNum":"  661","line":"  local _path_params=\"${STFW_PROJ_DIR}/params\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  662","line":"  if [[ ! -f \"${_path_params}\" ]]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  663","line":"    log.error \"${_path_params} is not exist.\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  664","line":"    exit ${EXITCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  665","line":"  fi"},
{"lineNum":"  666","line":""},
{"lineNum":"  667","line":"  cat \"${_path_params}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  668","line":"}"},
{"lineNum":"  669","line":""},
{"lineNum":"  670","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  671","line":"# webhook非同期実行"},
{"lineNum":"  672","line":"#"},
{"lineNum":"  673","line":"# 概要"},
{"lineNum":"  674","line":"#   stfw.webhookの設定に従って、payloadをPOST送信します。"},
{"lineNum":"  675","line":"#"},
{"lineNum":"  676","line":"# 引数"},
{"lineNum":"  677","line":"#   1: タイプ (run | scenario | bizdate | process)"},
{"lineNum":"  678","line":"#   2: イベント (start | end)"},
{"lineNum":"  679","line":"#   3: 処理時間計測キー"},
{"lineNum":"  680","line":"#   4: プラグイン相対パス ※タイプ=processの場合のみ必須"},
{"lineNum":"  681","line":"#"},
{"lineNum":"  682","line":"# 出力"},
{"lineNum":"  683","line":"#   環境変数"},
{"lineNum":"  684","line":"#     なし"},
{"lineNum":"  685","line":"#   標準出力"},
{"lineNum":"  686","line":"#     payload(yaml形式)"},
{"lineNum":"  687","line":"#   ファイル"},
{"lineNum":"  688","line":"#     なし"},
{"lineNum":"  689","line":"#   リクエスト"},
{"lineNum":"  690","line":"#     stfw.webhook.urls"},
{"lineNum":"  691","line":"#"},
{"lineNum":"  692","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  693","line":"function stfw.webhook.async_execute() {"},
{"lineNum":"  694","line":"  local _type=\"$1\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  695","line":"  local _event=\"$2\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  696","line":"  local _processing_time_key=\"$3\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  697","line":"  local _relpath_plugin=\"$4\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  698","line":""},
{"lineNum":"  699","line":"  # 設定チェック"},
{"lineNum":"  700","line":"  case \"${_event}\" in","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  701","line":"    start)"},
{"lineNum":"  702","line":"      local _status=\"${STATUS_STARTED}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  703","line":"      if [[ \"${stfw_webhooks_on_start:?}\" != \"true\" ]]; then return ${EXITCODE_SUCCESS}; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  704","line":"      ;;"},
{"lineNum":"  705","line":""},
{"lineNum":"  706","line":"    *)"},
{"lineNum":"  707","line":"      local _status=\"${STATUS_SUCCESS}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  708","line":"      # check status from dig"},
{"lineNum":"  709","line":"      # shellcheck disable=SC2154"},
{"lineNum":"  710","line":"      if [[ \"${stfw_run_status}\" = \"${STATUS_ERROR}\" ]]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  711","line":"        if [[ \"${stfw_webhooks_on_error:?}\" != \"true\" ]]; then return ${EXITCODE_SUCCESS}; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  712","line":"        _status=\"${STATUS_ERROR}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  713","line":""},
{"lineNum":"  714","line":"      else"},
{"lineNum":"  715","line":"        if [[ \"${stfw_webhooks_on_success:?}\" != \"true\" ]]; then return ${EXITCODE_SUCCESS}; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  716","line":"      fi"},
{"lineNum":"  717","line":"      ;;"},
{"lineNum":"  718","line":"  esac"},
{"lineNum":"  719","line":""},
{"lineNum":"  720","line":"  # process status チェック"},
{"lineNum":"  721","line":"  if [[ \"${_type}\" = \"process\" ]] &&  [[ ${stfw_process_retcode:?} -ne ${EXITCODE_SUCCESS} ]]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  722","line":"    _status=\"${STATUS_ERROR}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  723","line":"    if [[ \"${stfw_webhooks_on_error:?}\" != \"true\" ]]; then return ${EXITCODE_SUCCESS}; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  724","line":"  fi"},
{"lineNum":"  725","line":""},
{"lineNum":"  726","line":"  # webhookに必要な設定をまとめる"},
{"lineNum":"  727","line":"  local _configs=( \"${DIR_CONFIG}/webhook/payload.yml\" )","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  728","line":"  case \"${_type}\" in","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  729","line":"    run)"},
{"lineNum":"  730","line":"      _configs+=( \"${DIR_CONFIG}/webhook/run.yml\" )","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  731","line":"      ;;"},
{"lineNum":"  732","line":"    scenario)"},
{"lineNum":"  733","line":"      _configs+=( \"${DIR_CONFIG}/webhook/run.yml\" )","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  734","line":"      _configs+=( \"${DIR_CONFIG}/webhook/scenario.yml\" )","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  735","line":"      ;;"},
{"lineNum":"  736","line":"    bizdate)"},
{"lineNum":"  737","line":"      _configs+=( \"${DIR_CONFIG}/webhook/run.yml\" )","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  738","line":"      _configs+=( \"${DIR_CONFIG}/webhook/scenario.yml\" )","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  739","line":"      _configs+=( \"${DIR_CONFIG}/webhook/bizdate.yml\" )","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  740","line":"      ;;"},
{"lineNum":"  741","line":"    process)"},
{"lineNum":"  742","line":"      _configs+=( \"${DIR_CONFIG}/webhook/run.yml\" )","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  743","line":"      _configs+=( \"${DIR_CONFIG}/webhook/scenario.yml\" )","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  744","line":"      _configs+=( \"${DIR_CONFIG}/webhook/bizdate.yml\" )","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  745","line":"      _configs+=( \"${DIR_CONFIG}/webhook/process.yml\" )","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  746","line":"      ;;"},
{"lineNum":"  747","line":"    *)"},
{"lineNum":"  748","line":"      ;;"},
{"lineNum":"  749","line":"  esac"},
{"lineNum":"  750","line":""},
{"lineNum":"  751","line":"  readonly webhook_type=\"${_type}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  752","line":"  readonly webhook_status=\"${_status}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  753","line":""},
{"lineNum":"  754","line":"  webhook_id=\"${run_id:?}${task_name:?}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  755","line":"  if [[ \"${_type}\" != \"process\" ]]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  756","line":"    # process以外の場合、task_nameにsetup/teardownが含まれるので除外"},
{"lineNum":"  757","line":"    webhook_id=$(private.stfw.get_webhook_parent_id \"${webhook_id}}\")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  758","line":"  fi"},
{"lineNum":"  759","line":"  readonly webhook_parent_id=$(private.stfw.get_webhook_parent_id \"${webhook_id}\")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  760","line":""},
{"lineNum":"  761","line":"  # 開始・終了時間計算"},
{"lineNum":"  762","line":"  local _start_time=$(processing_time.get_start_time \"${_processing_time_key}\")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  763","line":"  readonly webhook_start_time=$(timestamp_to_iso ${_start_time})","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  764","line":""},
{"lineNum":"  765","line":"  if [[ \"${_event}\" != \"start\" ]]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  766","line":"    local _end_time=$(date \'+%Y%m%d%H%M%S\')","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  767","line":"    readonly webhook_end_time=$(timestamp_to_iso ${_end_time})","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  768","line":"    readonly webhook_processing_time=$(processing_time.end \"${_processing_time_key}\")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  769","line":"  fi"},
{"lineNum":"  770","line":""},
{"lineNum":"  771","line":"  local _tmp_yml_file=\"/tmp/stfw_webhook_${_type}_${_event}_$$.yml\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  772","line":""},
{"lineNum":"  773","line":"  # 複数ファイルをcatで合成しつつ、変数展開、jsonへ変換"},
{"lineNum":"  774","line":"  cat \"${_configs[@]}\" | grep -v \"^#\" |","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  775","line":"  while IFS= read -r _line; do","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  776","line":"    eval \"echo \\\"${_line}\\\"\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  777","line":"  done >\"${_tmp_yml_file}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  778","line":""},
{"lineNum":"  779","line":"  # プロセスの場合、プラグイン分を合成"},
{"lineNum":"  780","line":"  if [[ ${_type} = \"process\" ]]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  781","line":"    (","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  782","line":"      # サブシェルとして動かして、カレントディレクトリの移動を意識しなくて良くしています。"},
{"lineNum":"  783","line":"      cd \"${stfw_process_dir:?}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  784","line":"      local _plugin_dir=$(stfw.get_plugin_path \"${_relpath_plugin}\")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  785","line":"      \"${_plugin_dir}/bin/webhook/get_${_event}_content\" | grep -v \"^#\" >>\"${_tmp_yml_file}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  786","line":"      local _retcode=${PIPESTATUS[0]}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  787","line":""},
{"lineNum":"  788","line":"      if [[ ${_retcode} -ne ${EXITCODE_SUCCESS} ]]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  789","line":"        log.error \"get_${_event}_content is failed. process_relpath_plugin=${_relpath_plugin}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  790","line":"      fi"},
{"lineNum":"  791","line":"    )"},
{"lineNum":"  792","line":"  fi"},
{"lineNum":"  793","line":""},
{"lineNum":"  794","line":"  # 結果表示"},
{"lineNum":"  795","line":"  cat \"${_tmp_yml_file}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  796","line":""},
{"lineNum":"  797","line":"  # 非同期実行"},
{"lineNum":"  798","line":"  private.stfw.webhook.execute \"${_tmp_yml_file}\" &","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  799","line":"}"},
{"lineNum":"  800","line":""},
{"lineNum":"  801","line":"function private.stfw.webhook.execute() {"},
{"lineNum":"  802","line":"  local _tmp_yml_file=\"$1\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  803","line":"  local _tmp_json_file=\"${_tmp_yml_file}.json\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  804","line":"  log.clear_indent","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  805","line":""},
{"lineNum":"  806","line":"  # yml -> json変換"},
{"lineNum":"  807","line":"  \"${DIR_BIN_LIB}/yaml2json\" \"${_tmp_yml_file}\" >\"${_tmp_json_file}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  808","line":"  rm \"${_tmp_yml_file}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  809","line":""},
{"lineNum":"  810","line":"  printenv | grep \"stfw_webhooks_urls_\" | cut -d \"=\" -f 2 |","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  811","line":"  while read -r _webhooks_url; do","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  812","line":"    log.sect_start_debug \"${_webhooks_url}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  813","line":""},
{"lineNum":"  814","line":"    local _curl_cmd=(","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  815","line":"      curl","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  816","line":"        --silent","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  817","line":"        --show-error","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  818","line":"        --request POST","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  819","line":"        --data-binary \"@${_tmp_json_file}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  820","line":"        --header \"Content-type: application/json\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  821","line":"        \"${_webhooks_url}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  822","line":"    )"},
{"lineNum":"  823","line":""},
{"lineNum":"  824","line":"    log.debug \"[webhook] ${_curl_cmd[*]}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  825","line":"    local _response=$( \"${_curl_cmd[@]}\" 2>&1 )","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  826","line":""},
{"lineNum":"  827","line":"    if [[ \"${_response}\" = \"ok\" ]]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  828","line":"      log.info \"[webhook] ${STATUS_SUCCESS} target=${_webhooks_url}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  829","line":"    else"},
{"lineNum":"  830","line":"      log.warn \"[webhook] ${STATUS_ERROR} target=${_webhooks_url}, response=${_response}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  831","line":"    fi"},
{"lineNum":"  832","line":"    log.sect_end_debug \"${_webhooks_url}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  833","line":"  done"},
{"lineNum":"  834","line":""},
{"lineNum":"  835","line":"  rm \"${_tmp_json_file}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  836","line":"}"},
{"lineNum":"  837","line":""},
{"lineNum":"  838","line":"function private.stfw.get_webhook_parent_id() {"},
{"lineNum":"  839","line":"  local _base_id=\"$1\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  840","line":"  # digdag task_name を path に変換"},
{"lineNum":"  841","line":"  local _tmp_webhook_id=$(","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  842","line":"    echo \"${_base_id}\"                                                                             |","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  843","line":"    sed -e \'s|\\+|/|g\'                                                                              | # 区切り文字を/に置換","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  844","line":"    sed -e \'s|\\^|/|g\'","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  845","line":"  )"},
{"lineNum":"  846","line":"  local _webhook_id=$(dirname \"${_tmp_webhook_id}\" | sed -e \'s|/|+|g\')","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  847","line":"  echo \"${_webhook_id}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  848","line":"}"},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "integration_test.sh", "date" : "2018-02-01 17:02:22", "instrumented" : 254, "covered" : 96,};
var merged_data = [];

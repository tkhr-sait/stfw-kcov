var data = {lines:[
{"lineNum":"    1","line":"#!/bin/bash"},
{"lineNum":"    2","line":"#set -eux"},
{"lineNum":"    3","line":"#==================================================================================================="},
{"lineNum":"    4","line":"#"},
{"lineNum":"    5","line":"# scenario test framework installer"},
{"lineNum":"    6","line":"#"},
{"lineNum":"    7","line":"#==================================================================================================="},
{"lineNum":"    8","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"    9","line":"# 設定"},
{"lineNum":"   10","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   11","line":"# 実行ディレクトリ"},
{"lineNum":"   12","line":"export STFW_EXEC_DIR=\"$(pwd)\"","class":"lineCov","hits":"6","order":"71","possible_hits":"0",},
{"lineNum":"   13","line":""},
{"lineNum":"   14","line":"# プロジェクトディレクトリ"},
{"lineNum":"   15","line":"STFW_PROJ_DIR=${STFW_PROJ_DIR:-$(","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   16","line":"  while :; do","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   17","line":"    if [[ \"$(pwd)\" = \"/\" ]]; then break; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   18","line":"    if [[ -f ./stfw.yml ]]; then pwd; break; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   19","line":"    cd ..","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   20","line":"  done"},
{"lineNum":"   21","line":")}","class":"lineCov","hits":"2","order":"73","possible_hits":"0",},
{"lineNum":"   22","line":"# 見つからない場合、初期化していないカレントディレクトリとみなす"},
{"lineNum":"   23","line":"export STFW_PROJ_DIR=\"${STFW_PROJ_DIR:-$(pwd)}\"","class":"lineCov","hits":"28","order":"72","possible_hits":"0",},
{"lineNum":"   24","line":""},
{"lineNum":"   25","line":"# sym linkを考慮して、スクリプト配置ディレクトリへcd"},
{"lineNum":"   26","line":"dir_script=$(dirname \"$(readlink $0)\")","class":"lineCov","hits":"6","order":"74","possible_hits":"0",},
{"lineNum":"   27","line":"if [[ \"${dir_script}\" = \".\" ]]; then dir_script=$(dirname $0); fi","class":"lineCov","hits":"6","order":"75","possible_hits":"0",},
{"lineNum":"   28","line":"cd \"$(cd ${dir_script}; pwd)\"","class":"lineCov","hits":"6","order":"76","possible_hits":"0",},
{"lineNum":"   29","line":""},
{"lineNum":"   30","line":"# 共通設定"},
{"lineNum":"   31","line":"export readonly STFW_HOME=\"$(cd ..; pwd)\"","class":"lineCov","hits":"8","order":"77","possible_hits":"0",},
{"lineNum":"   32","line":". \"${STFW_HOME}/bin/lib/setenv\"","class":"lineCov","hits":"2","order":"78","possible_hits":"0",},
{"lineNum":"   33","line":""},
{"lineNum":"   34","line":"readonly __TMP_PIP_LIST=\"/tmp/pip_freeze_$$\"","class":"lineCov","hits":"4","order":"149","possible_hits":"0",},
{"lineNum":"   35","line":""},
{"lineNum":"   36","line":""},
{"lineNum":"   37","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   38","line":"# 関数定義"},
{"lineNum":"   39","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   40","line":"function private.exit_on_fail() {"},
{"lineNum":"   41","line":"  local _retcode=$1","class":"lineCov","hits":"15","order":"216","possible_hits":"0",},
{"lineNum":"   42","line":"  if [[ ${_retcode} -ne ${EXITCODE_SUCCESS} ]]; then","class":"lineCov","hits":"15","order":"217","possible_hits":"0",},
{"lineNum":"   43","line":"    log.clear_indent","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   44","line":"    {"},
{"lineNum":"   45","line":"      echo \"--------------------------------------------------\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   46","line":"      echo \" INSTALL FAILURE\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   47","line":"      echo \"--------------------------------------------------\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   48","line":"    } | log.error","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   49","line":"    exit ${EXITCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   50","line":"  fi"},
{"lineNum":"   51","line":"}"},
{"lineNum":"   52","line":""},
{"lineNum":"   53","line":""},
{"lineNum":"   54","line":"function private.is_installed() {"},
{"lineNum":"   55","line":"  log.func_start_trace \"$@\"","class":"lineCov","hits":"8","order":"198","possible_hits":"0",},
{"lineNum":"   56","line":""},
{"lineNum":"   57","line":"  local _cmd=\"$1\"","class":"lineCov","hits":"8","order":"203","possible_hits":"0",},
{"lineNum":"   58","line":"  local _retcode=${EXITCODE_SUCCESS}","class":"lineCov","hits":"8","order":"204","possible_hits":"0",},
{"lineNum":"   59","line":""},
{"lineNum":"   60","line":"  log.info \"${_cmd}\"","class":"lineCov","hits":"8","order":"205","possible_hits":"0",},
{"lineNum":"   61","line":"  log.add_indent","class":"lineCov","hits":"8","order":"206","possible_hits":"0",},
{"lineNum":"   62","line":"  if [[ \"$(which ${_cmd})x\" = \"x\" ]]; then","class":"lineCov","hits":"16","order":"207","possible_hits":"0",},
{"lineNum":"   63","line":"    log.error \"${_cmd} is not installed.\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   64","line":"    _retcode=${EIXTCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   65","line":"  else"},
{"lineNum":"   66","line":"    log.info \"${_cmd} is installed.\"","class":"lineCov","hits":"8","order":"208","possible_hits":"0",},
{"lineNum":"   67","line":"  fi"},
{"lineNum":"   68","line":"  log.remove_indent","class":"lineCov","hits":"8","order":"209","possible_hits":"0",},
{"lineNum":"   69","line":""},
{"lineNum":"   70","line":"  log.func_end_trace ${_retcode}","class":"lineCov","hits":"8","order":"212","possible_hits":"0",},
{"lineNum":"   71","line":"  return ${_retcode}","class":"lineCov","hits":"8","order":"214","possible_hits":"0",},
{"lineNum":"   72","line":"}"},
{"lineNum":"   73","line":""},
{"lineNum":"   74","line":""},
{"lineNum":"   75","line":"function private.is_pip_installed() {"},
{"lineNum":"   76","line":"  log.func_start_trace \"$@\"","class":"lineCov","hits":"4","order":"225","possible_hits":"0",},
{"lineNum":"   77","line":""},
{"lineNum":"   78","line":"  # pipインストール済みリスト ※同一プロセス内の再利用を考慮"},
{"lineNum":"   79","line":"  if [[ ! -f \"${__TMP_PIP_LIST}\" ]]; then","class":"lineCov","hits":"4","order":"226","possible_hits":"0",},
{"lineNum":"   80","line":"    pip freeze > \"${__TMP_PIP_LIST}\"","class":"lineCov","hits":"3","order":"227","possible_hits":"0",},
{"lineNum":"   81","line":"  fi"},
{"lineNum":"   82","line":""},
{"lineNum":"   83","line":"  local _cmd=\"$1\"","class":"lineCov","hits":"4","order":"228","possible_hits":"0",},
{"lineNum":"   84","line":"  local _retcode=${EXITCODE_SUCCESS}","class":"lineCov","hits":"4","order":"229","possible_hits":"0",},
{"lineNum":"   85","line":""},
{"lineNum":"   86","line":"  log.info \"${_cmd}\"","class":"lineCov","hits":"4","order":"230","possible_hits":"0",},
{"lineNum":"   87","line":"  log.add_indent","class":"lineCov","hits":"4","order":"231","possible_hits":"0",},
{"lineNum":"   88","line":"  if [[ \"$(grep ${_cmd} ${__TMP_PIP_LIST})x\" = \"x\" ]]; then","class":"lineCov","hits":"8","order":"232","possible_hits":"0",},
{"lineNum":"   89","line":"    log.error \"pip.${_cmd} is not installed.\"","class":"lineCov","hits":"2","possible_hits":"0",},
{"lineNum":"   90","line":"    _retcode=${EIXTCODE_ERROR}","class":"lineCov","hits":"2","possible_hits":"0",},
{"lineNum":"   91","line":"  else"},
{"lineNum":"   92","line":"    log.info \"pip.${_cmd} is installed.\"","class":"lineCov","hits":"2","order":"233","possible_hits":"0",},
{"lineNum":"   93","line":"  fi"},
{"lineNum":"   94","line":"  log.remove_indent","class":"lineCov","hits":"4","order":"234","possible_hits":"0",},
{"lineNum":"   95","line":""},
{"lineNum":"   96","line":"  log.func_end_trace ${_retcode}","class":"lineCov","hits":"4","order":"235","possible_hits":"0",},
{"lineNum":"   97","line":"  return ${_retcode}","class":"lineCov","hits":"4","order":"236","possible_hits":"0",},
{"lineNum":"   98","line":"}"},
{"lineNum":"   99","line":""},
{"lineNum":"  100","line":"function private.download() {"},
{"lineNum":"  101","line":"  log.func_start_trace \"$@\"","class":"lineCov","hits":"2","order":"275","possible_hits":"0",},
{"lineNum":"  102","line":""},
{"lineNum":"  103","line":"  # オプション解析"},
{"lineNum":"  104","line":"  local _continue_option=\"\"","class":"lineCov","hits":"2","order":"276","possible_hits":"0",},
{"lineNum":"  105","line":"  while :; do","class":"lineCov","hits":"4","order":"277","possible_hits":"0",},
{"lineNum":"  106","line":"    case $1 in","class":"lineCov","hits":"4","order":"278","possible_hits":"0",},
{"lineNum":"  107","line":"      -c|--continue)"},
{"lineNum":"  108","line":"        _continue_option=\"--continue-at -\"","class":"lineCov","hits":"2","order":"279","possible_hits":"0",},
{"lineNum":"  109","line":"        shift","class":"lineCov","hits":"2","order":"280","possible_hits":"0",},
{"lineNum":"  110","line":"        ;;"},
{"lineNum":"  111","line":"      --)"},
{"lineNum":"  112","line":"        shift","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  113","line":"        break","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  114","line":"        ;;"},
{"lineNum":"  115","line":"      *)"},
{"lineNum":"  116","line":"        break","class":"lineCov","hits":"2","order":"281","possible_hits":"0",},
{"lineNum":"  117","line":"        ;;"},
{"lineNum":"  118","line":"    esac"},
{"lineNum":"  119","line":"  done"},
{"lineNum":"  120","line":""},
{"lineNum":"  121","line":"  local _url=\"$1\"","class":"lineCov","hits":"2","order":"282","possible_hits":"0",},
{"lineNum":"  122","line":"  local _path_output=\"${DIR_ARCHIVE}/$(basename ${_url})\"","class":"lineCov","hits":"4","order":"283","possible_hits":"0",},
{"lineNum":"  123","line":"  local _exitcode=${EXITCODE_SUCCESS}","class":"lineCov","hits":"2","order":"284","possible_hits":"0",},
{"lineNum":"  124","line":"  local _retcode=${EXITCODE_SUCCESS}","class":"lineCov","hits":"2","order":"285","possible_hits":"0",},
{"lineNum":"  125","line":""},
{"lineNum":"  126","line":"  if [[ ! -d \"${DIR_ARCHIVE}\" ]]; then mkdir -p \"${DIR_ARCHIVE}\"; fi","class":"lineCov","hits":"2","order":"286","possible_hits":"0",},
{"lineNum":"  127","line":"  if [[ ! -d \"${DIR_MODULE}\" ]]; then mkdir -p \"${DIR_MODULE}\"; fi","class":"lineCov","hits":"4","order":"287","possible_hits":"0",},
{"lineNum":"  128","line":""},
{"lineNum":"  129","line":"  # ダウンロード"},
{"lineNum":"  130","line":"  curl                                                                                             \\","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  131","line":"    --max-time ${DL_TIMEOUT}                                                                       \\"},
{"lineNum":"  132","line":"    --location                                                                                     \\"},
{"lineNum":"  133","line":"    --output \"${_path_output}\"                                                                     \\"},
{"lineNum":"  134","line":"    --request GET                                                                                  \\"},
{"lineNum":"  135","line":"    ${_continue_option}                                                                            \\"},
{"lineNum":"  136","line":"    --url \"${_url}\"                                                                                | log.debug"},
{"lineNum":"  137","line":"  _retcode=${PIPESTATUS[0]}","class":"lineCov","hits":"2","order":"295","possible_hits":"0",},
{"lineNum":"  138","line":""},
{"lineNum":"  139","line":"  if [[ ${_retcode} -eq ${EXITCODE_SUCCESS} ]]; then","class":"lineCov","hits":"2","order":"296","possible_hits":"0",},
{"lineNum":"  140","line":"    log.info \"downloaded ${_path_output}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  141","line":"  elif [[ ${_retcode} -eq 33 ]]; then","class":"lineCov","hits":"2","order":"297","possible_hits":"0",},
{"lineNum":"  142","line":"    log.warn \"download skipped. target:${_url}, retcode:${_retcode}\"","class":"lineCov","hits":"2","order":"298","possible_hits":"0",},
{"lineNum":"  143","line":"  else"},
{"lineNum":"  144","line":"    log.error \"download failed. target:${_url}, retcode:${_retcode}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  145","line":"    _exitcode=${EXITCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  146","line":"  fi"},
{"lineNum":"  147","line":""},
{"lineNum":"  148","line":"  log.func_end_trace ${_exitcode}","class":"lineCov","hits":"2","order":"306","possible_hits":"0",},
{"lineNum":"  149","line":"  return ${_exitcode}","class":"lineCov","hits":"2","order":"307","possible_hits":"0",},
{"lineNum":"  150","line":"}"},
{"lineNum":"  151","line":""},
{"lineNum":"  152","line":"function private.gracefull_download() {"},
{"lineNum":"  153","line":"  log.func_start_trace \"$@\"","class":"lineCov","hits":"2","order":"268","possible_hits":"0",},
{"lineNum":"  154","line":""},
{"lineNum":"  155","line":"  local _download_url=\"$1\"","class":"lineCov","hits":"2","order":"269","possible_hits":"0",},
{"lineNum":"  156","line":"  local _path_downloaded=\"${DIR_ARCHIVE}/$(basename ${_download_url})\"","class":"lineCov","hits":"4","order":"270","possible_hits":"0",},
{"lineNum":"  157","line":"  local _retcode=\"${EXITCODE_SUCCESS}\"","class":"lineCov","hits":"2","order":"271","possible_hits":"0",},
{"lineNum":"  158","line":""},
{"lineNum":"  159","line":"  # ダウンロード"},
{"lineNum":"  160","line":"  local _option=\"\"","class":"lineCov","hits":"2","order":"272","possible_hits":"0",},
{"lineNum":"  161","line":"  if [[ -f \"${_path_downloaded}\" ]]; then _option=\"--continue\"; fi","class":"lineCov","hits":"4","order":"273","possible_hits":"0",},
{"lineNum":"  162","line":"  private.download ${_option} \"${_download_url}\"","class":"lineCov","hits":"2","order":"274","possible_hits":"0",},
{"lineNum":"  163","line":"  _retcode=$?","class":"lineCov","hits":"2","order":"308","possible_hits":"0",},
{"lineNum":"  164","line":""},
{"lineNum":"  165","line":"  log.func_end_trace ${_retcode}","class":"lineCov","hits":"2","order":"309","possible_hits":"0",},
{"lineNum":"  166","line":"  return ${_retcode}","class":"lineCov","hits":"2","order":"310","possible_hits":"0",},
{"lineNum":"  167","line":"}"},
{"lineNum":"  168","line":""},
{"lineNum":"  169","line":"function private.extract() {"},
{"lineNum":"  170","line":"  log.func_start_trace \"$@\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  171","line":"  local _path_from=\"$1\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  172","line":"  local _dir_to=\"$2\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  173","line":""},
{"lineNum":"  174","line":"  # fromファイル"},
{"lineNum":"  175","line":"  if [[ ! -f \"${_path_from}\" ]]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  176","line":"    log.error \"${_path_from} is not exist.\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  177","line":"    log.restore_indent","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  178","line":"    return ${EXITCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  179","line":"  fi"},
{"lineNum":"  180","line":""},
{"lineNum":"  181","line":"  local _exitcode=${EXITCODE_SUCCESS}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  182","line":""},
{"lineNum":"  183","line":"  # 展開ディレクトリ"},
{"lineNum":"  184","line":"  if [[ -d \"${_dir_to}\" ]]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  185","line":"    log.warn \"${_dir_to} removed. because already exists.\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  186","line":"    rm -fr \"${_dir_to}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  187","line":"  fi"},
{"lineNum":"  188","line":"  mkdir -p \"${_dir_to}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  189","line":""},
{"lineNum":"  190","line":"  # 拡張子判定"},
{"lineNum":"  191","line":"  local _ext_from=\"$(get_ext ${_path_from})\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  192","line":""},
{"lineNum":"  193","line":"  # 展開"},
{"lineNum":"  194","line":"  local _tmp_path=\"${_dir_to}/$(basename ${_path_from})\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  195","line":"  cd \"${_dir_to}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  196","line":"  mv \"${_path_from}\" \"${_dir_to}/\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  197","line":"  if [[ \"zip\" = \"${_ext_from}\" ]] || [[ \"war\" = \"${_ext_from}\" ]]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  198","line":"    # zip | war"},
{"lineNum":"  199","line":"    log.info \"unzip \\\"${_tmp_path}\\\"\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  200","line":"    unzip \"${_tmp_path}\"                                                                      2>&1 | log.debug","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  201","line":""},
{"lineNum":"  202","line":"  elif [[ \"tar.gz\" = \"${_ext_from}\" ]] || [[ \"tgz\" = \"${_ext_from}\" ]]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  203","line":"    # tar.gz"},
{"lineNum":"  204","line":"    log.info \"tar xvzf \\\"${_tmp_path}\\\"\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  205","line":"    tar xvzf \"${_tmp_path}\"                                                                   2>&1 | log.debug","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  206","line":""},
{"lineNum":"  207","line":"  else"},
{"lineNum":"  208","line":"    log.error \"extension:${_ext_from} is not supported.\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  209","line":"    _exitcode=${EXITCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  210","line":"  fi"},
{"lineNum":"  211","line":"  mv \"${_tmp_path}\" \"${_path_from}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  212","line":"  cd - > /dev/null","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  213","line":""},
{"lineNum":"  214","line":"  # 展開結果を一つ上のディレクトリに移動"},
{"lineNum":"  215","line":"  local _dir_extracted=\"$(find ${_dir_to} -mindepth 1 -maxdepth 1 -type d | head -n 1)\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  216","line":"  mv \"${_dir_extracted}\"/* \"${_dir_to}/\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  217","line":"  rm -fr \"${_dir_extracted}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  218","line":""},
{"lineNum":"  219","line":"  log.func_end_trace ${_exitcode}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  220","line":"  return ${_exitcode}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  221","line":"}"},
{"lineNum":"  222","line":""},
{"lineNum":"  223","line":"function private.download_and_rename() {"},
{"lineNum":"  224","line":"  log.func_start_trace \"$@\"","class":"lineCov","hits":"2","order":"250","possible_hits":"0",},
{"lineNum":"  225","line":"  local _target=\"$1\"","class":"lineCov","hits":"2","order":"251","possible_hits":"0",},
{"lineNum":"  226","line":"  local _download_url=\"$2\"","class":"lineCov","hits":"2","order":"252","possible_hits":"0",},
{"lineNum":"  227","line":"  local _path_copied=\"$3\"","class":"lineCov","hits":"2","order":"253","possible_hits":"0",},
{"lineNum":"  228","line":""},
{"lineNum":"  229","line":"  local _path_downloaded=\"${DIR_ARCHIVE}/$(basename ${_download_url})\"","class":"lineCov","hits":"4","order":"254","possible_hits":"0",},
{"lineNum":"  230","line":"  local _retcode=${EXITCODE_SUCCESS}","class":"lineCov","hits":"2","order":"255","possible_hits":"0",},
{"lineNum":"  231","line":""},
{"lineNum":"  232","line":"  log.save_indent","class":"lineCov","hits":"2","order":"256","possible_hits":"0",},
{"lineNum":"  233","line":"  log.info \"${_target}\"","class":"lineCov","hits":"2","order":"265","possible_hits":"0",},
{"lineNum":"  234","line":"  log.add_indent","class":"lineCov","hits":"2","order":"266","possible_hits":"0",},
{"lineNum":"  235","line":""},
{"lineNum":"  236","line":"  # ダウンロード"},
{"lineNum":"  237","line":"  private.gracefull_download \"${_download_url}\"","class":"lineCov","hits":"2","order":"267","possible_hits":"0",},
{"lineNum":"  238","line":"  _retcode=$?","class":"lineCov","hits":"2","order":"311","possible_hits":"0",},
{"lineNum":"  239","line":"  if [[ ${EXITCODE_SUCCESS} -ne ${_retcode} ]]; then return ${_retcode}; fi","class":"lineCov","hits":"2","order":"312","possible_hits":"0",},
{"lineNum":"  240","line":""},
{"lineNum":"  241","line":"  # コピー"},
{"lineNum":"  242","line":"  log.info \"copy\"","class":"lineCov","hits":"2","order":"313","possible_hits":"0",},
{"lineNum":"  243","line":"  log.add_indent","class":"lineCov","hits":"2","order":"314","possible_hits":"0",},
{"lineNum":"  244","line":"  cp \"${_path_downloaded}\" \"${_path_copied}\"","class":"lineCov","hits":"2","order":"315","possible_hits":"0",},
{"lineNum":"  245","line":"  _retcode=$?","class":"lineCov","hits":"2","order":"316","possible_hits":"0",},
{"lineNum":"  246","line":"  log.remove_indent","class":"lineCov","hits":"2","order":"317","possible_hits":"0",},
{"lineNum":"  247","line":"  if [[ ${EXITCODE_SUCCESS} -ne ${_retcode} ]]; then return ${_retcode}; fi","class":"lineCov","hits":"2","order":"318","possible_hits":"0",},
{"lineNum":"  248","line":""},
{"lineNum":"  249","line":"  # 権限付与"},
{"lineNum":"  250","line":"  log.info \"chmod\"","class":"lineCov","hits":"2","order":"319","possible_hits":"0",},
{"lineNum":"  251","line":"  log.add_indent","class":"lineCov","hits":"2","order":"320","possible_hits":"0",},
{"lineNum":"  252","line":"  chmod +x \"${_path_copied}\"","class":"lineCov","hits":"2","order":"321","possible_hits":"0",},
{"lineNum":"  253","line":"  _retcode=$?","class":"lineCov","hits":"2","order":"322","possible_hits":"0",},
{"lineNum":"  254","line":"  log.remove_indent","class":"lineCov","hits":"2","order":"323","possible_hits":"0",},
{"lineNum":"  255","line":"  if [[ ${EXITCODE_SUCCESS} -ne ${_retcode} ]]; then return ${_retcode}; fi","class":"lineCov","hits":"2","order":"324","possible_hits":"0",},
{"lineNum":"  256","line":""},
{"lineNum":"  257","line":"  log.restore_indent","class":"lineCov","hits":"2","order":"325","possible_hits":"0",},
{"lineNum":"  258","line":"  log.func_end_trace ${_retcode}","class":"lineCov","hits":"2","order":"334","possible_hits":"0",},
{"lineNum":"  259","line":"  return ${_retcode}","class":"lineCov","hits":"2","order":"335","possible_hits":"0",},
{"lineNum":"  260","line":"}"},
{"lineNum":"  261","line":""},
{"lineNum":"  262","line":"function private.download_and_extract() {"},
{"lineNum":"  263","line":"  log.func_start_trace \"$@\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  264","line":"  local _target=\"$1\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  265","line":"  local _download_url=\"$2\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  266","line":"  local _path_extracted=\"$3\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  267","line":""},
{"lineNum":"  268","line":"  local _path_downloaded=\"${DIR_ARCHIVE}/$(basename ${_download_url})\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  269","line":"  local _retcode=${EXITCODE_SUCCESS}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  270","line":""},
{"lineNum":"  271","line":"  log.save_indent","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  272","line":"  log.info \"${_target}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  273","line":"  log.add_indent","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  274","line":""},
{"lineNum":"  275","line":"  # ダウンロード"},
{"lineNum":"  276","line":"  private.gracefull_download \"${_download_url}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  277","line":"  _retcode=$?","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  278","line":"  if [[ ${EXITCODE_SUCCESS} -ne ${_retcode} ]]; then return ${_retcode}; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  279","line":""},
{"lineNum":"  280","line":"  # 展開"},
{"lineNum":"  281","line":"  log.info \"extract\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  282","line":"  log.add_indent","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  283","line":"  private.extract \"${_path_downloaded}\" \"${_path_extracted}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  284","line":"  _retcode=$?","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  285","line":"  log.remove_indent","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  286","line":"  if [[ ${EXITCODE_SUCCESS} -ne ${_retcode} ]]; then return ${_retcode}; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  287","line":""},
{"lineNum":"  288","line":"  # 権限付与"},
{"lineNum":"  289","line":"  log.info \"chmod\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  290","line":"  log.add_indent","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  291","line":"  chmod -R +x \"${_path_extracted}/bin\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  292","line":"  _retcode=$?","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  293","line":"  log.remove_indent","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  294","line":"  if [[ ${EXITCODE_SUCCESS} -ne ${_retcode} ]]; then return ${_retcode}; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  295","line":""},
{"lineNum":"  296","line":"  log.restore_indent","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  297","line":"  log.func_end_trace ${_retcode}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  298","line":"  return ${_retcode}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  299","line":"}"},
{"lineNum":"  300","line":""},
{"lineNum":"  301","line":""},
{"lineNum":"  302","line":""},
{"lineNum":"  303","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  304","line":"# 事前処理"},
{"lineNum":"  305","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  306","line":"exitcode=${EXITCODE_SUCCESS}","class":"lineCov","hits":"2","order":"150","possible_hits":"0",},
{"lineNum":"  307","line":""},
{"lineNum":"  308","line":""},
{"lineNum":"  309","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  310","line":"# 本処理"},
{"lineNum":"  311","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  312","line":"{"},
{"lineNum":"  313","line":"  echo \"--------------------------------------------------\"","class":"lineCov","hits":"2","order":"151","possible_hits":"0",},
{"lineNum":"  314","line":"  echo \" INSTALL\"","class":"lineCov","hits":"2","order":"153","possible_hits":"0",},
{"lineNum":"  315","line":"  echo \"--------------------------------------------------\"","class":"lineCov","hits":"2","order":"154","possible_hits":"0",},
{"lineNum":"  316","line":"} | log.info","class":"lineCov","hits":"2","order":"152","possible_hits":"0",},
{"lineNum":"  317","line":"log.add_indent","class":"lineCov","hits":"2","order":"187","possible_hits":"0",},
{"lineNum":"  318","line":""},
{"lineNum":"  319","line":""},
{"lineNum":"  320","line":"#--------------------------------------------------------------------------------------------------"},
{"lineNum":"  321","line":"# 前提チェック"},
{"lineNum":"  322","line":"#--------------------------------------------------------------------------------------------------"},
{"lineNum":"  323","line":"log.info \"check requires\"","class":"lineCov","hits":"2","order":"189","possible_hits":"0",},
{"lineNum":"  324","line":"log.add_indent","class":"lineCov","hits":"2","order":"196","possible_hits":"0",},
{"lineNum":"  325","line":""},
{"lineNum":"  326","line":"private.is_installed \"java\"","class":"lineCov","hits":"2","order":"197","possible_hits":"0",},
{"lineNum":"  327","line":"private.exit_on_fail $?","class":"lineCov","hits":"2","order":"215","possible_hits":"0",},
{"lineNum":"  328","line":""},
{"lineNum":"  329","line":"private.is_installed \"curl\"","class":"lineCov","hits":"2","order":"218","possible_hits":"0",},
{"lineNum":"  330","line":"private.exit_on_fail $?","class":"lineCov","hits":"2","order":"219","possible_hits":"0",},
{"lineNum":"  331","line":""},
{"lineNum":"  332","line":"private.is_installed \"python\"","class":"lineCov","hits":"2","order":"220","possible_hits":"0",},
{"lineNum":"  333","line":"private.exit_on_fail $?","class":"lineCov","hits":"2","order":"221","possible_hits":"0",},
{"lineNum":"  334","line":""},
{"lineNum":"  335","line":"private.is_installed \"pip\"","class":"lineCov","hits":"2","order":"222","possible_hits":"0",},
{"lineNum":"  336","line":"private.exit_on_fail $?","class":"lineCov","hits":"2","order":"223","possible_hits":"0",},
{"lineNum":"  337","line":""},
{"lineNum":"  338","line":"private.is_pip_installed \"pyaml\"","class":"lineCov","hits":"2","order":"224","possible_hits":"0",},
{"lineNum":"  339","line":"private.exit_on_fail $?","class":"lineCov","hits":"2","order":"237","possible_hits":"0",},
{"lineNum":"  340","line":""},
{"lineNum":"  341","line":"private.is_pip_installed \"docopt\"","class":"lineCov","hits":"2","order":"238","possible_hits":"0",},
{"lineNum":"  342","line":"private.exit_on_fail $?","class":"lineCov","hits":"2","order":"239","possible_hits":"0",},
{"lineNum":"  343","line":""},
{"lineNum":"  344","line":"rm -f \"${__TMP_PIP_LIST}\"","class":"lineCov","hits":"2","order":"240","possible_hits":"0",},
{"lineNum":"  345","line":"log.remove_indent","class":"lineCov","hits":"2","order":"241","possible_hits":"0",},
{"lineNum":"  346","line":""},
{"lineNum":"  347","line":""},
{"lineNum":"  348","line":""},
{"lineNum":"  349","line":"#--------------------------------------------------------------------------------------------------"},
{"lineNum":"  350","line":"# バイナリファイル切り替え"},
{"lineNum":"  351","line":"#--------------------------------------------------------------------------------------------------"},
{"lineNum":"  352","line":"log.info \"switch binaries\"","class":"lineCov","hits":"2","order":"242","possible_hits":"0",},
{"lineNum":"  353","line":""},
{"lineNum":"  354","line":"__TMP_DIR_BINARY=\"${DIR_BIN_LIB}/binary/linux\"","class":"lineCov","hits":"2","order":"243","possible_hits":"0",},
{"lineNum":"  355","line":"if [ \"$(is_mac)\" = \"true\" ]; then __TMP_DIR_BINARY=\"${DIR_BIN_LIB}/binary/mac\"; fi","class":"lineCov","hits":"4","order":"244","possible_hits":"0",},
{"lineNum":"  356","line":""},
{"lineNum":"  357","line":"# shellcheck disable=SC2038 disable=SC2016"},
{"lineNum":"  358","line":"find \"${__TMP_DIR_BINARY}\" -type f                                                                 |","class":"lineCov","hits":"2","order":"245","possible_hits":"0",},
{"lineNum":"  359","line":"xargs -I {} bash -c \'cur_file_path={}; ln -sf ${cur_file_path} $(cd $(dirname ${cur_file_path})/../..; pwd)/$(basename ${cur_file_path})\'","class":"lineCov","hits":"2","order":"246","possible_hits":"0",},
{"lineNum":"  360","line":""},
{"lineNum":"  361","line":""},
{"lineNum":"  362","line":""},
{"lineNum":"  363","line":"#--------------------------------------------------------------------------------------------------"},
{"lineNum":"  364","line":"# 依存モジュールのインストール"},
{"lineNum":"  365","line":"#--------------------------------------------------------------------------------------------------"},
{"lineNum":"  366","line":"log.info \"install modules\"","class":"lineCov","hits":"2","order":"247","possible_hits":"0",},
{"lineNum":"  367","line":"log.add_indent","class":"lineCov","hits":"2","order":"248","possible_hits":"0",},
{"lineNum":"  368","line":""},
{"lineNum":"  369","line":"# digdag"},
{"lineNum":"  370","line":"private.download_and_rename \"digdag\" \"${URL_DIGDAG}\" \"${PATH_DIGDAG}\"","class":"lineCov","hits":"2","order":"249","possible_hits":"0",},
{"lineNum":"  371","line":"private.exit_on_fail $?","class":"lineCov","hits":"2","order":"336","possible_hits":"0",},
{"lineNum":"  372","line":""},
{"lineNum":"  373","line":"# embulk"},
{"lineNum":"  374","line":"# TODO process pluginに移動"},
{"lineNum":"  375","line":"#readonly URL_EMBULK=\"https://dl.bintray.com/embulk/maven/embulk-0.8.39.jar\""},
{"lineNum":"  376","line":"#readonly PATH_EMBULK=\"${DIR_MODULE}/embulk\""},
{"lineNum":"  377","line":"#private.download_and_rename \"embulk\" \"${URL_EMBULK}\" \"${PATH_EMBULK}\""},
{"lineNum":"  378","line":"#private.exit_on_fail $?"},
{"lineNum":"  379","line":""},
{"lineNum":"  380","line":"# compare-files"},
{"lineNum":"  381","line":"# TODO process pluginに移動"},
{"lineNum":"  382","line":"#readonly URL_COMPAREFILES=\"https://github.com/scenario-test-framework/compare-files/releases/download/1.0.0/compare-files_1.0.0_production.tar.gz\""},
{"lineNum":"  383","line":"#readonly DIR_COMPAREFILES=\"${DIR_MODULE}/comparefiles\""},
{"lineNum":"  384","line":"#private.download_and_extract \"compare-files\" \"${URL_COMPAREFILES}\" \"${DIR_COMPAREFILES}\""},
{"lineNum":"  385","line":"#private.exit_on_fail $?"},
{"lineNum":"  386","line":""},
{"lineNum":"  387","line":"# logfilter"},
{"lineNum":"  388","line":"# TODO process pluginに移動"},
{"lineNum":"  389","line":"#readonly URL_LOGFILTER=\"https://github.com/scenario-test-framework/logfilter/releases/download/1.0.0/logfilter_1.0.0_production.tar.gz\""},
{"lineNum":"  390","line":"#readonly DIR_LOGFILTER=\"${DIR_MODULE}/logfilter\""},
{"lineNum":"  391","line":"#private.download_and_extract \"logfilter\" \"${URL_LOGFILTER}\" \"${DIR_LOGFILTER}\""},
{"lineNum":"  392","line":"#private.exit_on_fail $?"},
{"lineNum":"  393","line":""},
{"lineNum":"  394","line":"log.remove_indent","class":"lineCov","hits":"2","order":"337","possible_hits":"0",},
{"lineNum":"  395","line":""},
{"lineNum":"  396","line":""},
{"lineNum":"  397","line":""},
{"lineNum":"  398","line":"#--------------------------------------------------------------------------------------------------"},
{"lineNum":"  399","line":"# process pluginのインストール"},
{"lineNum":"  400","line":"#--------------------------------------------------------------------------------------------------"},
{"lineNum":"  401","line":"log.info \"install process plugins\"","class":"lineCov","hits":"2","order":"338","possible_hits":"0",},
{"lineNum":"  402","line":"log.add_indent","class":"lineCov","hits":"2","order":"339","possible_hits":"0",},
{"lineNum":"  403","line":""},
{"lineNum":"  404","line":"for cur_process in $(stfw.process.list); do","class":"lineCov","hits":"3","order":"340","possible_hits":"0",},
{"lineNum":"  405","line":"  log.info \"${cur_process}\"","class":"lineCov","hits":"1","order":"372","possible_hits":"0",},
{"lineNum":"  406","line":"  log.add_indent","class":"lineCov","hits":"1","order":"373","possible_hits":"0",},
{"lineNum":"  407","line":"  plugin_path=$(stfw.process.get_path \"${cur_process}\")","class":"lineCov","hits":"2","order":"374","possible_hits":"0",},
{"lineNum":"  408","line":"  stfw.process.install \"${plugin_path}\"","class":"lineCov","hits":"1","order":"400","possible_hits":"0",},
{"lineNum":"  409","line":"  private.exit_on_fail $?","class":"lineCov","hits":"1","order":"423","possible_hits":"0",},
{"lineNum":"  410","line":"  log.remove_indent","class":"lineCov","hits":"1","order":"424","possible_hits":"0",},
{"lineNum":"  411","line":"done"},
{"lineNum":"  412","line":""},
{"lineNum":"  413","line":"log.remove_indent","class":"lineCov","hits":"2","order":"425","possible_hits":"0",},
{"lineNum":"  414","line":""},
{"lineNum":"  415","line":""},
{"lineNum":"  416","line":""},
{"lineNum":"  417","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  418","line":"# 事後処理"},
{"lineNum":"  419","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  420","line":"log.clear_indent","class":"lineCov","hits":"2","order":"426","possible_hits":"0",},
{"lineNum":"  421","line":"{"},
{"lineNum":"  422","line":"  echo \"--------------------------------------------------\"","class":"lineCov","hits":"2","order":"428","possible_hits":"0",},
{"lineNum":"  423","line":"  echo \" INSTALL SUCCESS\"","class":"lineCov","hits":"2","order":"429","possible_hits":"0",},
{"lineNum":"  424","line":"  echo \"--------------------------------------------------\"","class":"lineCov","hits":"2","order":"430","possible_hits":"0",},
{"lineNum":"  425","line":"} | log.info","class":"lineCov","hits":"2","order":"431","possible_hits":"0",},
{"lineNum":"  426","line":"exit ${exitcode}","class":"lineCov","hits":"2","order":"432","possible_hits":"0",},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "integration_test.sh", "date" : "2018-02-01 17:02:22", "instrumented" : 216, "covered" : 139,};
var merged_data = [];

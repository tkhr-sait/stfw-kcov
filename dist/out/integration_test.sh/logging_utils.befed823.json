var data = {lines:[
{"lineNum":"    1","line":"#!/bin/bash"},
{"lineNum":"    2","line":"#set -eux"},
{"lineNum":"    3","line":"#==================================================================================================="},
{"lineNum":"    4","line":"# loggingユーティリティ"},
{"lineNum":"    5","line":"#"},
{"lineNum":"    6","line":"# 概要"},
{"lineNum":"    7","line":"#   ${LOGLEVEL} に応じて stderr, ${PATH_LOG} にログメッセージを出力します。"},
{"lineNum":"    8","line":"#"},
{"lineNum":"    9","line":"# 依存"},
{"lineNum":"   10","line":"#   open usp tukubai"},
{"lineNum":"   11","line":"#"},
{"lineNum":"   12","line":"# 前提"},
{"lineNum":"   13","line":"#   システム設定を事前に読み込んでいること"},
{"lineNum":"   14","line":"#     ${EXITCODE_SUCCESS}, ${EXITCODE_WARN}, ${EXITCODE_ERROR} が事前に設定されていること"},
{"lineNum":"   15","line":"#     ${LOGLEVEL} が事前に設定されていること"},
{"lineNum":"   16","line":"#     ${PATH_LOG} が事前に設定されていること"},
{"lineNum":"   17","line":"#     log.mask が事前に定義されていること"},
{"lineNum":"   18","line":"#"},
{"lineNum":"   19","line":"#   パイプモードで利用する場合、必ず 標準入力に何らかの文字列が渡されること"},
{"lineNum":"   20","line":"#     ※cat - で受けるため、cdなど、出力のないコマンドからパイプでつなぐと予期せぬ動作が起こります。"},
{"lineNum":"   21","line":"#"},
{"lineNum":"   22","line":"# 定義リスト"},
{"lineNum":"   23","line":"#   log.add_indent"},
{"lineNum":"   24","line":"#   log.remove_indent"},
{"lineNum":"   25","line":"#   log.clear_indent"},
{"lineNum":"   26","line":"#   log.save_indent"},
{"lineNum":"   27","line":"#   log.restore_indent"},
{"lineNum":"   28","line":"#"},
{"lineNum":"   29","line":"#   log.trace"},
{"lineNum":"   30","line":"#   log.debug"},
{"lineNum":"   31","line":"#   log.info"},
{"lineNum":"   32","line":"#   log.warn"},
{"lineNum":"   33","line":"#   log.error"},
{"lineNum":"   34","line":"#"},
{"lineNum":"   35","line":"#   log.tee"},
{"lineNum":"   36","line":"#   log.split"},
{"lineNum":"   37","line":"#"},
{"lineNum":"   38","line":"#   log.is_trace_enabled"},
{"lineNum":"   39","line":"#   log.is_debug_enabled"},
{"lineNum":"   40","line":"#"},
{"lineNum":"   41","line":"#   log.rotatelog_by_day"},
{"lineNum":"   42","line":"#   log.rotatelog_by_day_first"},
{"lineNum":"   43","line":"#"},
{"lineNum":"   44","line":"#   log.script_start"},
{"lineNum":"   45","line":"#   log.script_end"},
{"lineNum":"   46","line":"#"},
{"lineNum":"   47","line":"#   log.func_start_trace"},
{"lineNum":"   48","line":"#   log.func_end_trace"},
{"lineNum":"   49","line":"#"},
{"lineNum":"   50","line":"#   log.sect_start_trace"},
{"lineNum":"   51","line":"#   log.sect_end_trace"},
{"lineNum":"   52","line":"#   log.sect_start_debug"},
{"lineNum":"   53","line":"#   log.sect_end_debug"},
{"lineNum":"   54","line":"#   log.sect_start_info"},
{"lineNum":"   55","line":"#   log.sect_end_info"},
{"lineNum":"   56","line":"#"},
{"lineNum":"   57","line":"#==================================================================================================="},
{"lineNum":"   58","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   59","line":"# プロセス単位の環境変数 ※定数ですが、複数回sourceされることを考慮して変数として定義しています。"},
{"lineNum":"   60","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   61","line":"LOGLEVEL=${LOGLEVEL:-${LOGLEVEL_INFO}}","class":"lineCov","hits":"61","order":"130","possible_hits":"0",},
{"lineNum":"   62","line":""},
{"lineNum":"   63","line":"# TODO フォーマットは、ここでの出力定義と、rotateでの正規表現の2箇所のメンテナンスが必要。"},
{"lineNum":"   64","line":"LOG__RAW_OUTPUT=${LOG__RAW_OUTPUT:-false}","class":"lineCov","hits":"61","order":"131","possible_hits":"0",},
{"lineNum":"   65","line":"LOG__FORMAT_DATE=\"+%Y-%m-%d\"","class":"lineCov","hits":"61","order":"132","possible_hits":"0",},
{"lineNum":"   66","line":"LOG__FORMAT_TIMESTAMP=\"${LOG__FORMAT_DATE} %T\"","class":"lineCov","hits":"61","order":"133","possible_hits":"0",},
{"lineNum":"   67","line":"LOG__INDENT_STR=\"--\"","class":"lineCov","hits":"61","order":"134","possible_hits":"0",},
{"lineNum":"   68","line":"LOG__GREP_FORMAT=\"[0-9]\\{4\\}-[0-9]\\{2\\}-[0-9]\\{2\\} [0-9]\\{2\\}:[0-9]\\{2\\}:[0-9]\\{2\\} \"","class":"lineCov","hits":"61","order":"135","possible_hits":"0",},
{"lineNum":"   69","line":""},
{"lineNum":"   70","line":"LOG__PREFIX_SCRIPT_START=${LOG__PREFIX_SCRIPT_START:-__START__ }","class":"lineCov","hits":"61","order":"136","possible_hits":"0",},
{"lineNum":"   71","line":"LOG__PREFIX_SCRIPT_END=${LOG__PREFIX_SCRIPT_END:-__END__ }","class":"lineCov","hits":"61","order":"137","possible_hits":"0",},
{"lineNum":"   72","line":"LOG__PREFIX_FUNC_START=${LOG__PREFIX_FUNC_START:-__START__ }","class":"lineCov","hits":"61","order":"138","possible_hits":"0",},
{"lineNum":"   73","line":"LOG__PREFIX_FUNC_END=${LOG__PREFIX_FUNC_END:-__END__ }","class":"lineCov","hits":"61","order":"139","possible_hits":"0",},
{"lineNum":"   74","line":"LOG__PREFIX_SECT_START=${LOG__PREFIX_SECT_START:-__START__ }","class":"lineCov","hits":"61","order":"140","possible_hits":"0",},
{"lineNum":"   75","line":"LOG__PREFIX_SECT_END=${LOG__PREFIX_SECT_END:-__END__ }","class":"lineCov","hits":"61","order":"141","possible_hits":"0",},
{"lineNum":"   76","line":""},
{"lineNum":"   77","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   78","line":"# 起動元スクリプト単位の環境変数"},
{"lineNum":"   79","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   80","line":"# 現在インデント深度"},
{"lineNum":"   81","line":"export LOG__INDENT_COUNT","class":"lineCov","hits":"61","order":"142","possible_hits":"0",},
{"lineNum":"   82","line":"# 一時保存インデント深度ファイル数"},
{"lineNum":"   83","line":"#   ※実ファイルは、スクリプト名 + PID毎に別管理しておき、各プロセス毎の restoreするインデント震度を保持しています。"},
{"lineNum":"   84","line":"export LOG__SAVED_INDENT_FILE_COUNT","class":"lineCov","hits":"61","order":"143","possible_hits":"0",},
{"lineNum":"   85","line":""},
{"lineNum":"   86","line":""},
{"lineNum":"   87","line":""},
{"lineNum":"   88","line":""},
{"lineNum":"   89","line":""},
{"lineNum":"   90","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   91","line":"# インデント追加"},
{"lineNum":"   92","line":"#"},
{"lineNum":"   93","line":"# 引数"},
{"lineNum":"   94","line":"#   なし"},
{"lineNum":"   95","line":"#"},
{"lineNum":"   96","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"   97","line":"function log.add_indent() {"},
{"lineNum":"   98","line":"  LOG__INDENT_COUNT=$(( LOG__INDENT_COUNT + 1 ))","class":"lineCov","hits":"67","order":"188","possible_hits":"0",},
{"lineNum":"   99","line":"}"},
{"lineNum":"  100","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  101","line":"# インデント削除"},
{"lineNum":"  102","line":"#"},
{"lineNum":"  103","line":"# 引数"},
{"lineNum":"  104","line":"#   ・1: インデント削除数 ※デフォルト:1"},
{"lineNum":"  105","line":"#"},
{"lineNum":"  106","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  107","line":"function log.remove_indent() {"},
{"lineNum":"  108","line":"  local _count=${1:-1}","class":"lineCov","hits":"39","order":"210","possible_hits":"0",},
{"lineNum":"  109","line":"  LOG__INDENT_COUNT=$(( LOG__INDENT_COUNT - _count ))","class":"lineCov","hits":"39","order":"211","possible_hits":"0",},
{"lineNum":"  110","line":"}"},
{"lineNum":"  111","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  112","line":"# インデントクリア"},
{"lineNum":"  113","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  114","line":"function log.clear_indent() {"},
{"lineNum":"  115","line":"  LOG__INDENT_COUNT=0","class":"lineCov","hits":"2","order":"427","possible_hits":"0",},
{"lineNum":"  116","line":"}"},
{"lineNum":"  117","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  118","line":"# インデント一時保存ディレクトリ ※PID毎に一意"},
{"lineNum":"  119","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  120","line":"function private.log.get_stack_dir() {"},
{"lineNum":"  121","line":"  echo \"/tmp/$(basename $0 .sh)_$$\"","class":"lineCov","hits":"378","order":"259","possible_hits":"0",},
{"lineNum":"  122","line":"}"},
{"lineNum":"  123","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  124","line":"# インデント一時保存"},
{"lineNum":"  125","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  126","line":"function log.save_indent() {"},
{"lineNum":"  127","line":"  # 保存数のインクリメント"},
{"lineNum":"  128","line":"  LOG__SAVED_INDENT_FILE_COUNT=$(( LOG__SAVED_INDENT_FILE_COUNT + 1 ))","class":"lineCov","hits":"26","order":"257","possible_hits":"0",},
{"lineNum":"  129","line":""},
{"lineNum":"  130","line":"  # 保存ディレクトリの存在チェック"},
{"lineNum":"  131","line":"  if [ ! -d \"$(private.log.get_stack_dir)\" ]; then","class":"lineCov","hits":"52","order":"258","possible_hits":"0",},
{"lineNum":"  132","line":"    mkdir -p \"$(private.log.get_stack_dir)\"","class":"lineCov","hits":"52","order":"260","possible_hits":"0",},
{"lineNum":"  133","line":"  fi"},
{"lineNum":"  134","line":""},
{"lineNum":"  135","line":"  # 現在インデント深度をファイル保存"},
{"lineNum":"  136","line":"  echo ${LOG__INDENT_COUNT} > \"$(private.log.get_stack_dir)/${LOG__SAVED_INDENT_FILE_COUNT}\"","class":"lineCov","hits":"59","order":"261","possible_hits":"0",},
{"lineNum":"  137","line":""},
{"lineNum":"  138","line":"  # TRACE出力"},
{"lineNum":"  139","line":"  private.log.trace.echo_saved_indent_info","class":"lineCov","hits":"26","order":"262","possible_hits":"0",},
{"lineNum":"  140","line":"}"},
{"lineNum":"  141","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  142","line":"# インデントリストア"},
{"lineNum":"  143","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  144","line":"function log.restore_indent() {"},
{"lineNum":"  145","line":"  # インデント深度のリストア"},
{"lineNum":"  146","line":"  LOG__INDENT_COUNT=$(cat \"$(private.log.get_stack_dir)/${LOG__SAVED_INDENT_FILE_COUNT}\")","class":"lineCov","hits":"78","order":"326","possible_hits":"0",},
{"lineNum":"  147","line":""},
{"lineNum":"  148","line":"  # 保存ファイルの削除"},
{"lineNum":"  149","line":"  rm -f \"$(private.log.get_stack_dir)/${LOG__SAVED_INDENT_FILE_COUNT}\"","class":"lineCov","hits":"52","order":"327","possible_hits":"0",},
{"lineNum":"  150","line":""},
{"lineNum":"  151","line":"  # 保存ファイル数のデクリメント"},
{"lineNum":"  152","line":"  LOG__SAVED_INDENT_FILE_COUNT=$(( LOG__SAVED_INDENT_FILE_COUNT - 1 ))","class":"lineCov","hits":"26","order":"328","possible_hits":"0",},
{"lineNum":"  153","line":""},
{"lineNum":"  154","line":"  # ディレクトリ毎のファイル数確認"},
{"lineNum":"  155","line":"  local _stack_dir=\"$(private.log.get_stack_dir)\"","class":"lineCov","hits":"52","order":"329","possible_hits":"0",},
{"lineNum":"  156","line":"  local _file_count=\"$(find ${_stack_dir} -mindepth 1 -maxdepth 1 -type f | wc -l)\"","class":"lineCov","hits":"78","order":"330","possible_hits":"0",},
{"lineNum":"  157","line":"  if [ ${_file_count} -le 0 ]; then","class":"lineCov","hits":"26","order":"331","possible_hits":"0",},
{"lineNum":"  158","line":"    # 0以下の場合、保存ディレクトリ削除"},
{"lineNum":"  159","line":"    rm -fr \"$(private.log.get_stack_dir)\"","class":"lineCov","hits":"52","order":"332","possible_hits":"0",},
{"lineNum":"  160","line":"  fi"},
{"lineNum":"  161","line":""},
{"lineNum":"  162","line":"  # TRACE出力"},
{"lineNum":"  163","line":"  private.log.trace.echo_saved_indent_info","class":"lineCov","hits":"26","order":"333","possible_hits":"0",},
{"lineNum":"  164","line":"}"},
{"lineNum":"  165","line":"function private.log.trace.echo_saved_indent_info() {"},
{"lineNum":"  166","line":"  if [ \"${LOGLEVEL}\" != \"${LOGLEVEL_TRACE}\" ]; then","class":"lineCov","hits":"52","order":"263","possible_hits":"0",},
{"lineNum":"  167","line":"    return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"52","order":"264","possible_hits":"0",},
{"lineNum":"  168","line":"  fi"},
{"lineNum":"  169","line":""},
{"lineNum":"  170","line":"#  local _stack_dir=$(private.log.get_stack_dir)"},
{"lineNum":"  171","line":"#  log.trace \"-------------------------------------------------- TRACE-START --------------------------------------------------\""},
{"lineNum":"  172","line":"#  log.trace \"- INVOKER                       : ${FUNCNAME[1]}\""},
{"lineNum":"  173","line":"#  log.trace \"  - STACK_DIR                   : ${_stack_dir}\""},
{"lineNum":"  174","line":"#  log.trace \"  - ls                          : $(test -d ${_stack_dir} && ls -l ${_stack_dir})\""},
{"lineNum":"  175","line":"#  log.trace \"  - LOG__SAVED_INDENT_FILE_COUNT: ${LOG__SAVED_INDENT_FILE_COUNT}\""},
{"lineNum":"  176","line":"#  log.trace \"  - LOG__INDENT_COUNT           : ${LOG__INDENT_COUNT}\""},
{"lineNum":"  177","line":"#  log.trace \"-------------------------------------------------- TRACE-END   --------------------------------------------------\""},
{"lineNum":"  178","line":"}"},
{"lineNum":"  179","line":""},
{"lineNum":"  180","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  181","line":"# インデント取得"},
{"lineNum":"  182","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  183","line":"function log.get_indent() {"},
{"lineNum":"  184","line":"  echo \"${LOG__INDENT_COUNT}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  185","line":"}"},
{"lineNum":"  186","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  187","line":"# インデント設定"},
{"lineNum":"  188","line":"#"},
{"lineNum":"  189","line":"# 引数"},
{"lineNum":"  190","line":"#   ・1: インデント数"},
{"lineNum":"  191","line":"#"},
{"lineNum":"  192","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  193","line":"function log.set_indent() {"},
{"lineNum":"  194","line":"  local _count=$1","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  195","line":"  if [ \"${_count}\" = \"\" ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  196","line":"    log.clear_indent","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  197","line":"    log.error \"${FUNCNAME[0]}: インデント数が指定されていません。\"                                 \\","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  198","line":"      \"処理を見なおして下さい。呼び出し元:${FUNCNAME[1]}\"                                          | log.tee"},
{"lineNum":"  199","line":"    exit ${EXITCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  200","line":"  fi"},
{"lineNum":"  201","line":"  LOG__INDENT_COUNT=${_count}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  202","line":"}"},
{"lineNum":"  203","line":""},
{"lineNum":"  204","line":""},
{"lineNum":"  205","line":""},
{"lineNum":"  206","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  207","line":"# private.ログ標準出力"},
{"lineNum":"  208","line":"#"},
{"lineNum":"  209","line":"# 概要"},
{"lineNum":"  210","line":"#   ログフォーマットに従って、引数の文言を標準出力します。"},
{"lineNum":"  211","line":"#   標準出力されるのはマスキングされた結果です。"},
{"lineNum":"  212","line":"#"},
{"lineNum":"  213","line":"# 前提"},
{"lineNum":"  214","line":"#   ・なし"},
{"lineNum":"  215","line":"#"},
{"lineNum":"  216","line":"# 引数"},
{"lineNum":"  217","line":"#   ・1  : ログレベル"},
{"lineNum":"  218","line":"#   ・2〜: ログ出力文言"},
{"lineNum":"  219","line":"#"},
{"lineNum":"  220","line":"# 出力"},
{"lineNum":"  221","line":"#   標準出力"},
{"lineNum":"  222","line":"#"},
{"lineNum":"  223","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  224","line":"function private.log.format() {"},
{"lineNum":"  225","line":"  local _log_level=\"$1\"","class":"lineCov","hits":"211","order":"174","possible_hits":"0",},
{"lineNum":"  226","line":"  local _timestamp=$(date \"${LOG__FORMAT_TIMESTAMP}\")","class":"lineCov","hits":"422","order":"175","possible_hits":"0",},
{"lineNum":"  227","line":"  shift","class":"lineCov","hits":"211","order":"176","possible_hits":"0",},
{"lineNum":"  228","line":"  local _msg=\"$*\"","class":"lineCov","hits":"211","order":"177","possible_hits":"0",},
{"lineNum":"  229","line":""},
{"lineNum":"  230","line":"  if [ \"${LOG__RAW_OUTPUT}\" = \"true\" ]; then","class":"lineCov","hits":"211","order":"178","possible_hits":"0",},
{"lineNum":"  231","line":"    # メッセージのみを出力"},
{"lineNum":"  232","line":"    echo \"${_msg}\"                                                                                 |","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  233","line":"    log.mask","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  234","line":"    return ${EXITCODE_SUCCESS}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  235","line":"  fi"},
{"lineNum":"  236","line":""},
{"lineNum":"  237","line":"  echo \"${_msg}\"                                                                                   |","class":"lineCov","hits":"211","order":"179","possible_hits":"0",},
{"lineNum":"  238","line":"  #--------------------------------------------------------------------------------------------------"},
{"lineNum":"  239","line":"  # レイアウト"},
{"lineNum":"  240","line":"  # TIMESTAMP LOG_LEVEL INDENT MESSAGE"},
{"lineNum":"  241","line":"  #--------------------------------------------------------------------------------------------------"},
{"lineNum":"  242","line":"  awk                                                                                              \\","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  243","line":"    -v _timestamp=\"${_timestamp}\"                                                                  \\"},
{"lineNum":"  244","line":"    -v _log_level=\"${_log_level}\"                                                                  \\"},
{"lineNum":"  245","line":"    -v LOG__INDENT_STR=\"${LOG__INDENT_STR}\"                                                        \\"},
{"lineNum":"  246","line":"    -v LOG__INDENT_COUNT=${LOG__INDENT_COUNT}                                                      \\"},
{"lineNum":"  247","line":"    \'"},
{"lineNum":"  248","line":"    {"},
{"lineNum":"  249","line":"      # 「TIMESTAMP LOG_LEVEL」の出力"},
{"lineNum":"  250","line":"      printf _timestamp\" \"_log_level","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  251","line":""},
{"lineNum":"  252","line":"      # 「 INDENT」の出力"},
{"lineNum":"  253","line":"      for (i = 0; i < LOG__INDENT_COUNT; i++) {","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  254","line":"        if ( i == 0) {","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  255","line":"          printf \" \"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  256","line":"        }"},
{"lineNum":"  257","line":"        printf LOG__INDENT_STR","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  258","line":"      }"},
{"lineNum":"  259","line":""},
{"lineNum":"  260","line":"      # 「MESSAGE + 改行」の出力"},
{"lineNum":"  261","line":"      print \" \"$0","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  262","line":"    }"},
{"lineNum":"  263","line":"  \'                                                                                                |","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  264","line":"  log.mask","class":"lineCov","hits":"211","order":"180","possible_hits":"0",},
{"lineNum":"  265","line":"}"},
{"lineNum":"  266","line":""},
{"lineNum":"  267","line":""},
{"lineNum":"  268","line":""},
{"lineNum":"  269","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  270","line":"# private.ログファイルチェック"},
{"lineNum":"  271","line":"#"},
{"lineNum":"  272","line":"# 概要"},
{"lineNum":"  273","line":"#   出力するログファイルの存在チェック、初期化処理です。"},
{"lineNum":"  274","line":"#"},
{"lineNum":"  275","line":"# 前提"},
{"lineNum":"  276","line":"#   ・PATH_LOG が定義されていること"},
{"lineNum":"  277","line":"#"},
{"lineNum":"  278","line":"# 引数"},
{"lineNum":"  279","line":"#   ・なし"},
{"lineNum":"  280","line":"#"},
{"lineNum":"  281","line":"# 出力"},
{"lineNum":"  282","line":"#   PATH_LOG ※空ファイル"},
{"lineNum":"  283","line":"#"},
{"lineNum":"  284","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  285","line":"function private.log.check_file() {"},
{"lineNum":"  286","line":"  # 環境変数チェック"},
{"lineNum":"  287","line":"  if [ \"${PATH_LOG}\" = \"\" ]; then","class":"lineCov","hits":"29","order":"593","possible_hits":"0",},
{"lineNum":"  288","line":"    private.log.format \"${LOGLEVEL_ERROR}\" \"ログファイルパス：PATH_LOG が設定されていません。\" 1>&2","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  289","line":"    return ${EXITCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  290","line":"  fi"},
{"lineNum":"  291","line":""},
{"lineNum":"  292","line":"  # ファイル存在チェック"},
{"lineNum":"  293","line":"  if [ ! -f \"${PATH_LOG}\" ]; then","class":"lineCov","hits":"29","order":"594","possible_hits":"0",},
{"lineNum":"  294","line":"    local _dir_log=$(dirname \"${PATH_LOG}\")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  295","line":"    if [ ! -d \"${_dir_log}\" ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  296","line":"      mkdir -p \"${_dir_log}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  297","line":"      local _retcode=$?","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  298","line":""},
{"lineNum":"  299","line":"      if [ ${_retcode} -ne ${EXITCODE_SUCCESS} ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  300","line":"        private.log.format \"${LOGLEVEL_ERROR}\" \"ログ出力ディレクトリが作成できません。対象：${_dir_log}\" 1>&2","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  301","line":"        return ${EXITCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  302","line":"      fi"},
{"lineNum":"  303","line":"    fi"},
{"lineNum":"  304","line":""},
{"lineNum":"  305","line":"    touch \"${PATH_LOG}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  306","line":"  fi"},
{"lineNum":"  307","line":""},
{"lineNum":"  308","line":"  return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"29","order":"595","possible_hits":"0",},
{"lineNum":"  309","line":"}"},
{"lineNum":"  310","line":""},
{"lineNum":"  311","line":""},
{"lineNum":"  312","line":""},
{"lineNum":"  313","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  314","line":"# private.ログ出力要否チェック"},
{"lineNum":"  315","line":"#"},
{"lineNum":"  316","line":"# 概要"},
{"lineNum":"  317","line":"#   引数のログレベルが、出力が必要か否かを判定します。"},
{"lineNum":"  318","line":"#"},
{"lineNum":"  319","line":"# 前提"},
{"lineNum":"  320","line":"#   ・LOGLEVEL が定義されていること"},
{"lineNum":"  321","line":"#"},
{"lineNum":"  322","line":"# 引数"},
{"lineNum":"  323","line":"#   ・1: 判定対象のログレベル"},
{"lineNum":"  324","line":"#"},
{"lineNum":"  325","line":"# 出力"},
{"lineNum":"  326","line":"#   なし"},
{"lineNum":"  327","line":"#"},
{"lineNum":"  328","line":"# 戻り値"},
{"lineNum":"  329","line":"#   出力が必要な場合: 0"},
{"lineNum":"  330","line":"#   出力が不要な場合: 3"},
{"lineNum":"  331","line":"#   判定できない場合: 6"},
{"lineNum":"  332","line":"#"},
{"lineNum":"  333","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  334","line":"function private.log.is_write() {"},
{"lineNum":"  335","line":"  local _trg_log_lebel=\"$1\"","class":"lineCov","hits":"338","order":"161","possible_hits":"0",},
{"lineNum":"  336","line":""},
{"lineNum":"  337","line":"  #-------------------------------------------------------------------------------------------------"},
{"lineNum":"  338","line":"  # 前提チェック"},
{"lineNum":"  339","line":"  #-------------------------------------------------------------------------------------------------"},
{"lineNum":"  340","line":"  # ログレベル"},
{"lineNum":"  341","line":"  if [ \"${LOGLEVEL}\" = \"\" ]; then","class":"lineCov","hits":"338","order":"162","possible_hits":"0",},
{"lineNum":"  342","line":"    private.log.format \"${LOGLEVEL_ERROR}\" \"出力ログレベル：LOGLEVEL が設定されていません。\" 1>&2","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  343","line":"    return ${EXITCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  344","line":"  fi"},
{"lineNum":"  345","line":""},
{"lineNum":"  346","line":"  #-------------------------------------------------------------------------------------------------"},
{"lineNum":"  347","line":"  # 引数チェック"},
{"lineNum":"  348","line":"  #-------------------------------------------------------------------------------------------------"},
{"lineNum":"  349","line":"  if [ \"${_trg_log_lebel}\" != \"${LOGLEVEL_TRACE}\" ] && \\","class":"lineCov","hits":"338","order":"163","possible_hits":"0",},
{"lineNum":"  350","line":"     [ \"${_trg_log_lebel}\" != \"${LOGLEVEL_DEBUG}\" ] && \\"},
{"lineNum":"  351","line":"     [ \"${_trg_log_lebel}\" != \"${LOGLEVEL_INFO}\"  ] && \\"},
{"lineNum":"  352","line":"     [ \"${_trg_log_lebel}\" != \"${LOGLEVEL_WARN}\"  ] && \\"},
{"lineNum":"  353","line":"     [ \"${_trg_log_lebel}\" != \"${LOGLEVEL_ERROR}\" ] ; then"},
{"lineNum":"  354","line":"    private.log.format \"${LOGLEVEL_ERROR}\" \"ログレベル：「${_trg_log_lebel}」は想定外の値です。\" 1>&2","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  355","line":"    return ${EXITCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  356","line":"  fi"},
{"lineNum":"  357","line":""},
{"lineNum":"  358","line":"  if [ \"${LOGLEVEL}\" = \"${LOGLEVEL_DEBUG}\" ]; then","class":"lineCov","hits":"338","order":"164","possible_hits":"0",},
{"lineNum":"  359","line":"    # DEBUG以上のログレベルを出力"},
{"lineNum":"  360","line":"    if [ \"${_trg_log_lebel}\" = \"${LOGLEVEL_TRACE}\" ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  361","line":"      return ${EXITCODE_WARN}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  362","line":"    fi"},
{"lineNum":"  363","line":""},
{"lineNum":"  364","line":"  elif [ \"${LOGLEVEL}\" = \"${LOGLEVEL_INFO}\" ]; then","class":"lineCov","hits":"338","order":"165","possible_hits":"0",},
{"lineNum":"  365","line":"    # INFO以上のログレベルを出力"},
{"lineNum":"  366","line":"    if [ \"${_trg_log_lebel}\" = \"${LOGLEVEL_TRACE}\" ] || \\","class":"lineCov","hits":"338","order":"166","possible_hits":"0",},
{"lineNum":"  367","line":"       [ \"${_trg_log_lebel}\" = \"${LOGLEVEL_DEBUG}\" ] ; then"},
{"lineNum":"  368","line":"      return ${EXITCODE_WARN}","class":"lineCov","hits":"200","order":"291","possible_hits":"0",},
{"lineNum":"  369","line":"    fi"},
{"lineNum":"  370","line":""},
{"lineNum":"  371","line":"  elif [ \"${LOGLEVEL}\" = \"${LOGLEVEL_WARN}\" ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  372","line":"    # WARN以上のログレベルを出力"},
{"lineNum":"  373","line":"    if [ \"${_trg_log_lebel}\" = \"${LOGLEVEL_TRACE}\" ] || \\","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  374","line":"       [ \"${_trg_log_lebel}\" = \"${LOGLEVEL_DEBUG}\" ] || \\"},
{"lineNum":"  375","line":"       [ \"${_trg_log_lebel}\" = \"${LOGLEVEL_INFO}\"  ] ; then"},
{"lineNum":"  376","line":"      return ${EXITCODE_WARN}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  377","line":"    fi"},
{"lineNum":"  378","line":""},
{"lineNum":"  379","line":"  elif [ \"${LOGLEVEL}\" = \"${LOGLEVEL_ERROR}\" ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  380","line":"    # ERROR以上のログレベルを出力"},
{"lineNum":"  381","line":"    if [ \"${_trg_log_lebel}\" = \"${LOGLEVEL_TRACE}\" ] || \\","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  382","line":"       [ \"${_trg_log_lebel}\" = \"${LOGLEVEL_DEBUG}\" ] || \\"},
{"lineNum":"  383","line":"       [ \"${_trg_log_lebel}\" = \"${LOGLEVEL_INFO}\"  ] || \\"},
{"lineNum":"  384","line":"       [ \"${_trg_log_lebel}\" = \"${LOGLEVEL_WARN}\"  ] ; then"},
{"lineNum":"  385","line":"      return ${EXITCODE_WARN}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  386","line":"    fi"},
{"lineNum":"  387","line":"  fi"},
{"lineNum":"  388","line":""},
{"lineNum":"  389","line":"  return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"138","order":"167","possible_hits":"0",},
{"lineNum":"  390","line":"}"},
{"lineNum":"  391","line":""},
{"lineNum":"  392","line":""},
{"lineNum":"  393","line":""},
{"lineNum":"  394","line":""},
{"lineNum":"  395","line":""},
{"lineNum":"  396","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  397","line":"# private.ログコンソール出力"},
{"lineNum":"  398","line":"#"},
{"lineNum":"  399","line":"# 概要"},
{"lineNum":"  400","line":"#   引数の文言 or パイプ経由の標準入力 を、コンソールにログフォーマットで出力します。"},
{"lineNum":"  401","line":"#"},
{"lineNum":"  402","line":"# 前提"},
{"lineNum":"  403","line":"#   ・LOGLEVEL が定義されていること"},
{"lineNum":"  404","line":"#   ・PATH_LOG が定義されていること"},
{"lineNum":"  405","line":"#"},
{"lineNum":"  406","line":"# 引数"},
{"lineNum":"  407","line":"#   ・1  : 出力ログレベル"},
{"lineNum":"  408","line":"#   ・2〜: 出力文言 ※パイプの場合は不要"},
{"lineNum":"  409","line":"#"},
{"lineNum":"  410","line":"# 出力"},
{"lineNum":"  411","line":"#   標準出力/標準エラー"},
{"lineNum":"  412","line":"#"},
{"lineNum":"  413","line":"# 戻り値"},
{"lineNum":"  414","line":"#   出力に成功した場合: 0"},
{"lineNum":"  415","line":"#   出力に失敗した場合: 6"},
{"lineNum":"  416","line":"#"},
{"lineNum":"  417","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  418","line":"function private.log.console() {"},
{"lineNum":"  419","line":"  local _trg_log_level=\"$1\"","class":"lineCov","hits":"338","order":"158","possible_hits":"0",},
{"lineNum":"  420","line":"  shift","class":"lineCov","hits":"338","order":"159","possible_hits":"0",},
{"lineNum":"  421","line":""},
{"lineNum":"  422","line":"  #-------------------------------------------------------------------------------------------------"},
{"lineNum":"  423","line":"  # 出力判定"},
{"lineNum":"  424","line":"  #-------------------------------------------------------------------------------------------------"},
{"lineNum":"  425","line":"  private.log.is_write \"${_trg_log_level}\"","class":"lineCov","hits":"338","order":"160","possible_hits":"0",},
{"lineNum":"  426","line":"  local _retcode=$?","class":"lineCov","hits":"338","order":"168","possible_hits":"0",},
{"lineNum":"  427","line":"  if [ ${_retcode} -eq ${EXITCODE_ERROR} ]; then","class":"lineCov","hits":"338","order":"169","possible_hits":"0",},
{"lineNum":"  428","line":"    # 判定できない場合、エラー終了"},
{"lineNum":"  429","line":"    return ${EXITCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  430","line":"  fi"},
{"lineNum":"  431","line":""},
{"lineNum":"  432","line":"  #-------------------------------------------------------------------------------------------------"},
{"lineNum":"  433","line":"  # パイプ判断"},
{"lineNum":"  434","line":"  #-------------------------------------------------------------------------------------------------"},
{"lineNum":"  435","line":"  if [ -p /dev/stdin ] && [ $# -eq 0 ]; then","class":"lineCov","hits":"676","order":"170","possible_hits":"0",},
{"lineNum":"  436","line":"    # パイプの場合"},
{"lineNum":"  437","line":"    if [ ${_retcode} -eq ${EXITCODE_WARN} ]; then","class":"lineCov","hits":"82","order":"171","possible_hits":"0",},
{"lineNum":"  438","line":"      # 出力が不要な場合、ここで終了"},
{"lineNum":"  439","line":"      cat - >/dev/null 2>&1","class":"lineCov","hits":"71","order":"292","possible_hits":"0",},
{"lineNum":"  440","line":"      return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"71","order":"293","possible_hits":"0",},
{"lineNum":"  441","line":"    fi"},
{"lineNum":"  442","line":""},
{"lineNum":"  443","line":"    while IFS= read -r _cur_row; do","class":"lineCov","hits":"190","order":"172","possible_hits":"0",},
{"lineNum":"  444","line":"        private.log.format \"${_trg_log_level}\" \"${_cur_row}\" 1>&2","class":"lineCov","hits":"84","order":"173","possible_hits":"0",},
{"lineNum":"  445","line":"    done < <(cat -)","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  446","line":""},
{"lineNum":"  447","line":"  else"},
{"lineNum":"  448","line":"    # 引数指定の場合"},
{"lineNum":"  449","line":"    if [ ${_retcode} -eq ${EXITCODE_WARN} ]; then","class":"lineCov","hits":"256","order":"193","possible_hits":"0",},
{"lineNum":"  450","line":"      # 出力が不要な場合、ここで終了"},
{"lineNum":"  451","line":"      return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"129","order":"354","possible_hits":"0",},
{"lineNum":"  452","line":"    fi"},
{"lineNum":"  453","line":""},
{"lineNum":"  454","line":"    private.log.format \"${_trg_log_level}\" \"$@\" 1>&2","class":"lineCov","hits":"127","order":"194","possible_hits":"0",},
{"lineNum":"  455","line":"  fi"},
{"lineNum":"  456","line":""},
{"lineNum":"  457","line":"  return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"138","order":"185","possible_hits":"0",},
{"lineNum":"  458","line":"}"},
{"lineNum":"  459","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  460","line":"# traceログ コンソール出力"},
{"lineNum":"  461","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  462","line":"function log.trace() {"},
{"lineNum":"  463","line":"  local _trg_log_level=\"${LOGLEVEL_TRACE}\"","class":"lineCov","hits":"165","order":"349","possible_hits":"0",},
{"lineNum":"  464","line":""},
{"lineNum":"  465","line":"  if [ -p /dev/stdin ] && [ $# -eq 0 ]; then","class":"lineCov","hits":"330","order":"350","possible_hits":"0",},
{"lineNum":"  466","line":"    cat - | private.log.console \"${_trg_log_level}\"","class":"lineCov","hits":"130","order":"472","possible_hits":"0",},
{"lineNum":"  467","line":"  else"},
{"lineNum":"  468","line":"    local _before_IFS=$IFS","class":"lineCov","hits":"100","order":"351","possible_hits":"0",},
{"lineNum":"  469","line":"    IFS=\" $\'\\n\'$\'\\t\'\"","class":"lineCov","hits":"100","order":"352","possible_hits":"0",},
{"lineNum":"  470","line":"    private.log.console \"${_trg_log_level}\" \"$@\"","class":"lineCov","hits":"100","order":"353","possible_hits":"0",},
{"lineNum":"  471","line":"    IFS=${_before_IFS}","class":"lineCov","hits":"100","order":"355","possible_hits":"0",},
{"lineNum":"  472","line":"  fi"},
{"lineNum":"  473","line":""},
{"lineNum":"  474","line":"  return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"165","order":"356","possible_hits":"0",},
{"lineNum":"  475","line":"}"},
{"lineNum":"  476","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  477","line":"# debugログ コンソール出力"},
{"lineNum":"  478","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  479","line":"function log.debug() {"},
{"lineNum":"  480","line":"  local _trg_log_level=\"${LOGLEVEL_DEBUG}\"","class":"lineCov","hits":"35","order":"288","possible_hits":"0",},
{"lineNum":"  481","line":""},
{"lineNum":"  482","line":"  if [ -p /dev/stdin ] && [ $# -eq 0 ]; then","class":"lineCov","hits":"70","order":"289","possible_hits":"0",},
{"lineNum":"  483","line":"    cat - | private.log.console \"${_trg_log_level}\"","class":"lineCov","hits":"12","order":"290","possible_hits":"0",},
{"lineNum":"  484","line":"  else"},
{"lineNum":"  485","line":"    local _before_IFS=$IFS","class":"lineCov","hits":"29","order":"611","possible_hits":"0",},
{"lineNum":"  486","line":"    IFS=\" $\'\\n\'$\'\\t\'\"","class":"lineCov","hits":"29","order":"612","possible_hits":"0",},
{"lineNum":"  487","line":"    private.log.console \"${_trg_log_level}\" \"$@\"","class":"lineCov","hits":"29","order":"613","possible_hits":"0",},
{"lineNum":"  488","line":"    IFS=${_before_IFS}","class":"lineCov","hits":"29","order":"614","possible_hits":"0",},
{"lineNum":"  489","line":"  fi"},
{"lineNum":"  490","line":""},
{"lineNum":"  491","line":"  return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"35","order":"294","possible_hits":"0",},
{"lineNum":"  492","line":"}"},
{"lineNum":"  493","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  494","line":"# infoログ コンソール出力"},
{"lineNum":"  495","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  496","line":"function log.info() {"},
{"lineNum":"  497","line":"  local _trg_log_level=\"${LOGLEVEL_INFO}\"","class":"lineCov","hits":"127","order":"155","possible_hits":"0",},
{"lineNum":"  498","line":""},
{"lineNum":"  499","line":"  if [ -p /dev/stdin ] && [ $# -eq 0 ]; then","class":"lineCov","hits":"254","order":"156","possible_hits":"0",},
{"lineNum":"  500","line":"    cat - | private.log.console \"${_trg_log_level}\"","class":"lineCov","hits":"22","order":"157","possible_hits":"0",},
{"lineNum":"  501","line":"  else"},
{"lineNum":"  502","line":"    local _before_IFS=$IFS","class":"lineCov","hits":"116","order":"190","possible_hits":"0",},
{"lineNum":"  503","line":"    IFS=\" $\'\\n\'$\'\\t\'\"","class":"lineCov","hits":"116","order":"191","possible_hits":"0",},
{"lineNum":"  504","line":"    private.log.console \"${_trg_log_level}\" \"$@\"","class":"lineCov","hits":"116","order":"192","possible_hits":"0",},
{"lineNum":"  505","line":"    IFS=${_before_IFS}","class":"lineCov","hits":"116","order":"195","possible_hits":"0",},
{"lineNum":"  506","line":"  fi"},
{"lineNum":"  507","line":""},
{"lineNum":"  508","line":"  return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"127","order":"186","possible_hits":"0",},
{"lineNum":"  509","line":"}"},
{"lineNum":"  510","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  511","line":"# warnログ コンソール出力"},
{"lineNum":"  512","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  513","line":"function log.warn() {"},
{"lineNum":"  514","line":"  local _trg_log_level=\"${LOGLEVEL_WARN}\"","class":"lineCov","hits":"3","order":"299","possible_hits":"0",},
{"lineNum":"  515","line":""},
{"lineNum":"  516","line":"  if [ -p /dev/stdin ] && [ $# -eq 0 ]; then","class":"lineCov","hits":"6","order":"300","possible_hits":"0",},
{"lineNum":"  517","line":"    cat - | private.log.console \"${_trg_log_level}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  518","line":"  else"},
{"lineNum":"  519","line":"    local _before_IFS=$IFS","class":"lineCov","hits":"3","order":"301","possible_hits":"0",},
{"lineNum":"  520","line":"    IFS=\" $\'\\n\'$\'\\t\'\"","class":"lineCov","hits":"3","order":"302","possible_hits":"0",},
{"lineNum":"  521","line":"    private.log.console \"${_trg_log_level}\" \"$@\"","class":"lineCov","hits":"3","order":"303","possible_hits":"0",},
{"lineNum":"  522","line":"    IFS=${_before_IFS}","class":"lineCov","hits":"3","order":"304","possible_hits":"0",},
{"lineNum":"  523","line":"  fi"},
{"lineNum":"  524","line":""},
{"lineNum":"  525","line":"  return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"3","order":"305","possible_hits":"0",},
{"lineNum":"  526","line":"}"},
{"lineNum":"  527","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  528","line":"# errorログ コンソール出力"},
{"lineNum":"  529","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  530","line":"function log.error() {"},
{"lineNum":"  531","line":"  local _trg_log_level=\"${LOGLEVEL_ERROR}\"","class":"lineCov","hits":"8","possible_hits":"0",},
{"lineNum":"  532","line":""},
{"lineNum":"  533","line":"  if [ -p /dev/stdin ] && [ $# -eq 0 ]; then","class":"lineCov","hits":"16","possible_hits":"0",},
{"lineNum":"  534","line":"    cat - | private.log.console \"${_trg_log_level}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  535","line":"  else"},
{"lineNum":"  536","line":"    local _before_IFS=$IFS","class":"lineCov","hits":"8","possible_hits":"0",},
{"lineNum":"  537","line":"    IFS=\" $\'\\n\'$\'\\t\'\"","class":"lineCov","hits":"8","possible_hits":"0",},
{"lineNum":"  538","line":"    private.log.console \"${_trg_log_level}\" \"$@\"","class":"lineCov","hits":"8","possible_hits":"0",},
{"lineNum":"  539","line":"    IFS=${_before_IFS}","class":"lineCov","hits":"8","possible_hits":"0",},
{"lineNum":"  540","line":"  fi"},
{"lineNum":"  541","line":""},
{"lineNum":"  542","line":"  return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"8","possible_hits":"0",},
{"lineNum":"  543","line":"}"},
{"lineNum":"  544","line":""},
{"lineNum":"  545","line":""},
{"lineNum":"  546","line":""},
{"lineNum":"  547","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  548","line":"# 概要"},
{"lineNum":"  549","line":"#   パイプで渡された標準出力を、PATH_LOGに追記して、標準エラー出力します。"},
{"lineNum":"  550","line":"#   ※バウンダリスクリプトなどで、標準エラー出力されたログをファイルにteeする状況を想定しています。"},
{"lineNum":"  551","line":"#"},
{"lineNum":"  552","line":"#   stdin ----> stdout   ----> stderr"},
{"lineNum":"  553","line":"#          |--> PATH_LOG"},
{"lineNum":"  554","line":"#"},
{"lineNum":"  555","line":"# 引数"},
{"lineNum":"  556","line":"#   なし"},
{"lineNum":"  557","line":"#"},
{"lineNum":"  558","line":"# 出力"},
{"lineNum":"  559","line":"#   なし"},
{"lineNum":"  560","line":"#"},
{"lineNum":"  561","line":"# サンプル"},
{"lineNum":"  562","line":"#   command 2>&1 | log.tee"},
{"lineNum":"  563","line":"#"},
{"lineNum":"  564","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  565","line":"function log.tee() {"},
{"lineNum":"  566","line":"  local _dir_log=\"$(dirname ${PATH_LOG})\"","class":"lineCov","hits":"196","order":"500","possible_hits":"0",},
{"lineNum":"  567","line":"  if [[ ! -d \"${_dir_log}\" ]]; then mkdir -p \"${_dir_log}\"; fi","class":"lineCov","hits":"100","order":"501","possible_hits":"0",},
{"lineNum":"  568","line":"  cat - | tee -a ${PATH_LOG} 1>&2","class":"lineCov","hits":"196","order":"504","possible_hits":"0",},
{"lineNum":"  569","line":"}"},
{"lineNum":"  570","line":""},
{"lineNum":"  571","line":""},
{"lineNum":"  572","line":""},
{"lineNum":"  573","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  574","line":"# 概要"},
{"lineNum":"  575","line":"#   パイプで渡された標準出力を標準出力と標準エラーに分岐します。"},
{"lineNum":"  576","line":"#   ※標準出力で実行結果を返す機能で、ログにも出力したい状況を想定しています。"},
{"lineNum":"  577","line":"#"},
{"lineNum":"  578","line":"#   stdin ----> stdout"},
{"lineNum":"  579","line":"#          |--> stderr"},
{"lineNum":"  580","line":"#"},
{"lineNum":"  581","line":"# 引数"},
{"lineNum":"  582","line":"#   なし"},
{"lineNum":"  583","line":"#"},
{"lineNum":"  584","line":"# 出力"},
{"lineNum":"  585","line":"#   なし"},
{"lineNum":"  586","line":"#"},
{"lineNum":"  587","line":"# サンプル"},
{"lineNum":"  588","line":"#   command | log.split"},
{"lineNum":"  589","line":"#"},
{"lineNum":"  590","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  591","line":"function log.split() {"},
{"lineNum":"  592","line":"  cat - | tee -a /dev/stderr","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  593","line":"}"},
{"lineNum":"  594","line":""},
{"lineNum":"  595","line":""},
{"lineNum":"  596","line":""},
{"lineNum":"  597","line":"function log.is_trace_enabled() {"},
{"lineNum":"  598","line":"  if [ \"${LOGLEVEL}\" = \"${LOGLEVEL_TRACE}\" ]; then","class":"lineCov","hits":"438","order":"200","possible_hits":"0",},
{"lineNum":"  599","line":"    echo \"true\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  600","line":"  else"},
{"lineNum":"  601","line":"    echo \"false\"","class":"lineCov","hits":"438","order":"201","possible_hits":"0",},
{"lineNum":"  602","line":"  fi"},
{"lineNum":"  603","line":"  return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"438","order":"202","possible_hits":"0",},
{"lineNum":"  604","line":"}"},
{"lineNum":"  605","line":""},
{"lineNum":"  606","line":""},
{"lineNum":"  607","line":""},
{"lineNum":"  608","line":"function log.is_debug_enabled() {"},
{"lineNum":"  609","line":"  if [ \"${LOGLEVEL}\" = \"${LOGLEVEL_TRACE}\" ] ||","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  610","line":"     [ \"${LOGLEVEL}\" = \"${LOGLEVEL_DEBUG}\" ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  611","line":"    echo \"true\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  612","line":"  else"},
{"lineNum":"  613","line":"    echo \"false\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  614","line":"  fi"},
{"lineNum":"  615","line":"  return ${EXITCODE_SUCCESS}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  616","line":"}"},
{"lineNum":"  617","line":""},
{"lineNum":"  618","line":""},
{"lineNum":"  619","line":""},
{"lineNum":"  620","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  621","line":"# 概要"},
{"lineNum":"  622","line":"#   ログローテーション（日次）"},
{"lineNum":"  623","line":"#"},
{"lineNum":"  624","line":"# 引数"},
{"lineNum":"  625","line":"#   なし"},
{"lineNum":"  626","line":"#"},
{"lineNum":"  627","line":"# 出力"},
{"lineNum":"  628","line":"#   ${PATH_LOG}.${日付}"},
{"lineNum":"  629","line":"#"},
{"lineNum":"  630","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  631","line":"function log.rotatelog_by_day() {"},
{"lineNum":"  632","line":"  #-------------------------------------------------------------------------------------------------"},
{"lineNum":"  633","line":"  # 事前処理"},
{"lineNum":"  634","line":"  #-------------------------------------------------------------------------------------------------"},
{"lineNum":"  635","line":"  # ログファイルチェック"},
{"lineNum":"  636","line":"  private.log.check_file","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  637","line":"  if [ ${_retcode} -ne ${EXITCODE_SUCCESS} ]; then return ${_retcode}; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  638","line":""},
{"lineNum":"  639","line":"  #-------------------------------------------------------------------------------------------------"},
{"lineNum":"  640","line":"  # 本処理"},
{"lineNum":"  641","line":"  #-------------------------------------------------------------------------------------------------"},
{"lineNum":"  642","line":"  # 当日"},
{"lineNum":"  643","line":"  local _cur_date=$(date ${LOG__FORMAT_DATE})","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  644","line":""},
{"lineNum":"  645","line":"  # 最終行の日付"},
{"lineNum":"  646","line":"  local _last_date=$(grep \"${LOG__GREP_FORMAT}\" \"${PATH_LOG}\" | tail -n 1 | cut -d \" \" -f 1)","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  647","line":"  if [ \"${_last_date}x\" = \"x\" ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  648","line":"    return ${EXITCODE_SUCCESS}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  649","line":"  fi"},
{"lineNum":"  650","line":""},
{"lineNum":"  651","line":"  # 最終行の日付が当日と一致するか確認"},
{"lineNum":"  652","line":"  if [ \"${_last_date}\" != \"${_cur_date}\" ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  653","line":""},
{"lineNum":"  654","line":"    # 一致しない場合、ローテーション"},
{"lineNum":"  655","line":"    local _path_output=\"${PATH_LOG}.${_last_date//\\//}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  656","line":""},
{"lineNum":"  657","line":"    # ローテーション先ファイルが存在する場合、現在時刻でリネーム"},
{"lineNum":"  658","line":"    if [ -f \"${_path_output}\" ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  659","line":"      mv \"${_path_output}\" \"${_path_output}.$(date \'+%Y%m%d%H%M%S\')\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  660","line":"    fi"},
{"lineNum":"  661","line":""},
{"lineNum":"  662","line":"    # コピー"},
{"lineNum":"  663","line":"    cp -p \"${PATH_LOG}\" \"${_path_output}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  664","line":"    _retcode=$?","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  665","line":"    if [ ${_retcode} -ne 0 ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  666","line":"      local _filename_output=\"$(basename ${_path_output})\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  667","line":"      private.log.format \"${LOGLEVEL_ERROR}\" \\","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  668","line":"        \"ログローテーション（日次）に失敗しました。${PATH_LOG} を ${_filename_output} にコピーできません。\" 1>&2"},
{"lineNum":"  669","line":"      return ${EXITCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  670","line":"    fi"},
{"lineNum":"  671","line":""},
{"lineNum":"  672","line":"    # 本体を空に置き換え"},
{"lineNum":"  673","line":"    cp /dev/null ${PATH_LOG}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  674","line":"    _retcode=$?","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  675","line":"    if [ ${_retcode} -ne 0 ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  676","line":"      private.log.format \"${LOGLEVEL_ERROR}\" \\","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  677","line":"        \"ログローテーション（日次）に失敗しました。${PATH_LOG} を 空ファイル に置き換えできません。\" 1>&2"},
{"lineNum":"  678","line":"      return ${EXITCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  679","line":"    fi"},
{"lineNum":"  680","line":"  fi"},
{"lineNum":"  681","line":"  #-------------------------------------------------------------------------------------------------"},
{"lineNum":"  682","line":"  # 事後処理"},
{"lineNum":"  683","line":"  #-------------------------------------------------------------------------------------------------"},
{"lineNum":"  684","line":"  return ${EXITCODE_SUCCESS}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  685","line":"}"},
{"lineNum":"  686","line":""},
{"lineNum":"  687","line":""},
{"lineNum":"  688","line":""},
{"lineNum":"  689","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  690","line":"# 概要"},
{"lineNum":"  691","line":"#   ログローテーション（日次） ※先頭行で判断"},
{"lineNum":"  692","line":"#"},
{"lineNum":"  693","line":"# 引数"},
{"lineNum":"  694","line":"#   なし"},
{"lineNum":"  695","line":"#"},
{"lineNum":"  696","line":"# 出力"},
{"lineNum":"  697","line":"#   ${PATH_LOG}.${日付}"},
{"lineNum":"  698","line":"#"},
{"lineNum":"  699","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  700","line":"function log.rotatelog_by_day_first() {"},
{"lineNum":"  701","line":"  #-------------------------------------------------------------------------------------------------"},
{"lineNum":"  702","line":"  # 事前処理"},
{"lineNum":"  703","line":"  #-------------------------------------------------------------------------------------------------"},
{"lineNum":"  704","line":"  # ログファイルチェック"},
{"lineNum":"  705","line":"  private.log.check_file","class":"lineCov","hits":"29","order":"592","possible_hits":"0",},
{"lineNum":"  706","line":"  local _retcode=$?","class":"lineCov","hits":"29","order":"596","possible_hits":"0",},
{"lineNum":"  707","line":"  if [ ${_retcode} -ne ${EXITCODE_SUCCESS} ]; then return ${_retcode}; fi","class":"lineCov","hits":"29","order":"597","possible_hits":"0",},
{"lineNum":"  708","line":""},
{"lineNum":"  709","line":"  #-------------------------------------------------------------------------------------------------"},
{"lineNum":"  710","line":"  # 本処理"},
{"lineNum":"  711","line":"  #-------------------------------------------------------------------------------------------------"},
{"lineNum":"  712","line":"  # 当日"},
{"lineNum":"  713","line":"  local _cur_date=$(date ${LOG__FORMAT_DATE})","class":"lineCov","hits":"58","order":"598","possible_hits":"0",},
{"lineNum":"  714","line":""},
{"lineNum":"  715","line":"  # 先頭行の日付"},
{"lineNum":"  716","line":"  local _first_date=$(grep \"${LOG__GREP_FORMAT}\" \"${PATH_LOG}\" | head -n 1 | cut -d \" \" -f 1)","class":"lineCov","hits":"116","order":"599","possible_hits":"0",},
{"lineNum":"  717","line":"  if [ \"${_first_date}x\" = \"x\" ]; then","class":"lineCov","hits":"29","order":"600","possible_hits":"0",},
{"lineNum":"  718","line":"    return ${EXITCODE_SUCCESS}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  719","line":"  fi"},
{"lineNum":"  720","line":""},
{"lineNum":"  721","line":"  # 先頭行の日付が当日と一致するか確認"},
{"lineNum":"  722","line":"  if [ \"${_first_date}\" != \"${_cur_date}\" ]; then","class":"lineCov","hits":"29","order":"601","possible_hits":"0",},
{"lineNum":"  723","line":""},
{"lineNum":"  724","line":"    # 一致しない場合、ローテーション"},
{"lineNum":"  725","line":"    local _path_output=\"${PATH_LOG}.${_first_date//\\//}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  726","line":""},
{"lineNum":"  727","line":"    # ローテーション先ファイルが存在する場合、現在時刻でリネーム"},
{"lineNum":"  728","line":"    if [ -f \"${_path_output}\" ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  729","line":"      mv \"${_path_output}\" \"${_path_output}.$(date \'+%Y%m%d%H%M%S\')\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  730","line":"    fi"},
{"lineNum":"  731","line":""},
{"lineNum":"  732","line":"    # コピー"},
{"lineNum":"  733","line":"    cp -p \"${PATH_LOG}\" \"${_path_output}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  734","line":"    _retcode=$?","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  735","line":"    if [ ${_retcode} -ne 0 ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  736","line":"      local _filename_output=\"$(basename ${_path_output})\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  737","line":"      private.log.format \"${LOGLEVEL_ERROR}\" \\","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  738","line":"        \"ログローテーション（日次）に失敗しました。${PATH_LOG} を ${_filename_output} にコピーできません。\" 1>&2"},
{"lineNum":"  739","line":"      return ${EXITCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  740","line":"    fi"},
{"lineNum":"  741","line":""},
{"lineNum":"  742","line":"    # 本体を空に置き換え"},
{"lineNum":"  743","line":"    cp /dev/null ${PATH_LOG}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  744","line":"    _retcode=$?","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  745","line":"    if [ ${_retcode} -ne 0 ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  746","line":"      private.log.format \"${LOGLEVEL_ERROR}\" \\","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  747","line":"        \"ログローテーション（日次）に失敗しました。${PATH_LOG} を 空ファイル に置き換えできません。\" 1>&2"},
{"lineNum":"  748","line":"      return ${EXITCODE_ERROR}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  749","line":"    fi"},
{"lineNum":"  750","line":"  fi"},
{"lineNum":"  751","line":""},
{"lineNum":"  752","line":"  #-------------------------------------------------------------------------------------------------"},
{"lineNum":"  753","line":"  # 事後処理"},
{"lineNum":"  754","line":"  #-------------------------------------------------------------------------------------------------"},
{"lineNum":"  755","line":"  return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"29","order":"602","possible_hits":"0",},
{"lineNum":"  756","line":"}"},
{"lineNum":"  757","line":""},
{"lineNum":"  758","line":""},
{"lineNum":"  759","line":""},
{"lineNum":"  760","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  761","line":"# 概要"},
{"lineNum":"  762","line":"#   スクリプト開始ログ"},
{"lineNum":"  763","line":"#"},
{"lineNum":"  764","line":"# 引数"},
{"lineNum":"  765","line":"#   1 : スクリプトパス"},
{"lineNum":"  766","line":"#   2~: スクリプト引数リスト"},
{"lineNum":"  767","line":"#"},
{"lineNum":"  768","line":"# 設定"},
{"lineNum":"  769","line":"#   LOG__PREFIX_SCRIPT_START"},
{"lineNum":"  770","line":"#"},
{"lineNum":"  771","line":"# 出力"},
{"lineNum":"  772","line":"#   なし"},
{"lineNum":"  773","line":"#"},
{"lineNum":"  774","line":"# サンプル"},
{"lineNum":"  775","line":"#   log.script_start \"$0\" \"$*\""},
{"lineNum":"  776","line":"#     -> yyyy-mm-dd hh:mm:ss INFO  __START__ your_script_name.sh ARG1 ARG2"},
{"lineNum":"  777","line":"#"},
{"lineNum":"  778","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  779","line":"function log.script_start() {"},
{"lineNum":"  780","line":"  local _script_path=\"$1\"","class":"lineCov","hits":"24","order":"516","possible_hits":"0",},
{"lineNum":"  781","line":"  shift","class":"lineCov","hits":"24","order":"517","possible_hits":"0",},
{"lineNum":"  782","line":"  local _args=\"$*\"","class":"lineCov","hits":"24","order":"518","possible_hits":"0",},
{"lineNum":"  783","line":""},
{"lineNum":"  784","line":"  local _script_name=$(basename \"${_script_path}\")","class":"lineCov","hits":"48","order":"519","possible_hits":"0",},
{"lineNum":"  785","line":""},
{"lineNum":"  786","line":"  log.save_indent","class":"lineCov","hits":"24","order":"520","possible_hits":"0",},
{"lineNum":"  787","line":"  log.info \"${LOG__PREFIX_SCRIPT_START}${_script_name} ${_args}\"                                   | log.tee","class":"lineCov","hits":"48","order":"521","possible_hits":"0",},
{"lineNum":"  788","line":"  log.add_indent","class":"lineCov","hits":"24","order":"522","possible_hits":"0",},
{"lineNum":"  789","line":""},
{"lineNum":"  790","line":"  # 処理時間計測start"},
{"lineNum":"  791","line":"  processing_time.start \"${_script_path}_$$\"","class":"lineCov","hits":"24","order":"523","possible_hits":"0",},
{"lineNum":"  792","line":"  return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"24","order":"537","possible_hits":"0",},
{"lineNum":"  793","line":"}"},
{"lineNum":"  794","line":""},
{"lineNum":"  795","line":""},
{"lineNum":"  796","line":""},
{"lineNum":"  797","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  798","line":"# 概要"},
{"lineNum":"  799","line":"#   スクリプト終了ログ"},
{"lineNum":"  800","line":"#"},
{"lineNum":"  801","line":"# 引数"},
{"lineNum":"  802","line":"#   1: スクリプトパス"},
{"lineNum":"  803","line":"#   2: 終了コード"},
{"lineNum":"  804","line":"#   3: 終了メッセージ"},
{"lineNum":"  805","line":"#"},
{"lineNum":"  806","line":"# 設定"},
{"lineNum":"  807","line":"#   LOG__PREFIX_SCRIPT_END"},
{"lineNum":"  808","line":"#"},
{"lineNum":"  809","line":"# 出力"},
{"lineNum":"  810","line":"#   なし"},
{"lineNum":"  811","line":"#"},
{"lineNum":"  812","line":"# サンプル"},
{"lineNum":"  813","line":"#   log.script_end \"$0\" \"0\" \"NORMAL END.\""},
{"lineNum":"  814","line":"#     -> yyyy-mm-dd hh:mm:ss INFO  NORMAL END."},
{"lineNum":"  815","line":"#     -> yyyy-mm-dd hh:mm:ss INFO  exit_code: 0"},
{"lineNum":"  816","line":"#     -> yyyy-mm-dd hh:mm:ss INFO  __END__ your_script_name.sh"},
{"lineNum":"  817","line":"#"},
{"lineNum":"  818","line":"#   log.script_end \"$0\" \"3\" \"PROCESS END WITH WARNING.\""},
{"lineNum":"  819","line":"#     -> yyyy-mm-dd hh:mm:ss WARN  PROCESS END WITH WARNING."},
{"lineNum":"  820","line":"#     -> yyyy-mm-dd hh:mm:ss WARN  exit_code: 3"},
{"lineNum":"  821","line":"#     -> yyyy-mm-dd hh:mm:ss WARN  __END__ your_script_name.sh"},
{"lineNum":"  822","line":"#"},
{"lineNum":"  823","line":"#   log.script_end \"$0\" \"6\" \"error occured in SOME_PROCESS.\""},
{"lineNum":"  824","line":"#     -> yyyy-mm-dd hh:mm:ss ERROR error occured in SOME_PROCESS."},
{"lineNum":"  825","line":"#     -> yyyy-mm-dd hh:mm:ss ERROR exit_code: 6"},
{"lineNum":"  826","line":"#     -> yyyy-mm-dd hh:mm:ss ERROR __END__ your_script_name.sh"},
{"lineNum":"  827","line":"#"},
{"lineNum":"  828","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  829","line":"function log.script_end() {"},
{"lineNum":"  830","line":"  local _script_path=\"$1\"","class":"lineCov","hits":"24","order":"555","possible_hits":"0",},
{"lineNum":"  831","line":"  local _exit_code=\"$2\"","class":"lineCov","hits":"24","order":"556","possible_hits":"0",},
{"lineNum":"  832","line":"  local _exit_message=\"$3\"","class":"lineCov","hits":"24","order":"557","possible_hits":"0",},
{"lineNum":"  833","line":""},
{"lineNum":"  834","line":"  local _script_name=$(basename \"${_script_path}\")","class":"lineCov","hits":"48","order":"558","possible_hits":"0",},
{"lineNum":"  835","line":""},
{"lineNum":"  836","line":"  # 処理時間計算"},
{"lineNum":"  837","line":"  local _processing_time=$(processing_time.end \"${_script_path}_$$\")","class":"lineCov","hits":"48","order":"559","possible_hits":"0",},
{"lineNum":"  838","line":"  local _msg_processing_time=\"[processing_time=${_processing_time}]\"","class":"lineCov","hits":"24","order":"582","possible_hits":"0",},
{"lineNum":"  839","line":"  local _msg=\"${LOG__PREFIX_SCRIPT_END}${_script_name} ${_msg_processing_time}\"","class":"lineCov","hits":"24","order":"583","possible_hits":"0",},
{"lineNum":"  840","line":""},
{"lineNum":"  841","line":"  log.restore_indent","class":"lineCov","hits":"24","order":"584","possible_hits":"0",},
{"lineNum":"  842","line":"  if [ ${_exit_code} -eq ${EXITCODE_SUCCESS} ]; then","class":"lineCov","hits":"24","order":"585","possible_hits":"0",},
{"lineNum":"  843","line":"    if [ \"${_exit_message}\" != \"\" ]; then log.info \"${_exit_message}\" | log.tee; fi","class":"lineCov","hits":"24","order":"586","possible_hits":"0",},
{"lineNum":"  844","line":"    log.info \"${_msg}\" | log.tee","class":"lineCov","hits":"48","order":"587","possible_hits":"0",},
{"lineNum":"  845","line":""},
{"lineNum":"  846","line":"  elif [ ${_exit_code} -le ${EXITCODE_WARN} ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  847","line":"    if [ \"${_exit_message}\" != \"\" ]; then log.warn \"${_exit_message}\" | log.tee; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  848","line":"    log.warn \"${_msg}\" | log.tee","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  849","line":""},
{"lineNum":"  850","line":"  else"},
{"lineNum":"  851","line":"    if [ \"${_exit_message}\" != \"\" ]; then log.error \"${_exit_message}\" | log.tee; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  852","line":"    log.error \"${_msg}\" | log.tee","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  853","line":"  fi"},
{"lineNum":"  854","line":""},
{"lineNum":"  855","line":"  return ${EXITCODE_SUCCESS}","class":"lineCov","hits":"24","order":"588","possible_hits":"0",},
{"lineNum":"  856","line":"}"},
{"lineNum":"  857","line":""},
{"lineNum":"  858","line":""},
{"lineNum":"  859","line":""},
{"lineNum":"  860","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  861","line":"# 概要"},
{"lineNum":"  862","line":"#   関数開始ログ"},
{"lineNum":"  863","line":"#"},
{"lineNum":"  864","line":"# 引数"},
{"lineNum":"  865","line":"#   1~: スクリプト引数リスト"},
{"lineNum":"  866","line":"#"},
{"lineNum":"  867","line":"# 設定"},
{"lineNum":"  868","line":"#   LOG__PREFIX_FUNC_START"},
{"lineNum":"  869","line":"#"},
{"lineNum":"  870","line":"# 出力"},
{"lineNum":"  871","line":"#   なし"},
{"lineNum":"  872","line":"#"},
{"lineNum":"  873","line":"# サンプル"},
{"lineNum":"  874","line":"#   log.func_start_trace \"$*\""},
{"lineNum":"  875","line":"#     -> yyyy-mm-dd hh:mm:ss INFO  -- __START__ your_func_name ARG1 ARG2"},
{"lineNum":"  876","line":"#"},
{"lineNum":"  877","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  878","line":"function log.func_start_trace() {"},
{"lineNum":"  879","line":"  if [[ \"$(log.is_trace_enabled)\" != \"true\" ]]; then return ${EXITCODE_SUCCESS}; fi","class":"lineCov","hits":"666","order":"199","possible_hits":"0",},
{"lineNum":"  880","line":""},
{"lineNum":"  881","line":"  local _invoker_name=\"${FUNCNAME[1]}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  882","line":"  local _args=\"$*\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  883","line":""},
{"lineNum":"  884","line":"  log.save_indent","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  885","line":"  log.trace \"${LOG__PREFIX_FUNC_START}${_invoker_name} ${_args}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  886","line":"  log.add_indent","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  887","line":""},
{"lineNum":"  888","line":"  # 処理時間計測start"},
{"lineNum":"  889","line":"  processing_time.start \"${_invoker_name}_$$\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  890","line":"  return ${EXITCODE_SUCCESS}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  891","line":"}"},
{"lineNum":"  892","line":""},
{"lineNum":"  893","line":""},
{"lineNum":"  894","line":""},
{"lineNum":"  895","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  896","line":"# 概要"},
{"lineNum":"  897","line":"#   関数終了ログ"},
{"lineNum":"  898","line":"#"},
{"lineNum":"  899","line":"# 引数"},
{"lineNum":"  900","line":"#   1: 終了コード"},
{"lineNum":"  901","line":"#"},
{"lineNum":"  902","line":"# 設定"},
{"lineNum":"  903","line":"#   LOG__PREFIX_FUNC_END"},
{"lineNum":"  904","line":"#"},
{"lineNum":"  905","line":"# 出力"},
{"lineNum":"  906","line":"#   なし"},
{"lineNum":"  907","line":"#"},
{"lineNum":"  908","line":"# サンプル"},
{"lineNum":"  909","line":"#   log.func_end_trace \"0\""},
{"lineNum":"  910","line":"#     -> yyyy-mm-dd hh:mm:ss INFO  -- __END__ your_func_name"},
{"lineNum":"  911","line":"#"},
{"lineNum":"  912","line":"#   log.func_end_trace \"3\""},
{"lineNum":"  913","line":"#     -> yyyy-mm-dd hh:mm:ss WARN  -- __END__ your_func_name"},
{"lineNum":"  914","line":"#"},
{"lineNum":"  915","line":"#   log.func_end_trace \"6\""},
{"lineNum":"  916","line":"#     -> yyyy-mm-dd hh:mm:ss ERROR -- __END__ your_func_name"},
{"lineNum":"  917","line":"#"},
{"lineNum":"  918","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  919","line":"function log.func_end_trace() {"},
{"lineNum":"  920","line":"  if [[ \"$(log.is_trace_enabled)\" != \"true\" ]]; then return ${EXITCODE_SUCCESS}; fi","class":"lineCov","hits":"648","order":"213","possible_hits":"0",},
{"lineNum":"  921","line":""},
{"lineNum":"  922","line":"  local _invoker_name=\"${FUNCNAME[1]}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  923","line":"  local _exit_code=\"$1\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  924","line":""},
{"lineNum":"  925","line":"  # 処理時間計算"},
{"lineNum":"  926","line":"  local _processing_time=$(processing_time.end \"${_invoker_name}_$$\")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  927","line":"  local _msg_processing_time=\"[processing_time=${_processing_time}]\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  928","line":"  local _msg=\"${LOG__PREFIX_FUNC_END}${_invoker_name} ${_msg_processing_time}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  929","line":""},
{"lineNum":"  930","line":"  log.restore_indent","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  931","line":"  if [ ${_exit_code} -eq ${EXITCODE_SUCCESS} ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  932","line":"    log.trace \"${_msg}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  933","line":"  elif [ ${_exit_code} -le ${EXITCODE_WARN} ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  934","line":"    log.warn \"${_msg}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  935","line":"  else"},
{"lineNum":"  936","line":"    log.error \"${_msg}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  937","line":"  fi"},
{"lineNum":"  938","line":""},
{"lineNum":"  939","line":"  return ${EXITCODE_SUCCESS}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  940","line":"}"},
{"lineNum":"  941","line":""},
{"lineNum":"  942","line":""},
{"lineNum":"  943","line":""},
{"lineNum":"  944","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  945","line":"# 概要"},
{"lineNum":"  946","line":"#   セクション開始ログ"},
{"lineNum":"  947","line":"#"},
{"lineNum":"  948","line":"# 引数"},
{"lineNum":"  949","line":"#   1: セクション名"},
{"lineNum":"  950","line":"#"},
{"lineNum":"  951","line":"# 設定"},
{"lineNum":"  952","line":"#   LOG__PREFIX_SETC_START"},
{"lineNum":"  953","line":"#"},
{"lineNum":"  954","line":"# 出力"},
{"lineNum":"  955","line":"#   なし"},
{"lineNum":"  956","line":"#"},
{"lineNum":"  957","line":"# サンプル"},
{"lineNum":"  958","line":"#   log.sect_start_trace \"your_section_name\""},
{"lineNum":"  959","line":"#     -> yyyy-mm-dd hh:mm:ss INFO  -- __START__ your_section_name"},
{"lineNum":"  960","line":"#"},
{"lineNum":"  961","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  962","line":"function log.sect_start_trace() {"},
{"lineNum":"  963","line":"  private.log.sect_start \"${LOGLEVEL_TRACE}\" \"$@\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  964","line":"  return $?","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  965","line":"}"},
{"lineNum":"  966","line":""},
{"lineNum":"  967","line":""},
{"lineNum":"  968","line":""},
{"lineNum":"  969","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  970","line":"# 概要"},
{"lineNum":"  971","line":"#   セクション終了ログ"},
{"lineNum":"  972","line":"#"},
{"lineNum":"  973","line":"# 引数"},
{"lineNum":"  974","line":"#   1: セクション名"},
{"lineNum":"  975","line":"#   2: 終了コード"},
{"lineNum":"  976","line":"#"},
{"lineNum":"  977","line":"# 設定"},
{"lineNum":"  978","line":"#   LOG__PREFIX_SECT_END"},
{"lineNum":"  979","line":"#"},
{"lineNum":"  980","line":"# 出力"},
{"lineNum":"  981","line":"#   なし"},
{"lineNum":"  982","line":"#"},
{"lineNum":"  983","line":"# サンプル"},
{"lineNum":"  984","line":"#   log.func_end_trace \"0\""},
{"lineNum":"  985","line":"#     -> yyyy-mm-dd hh:mm:ss INFO  -- __END__ your_func_name"},
{"lineNum":"  986","line":"#"},
{"lineNum":"  987","line":"#   log.func_end_trace \"3\""},
{"lineNum":"  988","line":"#     -> yyyy-mm-dd hh:mm:ss WARN  -- __END__ your_func_name"},
{"lineNum":"  989","line":"#"},
{"lineNum":"  990","line":"#   log.func_end_trace \"6\""},
{"lineNum":"  991","line":"#     -> yyyy-mm-dd hh:mm:ss ERROR -- __END__ your_func_name"},
{"lineNum":"  992","line":"#"},
{"lineNum":"  993","line":"#---------------------------------------------------------------------------------------------------"},
{"lineNum":"  994","line":"function log.sect_end_trace() {"},
{"lineNum":"  995","line":"  private.log.sect_end \"${LOGLEVEL_TRACE}\" \"$@\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  996","line":"  return $?","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  997","line":"}"},
{"lineNum":"  998","line":""},
{"lineNum":"  999","line":""},
{"lineNum":" 1000","line":""},
{"lineNum":" 1001","line":"function log.sect_start_debug() {"},
{"lineNum":" 1002","line":"  private.log.sect_start \"${LOGLEVEL_DEBUG}\" \"$@\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1003","line":"  return $?","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1004","line":"}"},
{"lineNum":" 1005","line":"function log.sect_end_debug() {"},
{"lineNum":" 1006","line":"  private.log.sect_end \"${LOGLEVEL_DEBUG}\" \"$@\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1007","line":"  return $?","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1008","line":"}"},
{"lineNum":" 1009","line":""},
{"lineNum":" 1010","line":""},
{"lineNum":" 1011","line":""},
{"lineNum":" 1012","line":"function log.sect_start_info() {"},
{"lineNum":" 1013","line":"  private.log.sect_start \"${LOGLEVEL_INFO}\" \"$@\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1014","line":"  return $?","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1015","line":"}"},
{"lineNum":" 1016","line":"function log.sect_end_info() {"},
{"lineNum":" 1017","line":"  private.log.sect_end \"${LOGLEVEL_INFO}\" \"$@\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1018","line":"  return $?","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1019","line":"}"},
{"lineNum":" 1020","line":""},
{"lineNum":" 1021","line":""},
{"lineNum":" 1022","line":""},
{"lineNum":" 1023","line":"function private.log.sect_start() {"},
{"lineNum":" 1024","line":"  local _log_level=\"$1\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1025","line":"  local _section_name=\"$2\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1026","line":""},
{"lineNum":" 1027","line":"  if [[ \"${_log_level}\" = \"${LOGLEVEL_TRACE}\" ]] && [[ \"$(log.is_trace_enabled)\" != \"true\" ]]; then return ${EXITCODE_SUCCESS}; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1028","line":"  if [[ \"${_log_level}\" = \"${LOGLEVEL_DEBUG}\" ]] && [[ \"$(log.is_debug_enabled)\" != \"true\" ]]; then return ${EXITCODE_SUCCESS}; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1029","line":""},
{"lineNum":" 1030","line":"  local _msg=\"${LOG__PREFIX_SECT_START}${_section_name}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1031","line":""},
{"lineNum":" 1032","line":"  log.save_indent","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1033","line":"  if [[ \"${_log_level}\" = \"${LOGLEVEL_TRACE}\" ]]; then log.trace \"${_msg}\"; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1034","line":"  if [[ \"${_log_level}\" = \"${LOGLEVEL_DEBUG}\" ]]; then log.debug \"${_msg}\"; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1035","line":"  if [[ \"${_log_level}\" = \"${LOGLEVEL_INFO}\" ]]; then  log.info  \"${_msg}\"; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1036","line":"  log.add_indent","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1037","line":""},
{"lineNum":" 1038","line":"  # 処理時間計測start"},
{"lineNum":" 1039","line":"  processing_time.start \"${_section_name}_$$\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1040","line":""},
{"lineNum":" 1041","line":"  return ${EXITCODE_SUCCESS}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1042","line":"}"},
{"lineNum":" 1043","line":"function private.log.sect_end() {"},
{"lineNum":" 1044","line":"  local _log_level=\"$1\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1045","line":"  local _section_name=\"$2\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1046","line":"  local _exit_code=\"$3\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1047","line":""},
{"lineNum":" 1048","line":"  if [[ \"${_log_level}\" = \"${LOGLEVEL_TRACE}\" ]] && [[ \"$(log.is_trace_enabled)\" != \"true\" ]]; then return ${EXITCODE_SUCCESS}; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1049","line":"  if [[ \"${_log_level}\" = \"${LOGLEVEL_DEBUG}\" ]] && [[ \"$(log.is_debug_enabled)\" != \"true\" ]]; then return ${EXITCODE_SUCCESS}; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1050","line":""},
{"lineNum":" 1051","line":"  # 処理時間計算"},
{"lineNum":" 1052","line":"  local _processing_time=$(processing_time.end \"${_section_name}_$$\")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1053","line":"  local _msg_processing_time=\"[processing_time=${_processing_time}]\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1054","line":"  local _msg=\"${LOG__PREFIX_SECT_END}${_section_name} ${_msg_processing_time}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1055","line":""},
{"lineNum":" 1056","line":"  log.restore_indent","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1057","line":"  if [ ${_exit_code} -eq ${EXITCODE_SUCCESS} ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1058","line":"    if [[ \"${_log_level}\" = \"${LOGLEVEL_TRACE}\" ]]; then log.trace \"${_msg}\"; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1059","line":"    if [[ \"${_log_level}\" = \"${LOGLEVEL_DEBUG}\" ]]; then log.debug \"${_msg}\"; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1060","line":"    if [[ \"${_log_level}\" = \"${LOGLEVEL_INFO}\" ]]; then  log.info  \"${_msg}\"; fi","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1061","line":"  elif [ ${_exit_code} -le ${EXITCODE_WARN} ]; then","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1062","line":"    log.warn \"${_msg}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1063","line":"  else"},
{"lineNum":" 1064","line":"    log.error \"${_msg}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1065","line":"  fi"},
{"lineNum":" 1066","line":""},
{"lineNum":" 1067","line":"  return ${EXITCODE_SUCCESS}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":" 1068","line":"}"},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "integration_test.sh", "date" : "2018-02-01 17:02:22", "instrumented" : 295, "covered" : 142,};
var merged_data = [];
